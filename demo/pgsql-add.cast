{"version":3,"term":{"cols":120,"rows":30,"type":"xterm-256color","version":"iTerm2 3.5.14","theme":{"fg":"#697a82","bg":"#fcf7e5","palette":"#163540:#cb4238:#89982d:#ae8b2c:#4689cd:#c34380:#519f98:#ede9d7:#0d2a34:#bc5329:#5c6d74:#697a82:#869496:#6d71bf:#96a1a1:#fcf7e5"}},"timestamp":1768184802,"idle_time_limit":0.5,"title":"pgsql-add","env":{"SHELL":"/bin/bash"}}
[0.012, "o", "\u001b[?2004h\u001b]0;vonng@vonng-aimax: ~/pigsty\u0007\u001b[01;32mvonng@vonng-aimax\u001b[00m:\u001b[01;34m~/pigsty\u001b[00m$ "]
[1.049, "o", "\u001b[7mbin/pgsql-add pg-test\u001b[27m"]
[0.594, "o", "\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\bbin/pgsql-add pg-test"]
[0.277, "o", "\r\n\u001b[?2004l\r"]
[0.004, "o", "\u001b[0;35m[PLANNING] ===========================================\u001b[0m\r\n[\u001b[0;33mWARN\u001b[0m] \u001b[0;33mcreate pgsql cluster 'pg-test'\u001b[0m\r\n[\u001b[0;33mWARN\u001b[0m] \u001b[0;33mplease make sure nodes are added to pigsty\u001b[0m\r\n\u001b[0;34m[HINT] did you run:  bin/node-add pg-test  ahead?\u001b[0m\r\n\u001b[0;35m[EXECUTE] ===========================================\u001b[0m\r\n[\u001b[0;32m OK \u001b[0m] \u001b[0;32mcreate pgsql cluster 'pg-test' begin\u001b[0m\r\n\u001b[0;34m$ ./pgsql.yml -l pg-test\u001b[0m\r\n"]
[0.269, "o", "\r\nPLAY [PGSQL] ***********************************************************************************************************\r\n"]
[0.021, "o", "\r\nTASK [node_id : get node fact] *****************************************************************************************\r\n"]
[0.194, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [node_id : set node fact] *****************************************************************************************\r\n"]
[0.019, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [node_id : fill empty nodename with hostname] *********************************************************************\r\n"]
[0.017, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [node_id : build node identity] ***********************************************************************************\r\n"]
[0.025, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [node_id : load roles/node_id/vars/u24.x86_64.yml] ****************************************************************\r\n"]
[0.017, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [node_id : fallback to u24.x86_64.yml if u24.x86_64.yml not exists] ***********************************************\r\n"]
[0.008, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [node_id : print node identity] ***********************************************************************************\r\n"]
[0.019, "o", "\u001b[0;32mok: [10.10.10.11] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"nodename: pg-test-1, node_cluster: pg-test, spec: c4m8, os: ubuntu.24.x86_64 u24:deb,   [PGSQL: pg-test] [REDIS: redis-meta]    \"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"nodename: pg-test-2, node_cluster: pg-test, spec: c4m8, os: ubuntu.24.x86_64 u24:deb,   [PGSQL: pg-test] [REDIS: redis-test]    \"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.13] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"nodename: pg-test-3, node_cluster: pg-test, spec: c4m8, os: ubuntu.24.x86_64 u24:deb,   [PGSQL: pg-test] [REDIS: redis-test]    \"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pg_id : get pgsql identity] **************************************************************************************\r\n"]
[0.125, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\r\nTASK [pg_id : build pgsql identity] ************************************************************************************\r\n"]
[0.106, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pg_id : print pgsql identity] ************************************************************************************\r\n"]
[0.077, "o", "\u001b[0;32mok: [10.10.10.12] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"  [replica] pg-test-2 @ 10.10.10.12 , ins = pg-test-2 , cls = pg-test , REPLICATE PRIMARY pg-test-1 @ 10.10.10.11 -> pg-test-2   , postgres://10.10.10.12:5432/postgres\"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"  [replica] pg-test-3 @ 10.10.10.13 , ins = pg-test-3 , cls = pg-test , REPLICATE PRIMARY pg-test-1 @ 10.10.10.11 -> pg-test-3  [OFFLINE]  , postgres://10.10.10.13:5432/postgres\"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;32mok: [10.10.10.11] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"  [primary] pg-test-1 @ 10.10.10.11 , ins = pg-test-1 , cls = pg-test ,  CLUSTER LEADER @ pg-test-1    , postgres://10.10.10.11:5432/postgres\"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : use another default pg_dbsu_uid for deb system] **********************************************************\r\n"]
[0.009, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\r\nTASK [pgsql : create os group postgres] ********************************************************************************\r\n"]
[1.158, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : create postgres dbsu] ************************************************************************************\r\n"]
[1.228, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : grant postgres dbsu sudo privilege] **********************************************************************\r\n"]
[2.349, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : config postgres dbsu ssh no host checking] ***************************************************************\r\n"]
[1.156, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : fetch postgres dbsu public keys] *************************************************************************\r\n"]
[1.123, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : exchange postgres dbsu ssh keys] *************************************************************************\r\n"]
[1.230, "o", "\u001b[0;32mok: [10.10.10.13 -> 10.10.10.11] => (item=['ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC8o38K+In0FjNEQfFBQRg7x66ojL2HjG5LY/UM6SkYv+Imlu+wFxZsdo3UX6HMMcZDOVCKFV9qbG2Yy6ie478tGSXv4HnKxaMu2QeMH/Ntz2KVm1WsTqC7ToFbSCMUiLwrEONT23Xb3BqlphxUWid2wne3Xj0vtrBzZKvTG2Lf73lZDhoXTGqJdcOdioZJnyfPnFCQa3xVCiFc70EMhzj0EqbPw0KNw393mpCCroPcF5lSbkZPsUr8Acacwc2DUS4Xeg1EwzkkvdThCmc+lcMkyop10Wgu/GlUfHVnukU58p+wyUlzrsk40qS8rkzq/GlYUlYQv43JseXhkl/jx+4pr/cUyu88tvM3CUzn6X6m3eANVbPYd+YXfVdUpOZCK03Jxb6pV8fz+c/6SODpk7uUNP9VB5rgA+O4WItkI098An/rt2Kis5YtiNxxWKfmIJ3ffWQXzO9qbWqf1cCdHAXvVmqrYP8ZsFAn4cATuDzYnUp89LbJdgwp+wNcgG4wVBk= ansible-generated on pg-test-3', '10.10.10.11'])\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11] => (item=['ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCZiY2pGebqVtdER2JcgHWVELydBayxWUG+qSyVLHj8qBZAc2KLuYrx7wGuF0+voErGrLZbQWJ7PIOSQkwSor9yM9qrI8zrbD0/DDrWayNlZDybYXjQU61WP+3atQW865c3LBO6xC8nr+0Yc1+/3YZZAK6GKucr+TzVze0wSFHyrskclCDMQYD5XntubnWSiGuSKE/hLHNkDwFnp6UGD6a3N9FqDGc7sVIe1nb3kkO1R92obMAgmackGEDSjRBiaxtDea4BKwzi926KCaizZq8WjmUZTMHr0cUKhMDltooRo30R6jKbvBPEwEFfktW/f6s7MZOVilof7jwkjXuA8IhVs7ncnuRcxvYXR1jFvhjLFr0Gdi9sQJMUiBqtnssc6MuFiYuf38qtYOKdy4HEQtIhZCcqTTGd/GXX/mZiUot1AZVdUaPt7ARzyfuf1RZq/qvVU0kn+m/FngNQMYajAz/dx4F94sPw46S3ubLV8wT0SgXWo+8YfolfJkIxtpDimiE= ansible-generated on pg-test-1', '10.10.10.11'])\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.12 -> 10.10.10.11] => (item=['ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDmnD/Qu1Dyf/ZlZcd07J6+M7zMiAQux24xg5YOtlmfLYKU//WyUtLnxr1jHdbXa6proKYr94BXxg1MgNNTPLNzXBPdoFuAZ78UB997Y2NM8TnhptkZ5MigvxLP+kpaM8ktk/iwOFePbBKQOiHfjKYKVbW0rIBRwD1MNdmvfP4FM5Y9SJnGuIag1C2/+tdqI5RjU3zDMIzryKuWn91EgpNhj1GwQcfSDbORmokqCX4xLuHISOaaBWjIdgfRCShE1i3G28XcsGW6wG3uG58Diu1DmrLkR4uDAsKDlFTiraqt9HhBv0hZDb3jGIceUgjbLmSitjPZgBqfDNGodFe7Dvearj5Q6KQbV/bSKZixJ8xCQgHcjRlOmntWcsyp7Ow1MutuCpmiNP8m5mylz6b3Y1yr2EdzXQqGoCnHTKTFp31pkNDENQXS+fIBFkbXyFm+5cWe2CQNafIB0wDGbGuZLis0H5/xOjxCmQ15baLo7XZCAivzgR4bmPb6u9n0ct6DzvE= ansible-generated on pg-test-2', '10.10.10.11'])\u001b[0m\r\n"]
[1.167, "o", "\u001b[0;32mok: [10.10.10.11 -> 10.10.10.12] => (item=['ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCZiY2pGebqVtdER2JcgHWVELydBayxWUG+qSyVLHj8qBZAc2KLuYrx7wGuF0+voErGrLZbQWJ7PIOSQkwSor9yM9qrI8zrbD0/DDrWayNlZDybYXjQU61WP+3atQW865c3LBO6xC8nr+0Yc1+/3YZZAK6GKucr+TzVze0wSFHyrskclCDMQYD5XntubnWSiGuSKE/hLHNkDwFnp6UGD6a3N9FqDGc7sVIe1nb3kkO1R92obMAgmackGEDSjRBiaxtDea4BKwzi926KCaizZq8WjmUZTMHr0cUKhMDltooRo30R6jKbvBPEwEFfktW/f6s7MZOVilof7jwkjXuA8IhVs7ncnuRcxvYXR1jFvhjLFr0Gdi9sQJMUiBqtnssc6MuFiYuf38qtYOKdy4HEQtIhZCcqTTGd/GXX/mZiUot1AZVdUaPt7ARzyfuf1RZq/qvVU0kn+m/FngNQMYajAz/dx4F94sPw46S3ubLV8wT0SgXWo+8YfolfJkIxtpDimiE= ansible-generated on pg-test-1', '10.10.10.12'])\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.12] => (item=['ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDmnD/Qu1Dyf/ZlZcd07J6+M7zMiAQux24xg5YOtlmfLYKU//WyUtLnxr1jHdbXa6proKYr94BXxg1MgNNTPLNzXBPdoFuAZ78UB997Y2NM8TnhptkZ5MigvxLP+kpaM8ktk/iwOFePbBKQOiHfjKYKVbW0rIBRwD1MNdmvfP4FM5Y9SJnGuIag1C2/+tdqI5RjU3zDMIzryKuWn91EgpNhj1GwQcfSDbORmokqCX4xLuHISOaaBWjIdgfRCShE1i3G28XcsGW6wG3uG58Diu1DmrLkR4uDAsKDlFTiraqt9HhBv0hZDb3jGIceUgjbLmSitjPZgBqfDNGodFe7Dvearj5Q6KQbV/bSKZixJ8xCQgHcjRlOmntWcsyp7Ow1MutuCpmiNP8m5mylz6b3Y1yr2EdzXQqGoCnHTKTFp31pkNDENQXS+fIBFkbXyFm+5cWe2CQNafIB0wDGbGuZLis0H5/xOjxCmQ15baLo7XZCAivzgR4bmPb6u9n0ct6DzvE= ansible-generated on pg-test-2', '10.10.10.12'])\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13 -> 10.10.10.12] => (item=['ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC8o38K+In0FjNEQfFBQRg7x66ojL2HjG5LY/UM6SkYv+Imlu+wFxZsdo3UX6HMMcZDOVCKFV9qbG2Yy6ie478tGSXv4HnKxaMu2QeMH/Ntz2KVm1WsTqC7ToFbSCMUiLwrEONT23Xb3BqlphxUWid2wne3Xj0vtrBzZKvTG2Lf73lZDhoXTGqJdcOdioZJnyfPnFCQa3xVCiFc70EMhzj0EqbPw0KNw393mpCCroPcF5lSbkZPsUr8Acacwc2DUS4Xeg1EwzkkvdThCmc+lcMkyop10Wgu/GlUfHVnukU58p+wyUlzrsk40qS8rkzq/GlYUlYQv43JseXhkl/jx+4pr/cUyu88tvM3CUzn6X6m3eANVbPYd+YXfVdUpOZCK03Jxb6pV8fz+c/6SODpk7uUNP9VB5rgA+O4WItkI098An/rt2Kis5YtiNxxWKfmIJ3ffWQXzO9qbWqf1cCdHAXvVmqrYP8ZsFAn4cATuDzYnUp89LbJdgwp+wNcgG4wVBk= ansible-generated on pg-test-3', '10.10.10.12'])\u001b[0m\r\n"]
[1.169, "o", "\u001b[0;32mok: [10.10.10.11 -> 10.10.10.13] => (item=['ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCZiY2pGebqVtdER2JcgHWVELydBayxWUG+qSyVLHj8qBZAc2KLuYrx7wGuF0+voErGrLZbQWJ7PIOSQkwSor9yM9qrI8zrbD0/DDrWayNlZDybYXjQU61WP+3atQW865c3LBO6xC8nr+0Yc1+/3YZZAK6GKucr+TzVze0wSFHyrskclCDMQYD5XntubnWSiGuSKE/hLHNkDwFnp6UGD6a3N9FqDGc7sVIe1nb3kkO1R92obMAgmackGEDSjRBiaxtDea4BKwzi926KCaizZq8WjmUZTMHr0cUKhMDltooRo30R6jKbvBPEwEFfktW/f6s7MZOVilof7jwkjXuA8IhVs7ncnuRcxvYXR1jFvhjLFr0Gdi9sQJMUiBqtnssc6MuFiYuf38qtYOKdy4HEQtIhZCcqTTGd/GXX/mZiUot1AZVdUaPt7ARzyfuf1RZq/qvVU0kn+m/FngNQMYajAz/dx4F94sPw46S3ubLV8wT0SgXWo+8YfolfJkIxtpDimiE= ansible-generated on pg-test-1', '10.10.10.13'])\u001b[0m\r\n\u001b[0;32mok: [10.10.10.13] => (item=['ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC8o38K+In0FjNEQfFBQRg7x66ojL2HjG5LY/UM6SkYv+Imlu+wFxZsdo3UX6HMMcZDOVCKFV9qbG2Yy6ie478tGSXv4HnKxaMu2QeMH/Ntz2KVm1WsTqC7ToFbSCMUiLwrEONT23Xb3BqlphxUWid2wne3Xj0vtrBzZKvTG2Lf73lZDhoXTGqJdcOdioZJnyfPnFCQa3xVCiFc70EMhzj0EqbPw0KNw393mpCCroPcF5lSbkZPsUr8Acacwc2DUS4Xeg1EwzkkvdThCmc+lcMkyop10Wgu/GlUfHVnukU58p+wyUlzrsk40qS8rkzq/GlYUlYQv43JseXhkl/jx+4pr/cUyu88tvM3CUzn6X6m3eANVbPYd+YXfVdUpOZCK03Jxb6pV8fz+c/6SODpk7uUNP9VB5rgA+O4WItkI098An/rt2Kis5YtiNxxWKfmIJ3ffWQXzO9qbWqf1cCdHAXvVmqrYP8ZsFAn4cATuDzYnUp89LbJdgwp+wNcgG4wVBk= ansible-generated on pg-test-3', '10.10.10.13'])\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;33mchanged: [10.10.10.12 -> 10.10.10.13] => (item=['ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDmnD/Qu1Dyf/ZlZcd07J6+M7zMiAQux24xg5YOtlmfLYKU//WyUtLnxr1jHdbXa6proKYr94BXxg1MgNNTPLNzXBPdoFuAZ78UB997Y2NM8TnhptkZ5MigvxLP+kpaM8ktk/iwOFePbBKQOiHfjKYKVbW0rIBRwD1MNdmvfP4FM5Y9SJnGuIag1C2/+tdqI5RjU3zDMIzryKuWn91EgpNhj1GwQcfSDbORmokqCX4xLuHISOaaBWjIdgfRCShE1i3G28XcsGW6wG3uG58Diu1DmrLkR4uDAsKDlFTiraqt9HhBv0hZDb3jGIceUgjbLmSitjPZgBqfDNGodFe7Dvearj5Q6KQbV/bSKZixJ8xCQgHcjRlOmntWcsyp7Ow1MutuCpmiNP8m5mylz6b3Y1yr2EdzXQqGoCnHTKTFp31pkNDENQXS+fIBFkbXyFm+5cWe2CQNafIB0wDGbGuZLis0H5/xOjxCmQ15baLo7XZCAivzgR4bmPb6u9n0ct6DzvE= ansible-generated on pg-test-2', '10.10.10.13'])\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : lookup pg packages & extensions names] *******************************************************************\r\n"]
[0.021, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : postgres pre-install setup] ******************************************************************************\r\n"]
[0.015, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.005, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : install postgres packages] *******************************************************************************\r\n"]
[8.143, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item=postgresql-18,postgresql-client-18,postgresql-plpython3-18,postgresql-plperl-18,postgresql-pltcl-18,postgresql-18-repack,postgresql-18-wal2json,postgresql-18-pgvector,patroni,python3-etcd,pgbouncer,pgbackrest,pg-exporter,pgbackrest-exporter,vip-manager)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item=postgresql-18,postgresql-client-18,postgresql-plpython3-18,postgresql-plperl-18,postgresql-pltcl-18,postgresql-18-repack,postgresql-18-wal2json,postgresql-18-pgvector,patroni,python3-etcd,pgbouncer,pgbackrest,pg-exporter,pgbackrest-exporter,vip-manager)\u001b[0m\r\n"]
[1.005, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item=postgresql-18,postgresql-client-18,postgresql-plpython3-18,postgresql-plperl-18,postgresql-pltcl-18,postgresql-18-repack,postgresql-18-wal2json,postgresql-18-pgvector,patroni,python3-etcd,pgbouncer,pgbackrest,pg-exporter,pgbackrest-exporter,vip-manager)\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : install postgres extensions] *****************************************************************************\r\n"]
[0.016, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\r\nTASK [pgsql : postgres post-install cleanup] ***************************************************************************\r\n"]
[1.773, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.015, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.014, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : link postgres home] **************************************************************************************\r\n"]
[1.132, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.006, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : setup pgsql path] ****************************************************************************************\r\n"]
[2.323, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : create pgsql directories] ********************************************************************************\r\n"]
[1.142, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'path': '/data/postgres', 'mode': '0700'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'path': '/data/postgres', 'mode': '0700'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'path': '/data/postgres', 'mode': '0700'})\u001b[0m\r\n"]
[1.118, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'path': '/data/backups', 'mode': '0700'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'path': '/data/backups', 'mode': '0700'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'path': '/data/backups', 'mode': '0700'})\u001b[0m\r\n"]
[1.119, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'path': '/data/postgres/pg-test-18', 'mode': '0700'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'path': '/data/postgres/pg-test-18', 'mode': '0700'})\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'path': '/data/postgres/pg-test-18', 'mode': '0700'})\u001b[0m\r\n"]
[1.121, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'path': '/data/postgres/pg-test-18/bin', 'mode': '0700'})\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'path': '/data/postgres/pg-test-18/bin', 'mode': '0700'})\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'path': '/data/postgres/pg-test-18/bin', 'mode': '0700'})\u001b[0m\r\n"]
[1.114, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'path': '/data/postgres/pg-test-18/log', 'mode': '0750'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'path': '/data/postgres/pg-test-18/log', 'mode': '0750'})\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'path': '/data/postgres/pg-test-18/log', 'mode': '0750'})\u001b[0m\r\n"]
[1.115, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'path': '/data/postgres/pg-test-18/tmp', 'mode': '0700'})\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'path': '/data/postgres/pg-test-18/tmp', 'mode': '0700'})\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'path': '/data/postgres/pg-test-18/tmp', 'mode': '0700'})\u001b[0m\r\n"]
[1.116, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'path': '/data/postgres/pg-test-18/cert', 'mode': '0700'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'path': '/data/postgres/pg-test-18/cert', 'mode': '0700'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'path': '/data/postgres/pg-test-18/cert', 'mode': '0700'})\u001b[0m\r\n"]
[1.118, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'path': '/data/postgres/pg-test-18/conf', 'mode': '0700'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'path': '/data/postgres/pg-test-18/conf', 'mode': '0700'})\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'path': '/data/postgres/pg-test-18/conf', 'mode': '0700'})\u001b[0m\r\n"]
[1.117, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'path': '/data/postgres/pg-test-18/data', 'mode': '0700'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'path': '/data/postgres/pg-test-18/data', 'mode': '0700'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'path': '/data/postgres/pg-test-18/data', 'mode': '0700'})\u001b[0m\r\n"]
[1.117, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'path': '/data/postgres/pg-test-18/spool', 'mode': '0700'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'path': '/data/postgres/pg-test-18/spool', 'mode': '0700'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'path': '/data/postgres/pg-test-18/spool', 'mode': '0700'})\u001b[0m\r\n"]
[1.116, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'path': '/data/backups/pg-test-18/backup', 'mode': '0700'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'path': '/data/backups/pg-test-18/backup', 'mode': '0700'})\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'path': '/data/backups/pg-test-18/backup', 'mode': '0700'})\u001b[0m\r\n"]
[1.114, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'path': '/var/run/postgresql', 'mode': '0755'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'path': '/var/run/postgresql', 'mode': '0755'})\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'path': '/var/run/postgresql', 'mode': '0755'})\u001b[0m\r\n"]
[1.117, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'path': '/etc/patroni', 'mode': '0700'})\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'path': '/etc/patroni', 'mode': '0700'})\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'path': '/etc/patroni', 'mode': '0700'})\u001b[0m\r\n"]
[1.116, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'path': '/etc/pgbackrest', 'mode': '0700'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'path': '/etc/pgbackrest', 'mode': '0700'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'path': '/etc/pgbackrest', 'mode': '0700'})\u001b[0m\r\n"]
[1.117, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'path': '/etc/pgbouncer', 'mode': '0700'})\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'path': '/etc/pgbouncer', 'mode': '0700'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'path': '/etc/pgbouncer', 'mode': '0700'})\u001b[0m\r\n"]
[1.115, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'path': '/etc/pg_exporter', 'mode': '0700'})\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'path': '/etc/pg_exporter', 'mode': '0700'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'path': '/etc/pg_exporter', 'mode': '0700'})\u001b[0m\r\n"]
[0.003, "o", "\r\nTASK [pgsql : link pgsql directories] **********************************************************************************\r\n"]
[1.129, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'src': '/data/backups/pg-test-18/backup', 'dest': '/data/postgres/pg-test-18/backup'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'src': '/data/backups/pg-test-18/backup', 'dest': '/data/postgres/pg-test-18/backup'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'src': '/data/backups/pg-test-18/backup', 'dest': '/data/postgres/pg-test-18/backup'})\u001b[0m\r\n"]
[1.117, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'src': '/data/postgres/pg-test-18', 'dest': '/pg'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'src': '/data/postgres/pg-test-18', 'dest': '/pg'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'src': '/data/postgres/pg-test-18', 'dest': '/pg'})\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : create log directories] **********************************************************************************\r\n"]
[1.130, "o", "\u001b[0;32mok: [10.10.10.12] => (item=/pg/log/postgres)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.11] => (item=/pg/log/postgres)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.13] => (item=/pg/log/postgres)\u001b[0m\r\n"]
[1.115, "o", "\u001b[0;32mok: [10.10.10.11] => (item=/pg/log/patroni)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => (item=/pg/log/patroni)\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.13] => (item=/pg/log/patroni)\u001b[0m\r\n"]
[1.115, "o", "\u001b[0;32mok: [10.10.10.12] => (item=/pg/log/pgbouncer)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13] => (item=/pg/log/pgbouncer)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.11] => (item=/pg/log/pgbouncer)\u001b[0m\r\n"]
[1.118, "o", "\u001b[0;32mok: [10.10.10.13] => (item=/pg/log/pgbackrest)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => (item=/pg/log/pgbackrest)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11] => (item=/pg/log/pgbackrest)\u001b[0m\r\n"]
[0.003, "o", "\r\nTASK [pgsql : create tmpfiles.d for /var/run/postgresql] ***************************************************************\r\n"]
[2.274, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : copy /pg/bin scripts] ************************************************************************************\r\n"]
[35.778, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : copy pgsql/psql alias] ***********************************************************************************\r\n"]
[2.291, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'pg-alias', 'dest': '/etc/profile.d/pg-alias.sh', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'src': 'pg-alias', 'dest': '/etc/profile.d/pg-alias.sh', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'src': 'pg-alias', 'dest': '/etc/profile.d/pg-alias.sh', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[2.272, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'src': 'psqlrc', 'dest': '/var/lib/pgsql/.psqlrc', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'src': 'psqlrc', 'dest': '/var/lib/pgsql/.psqlrc', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'src': 'psqlrc', 'dest': '/var/lib/pgsql/.psqlrc', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : create pgsql dummy file] *********************************************************************************\r\n"]
[1.135, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : create etcd user for pg cluster] *************************************************************************\r\n"]
[0.021, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.947, "o", "\u001b[0;33mchanged: [10.10.10.11 -> 10.10.10.10]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : get pgsql fs size] ***************************************************************************************\r\n"]
[1.136, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : print postgres node spec] ********************************************************************************\r\n"]
[0.019, "o", "\u001b[0;32mok: [10.10.10.12] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"Node=4c8g oltp, Memory=1900MB of 7942MB , Disk=128GB SSD @ /data/postgres, PG Conf=oltp.yml\"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n\u001b[0;32mok: [10.10.10.11] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"Node=4c8g oltp, Memory=1900MB of 7942MB , Disk=128GB SSD @ /data/postgres, PG Conf=oltp.yml\"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.13] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"Node=4c8g oltp, Memory=1900MB of 7942MB , Disk=128GB SSD @ /data/postgres, PG Conf=oltp.yml\"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : config patroni] ******************************************************************************************\r\n"]
[2.336, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'src': 'oltp.yml', 'dest': '/pg/conf/pg-test-2.yml', 'owner': 'postgres', 'group': 'postgres', 'mode': '0640'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'oltp.yml', 'dest': '/pg/conf/pg-test-1.yml', 'owner': 'postgres', 'group': 'postgres', 'mode': '0640'})\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'src': 'oltp.yml', 'dest': '/pg/conf/pg-test-3.yml', 'owner': 'postgres', 'group': 'postgres', 'mode': '0640'})\u001b[0m\r\n"]
[2.283, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'src': 'patroni.svc', 'dest': '/lib/systemd/system/patroni.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'src': 'patroni.svc', 'dest': '/lib/systemd/system/patroni.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'patroni.svc', 'dest': '/lib/systemd/system/patroni.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[2.270, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'src': 'postgres.svc', 'dest': '/lib/systemd/system/postgres.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'src': 'postgres.svc', 'dest': '/lib/systemd/system/postgres.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'src': 'postgres.svc', 'dest': '/lib/systemd/system/postgres.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : config pgbackrest for patroni] ***************************************************************************\r\n"]
[2.290, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : link patroni config] *************************************************************************************\r\n"]
[1.133, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : create pgsodium.key] *************************************************************************************\r\n"]
[2.284, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : create pgsodium.getkey_script] ***************************************************************************\r\n"]
[2.285, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.008, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : generate pg private key] *********************************************************************************\r\n"]
[0.829, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : generate pg server signing request] **********************************************************************\r\n"]
[0.392, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : issue pg server certificate] *****************************************************************************\r\n"]
[0.437, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.005, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : copy pg server certificates] *****************************************************************************\r\n"]
[2.295, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'src': 'files/pki/ca/ca.crt', 'dest': '/pg/cert/ca.crt', 'owner': 'postgres', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'src': 'files/pki/ca/ca.crt', 'dest': '/pg/cert/ca.crt', 'owner': 'postgres', 'mode': '0644'})\u001b[0m\r\n"]
[0.006, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'src': 'files/pki/ca/ca.crt', 'dest': '/pg/cert/ca.crt', 'owner': 'postgres', 'mode': '0644'})\u001b[0m\r\n"]
[2.260, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'src': 'files/pki/pgsql/pg-test-1.crt', 'dest': '/pg/cert/server.crt', 'owner': 'postgres', 'group': 'postgres', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'src': 'files/pki/pgsql/pg-test-2.crt', 'dest': '/pg/cert/server.crt', 'owner': 'postgres', 'group': 'postgres', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'src': 'files/pki/pgsql/pg-test-3.crt', 'dest': '/pg/cert/server.crt', 'owner': 'postgres', 'group': 'postgres', 'mode': '0644'})\u001b[0m\r\n"]
[2.266, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'src': 'files/pki/pgsql/pg-test.key', 'dest': '/pg/cert/server.key', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'src': 'files/pki/pgsql/pg-test.key', 'dest': '/pg/cert/server.key', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'src': 'files/pki/pgsql/pg-test.key', 'dest': '/pg/cert/server.key', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.003, "o", "\r\nTASK [pgsql : grant postgres dbsu watchdog owner] **********************************************************************\r\n"]
[1.132, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : launch patroni primary] **********************************************************************************\r\n"]
[0.016, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[2.912, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : wait for patroni primary] ********************************************************************************\r\n"]
[0.016, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[5.178, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : check postgres primary ready] ****************************************************************************\r\n"]
[0.016, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[1.122, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : remove postgres backup conf] *****************************************************************************\r\n"]
[0.018, "o", "\u001b[0;36mskipping: [10.10.10.12] => (item=/pg/data/postgresql.conf.backup) \u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.12] => (item=/pg/data/postgresql.base.conf.backup) \u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.13] => (item=/pg/data/postgresql.conf.backup) \u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13] => (item=/pg/data/postgresql.base.conf.backup) \u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.12] => (item=/pg/data/pg_hba.conf.backup) \u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.13] => (item=/pg/data/pg_hba.conf.backup) \u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.12] => (item=/pg/data/pg_ident.conf.backup) \u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.13] => (item=/pg/data/pg_ident.conf.backup) \u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[1.115, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item=/pg/data/postgresql.conf.backup)\u001b[0m\r\n"]
[1.121, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item=/pg/data/postgresql.base.conf.backup)\u001b[0m\r\n"]
[1.112, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item=/pg/data/pg_hba.conf.backup)\u001b[0m\r\n"]
[1.125, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item=/pg/data/pg_ident.conf.backup)\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : render postgres hba rules] *******************************************************************************\r\n"]
[0.018, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[2.298, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : copy extra files to postgres primary] ********************************************************************\r\n"]
[0.006, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\r\nTASK [pgsql : overwrite postgres primary parameters] *******************************************************************\r\n"]
[0.015, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[2.276, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\r\nTASK [pgsql : restart postgres via patroni] ****************************************************************************\r\n"]
[0.015, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[7.494, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : wait for postgres primary] *******************************************************************************\r\n"]
[0.015, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[1.115, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : check postgres primary ready] ****************************************************************************\r\n"]
[0.017, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[1.121, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : render init sql and scripts] *****************************************************************************\r\n"]
[0.017, "o", "\u001b[0;36mskipping: [10.10.10.12] => (item={'src': 'pg-init-roles.sql', 'dest': '/pg/tmp/pg-init-roles.sql', 'mode': '0640'}) \u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.13] => (item={'src': 'pg-init-roles.sql', 'dest': '/pg/tmp/pg-init-roles.sql', 'mode': '0640'}) \u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.12] => (item={'src': 'pg-init-template.sql', 'dest': '/pg/tmp/pg-init-template.sql', 'mode': '0640'}) \u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.13] => (item={'src': 'pg-init-template.sql', 'dest': '/pg/tmp/pg-init-template.sql', 'mode': '0640'}) \u001b[0m\r\n"]
[0.028, "o", "\u001b[0;36mskipping: [10.10.10.13] => (item={'src': 'pg-init', 'dest': '/pg/bin/pg-init', 'owner': 'root', 'mode': '0740'}) \u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.12] => (item={'src': 'pg-init', 'dest': '/pg/bin/pg-init', 'owner': 'root', 'mode': '0740'}) \u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[2.301, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'pg-init-roles.sql', 'dest': '/pg/tmp/pg-init-roles.sql', 'mode': '0640'})\u001b[0m\r\n"]
[2.287, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'pg-init-template.sql', 'dest': '/pg/tmp/pg-init-template.sql', 'mode': '0640'})\u001b[0m\r\n"]
[2.275, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'pg-init', 'dest': '/pg/bin/pg-init', 'owner': 'root', 'mode': '0740'})\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : init postgres cluster] ***********************************************************************************\r\n"]
[0.044, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[1.537, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : check postgres primary inited] ***************************************************************************\r\n"]
[0.043, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.007, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[1.113, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : add dbsu password to pgpass if exists] *******************************************************************\r\n"]
[0.046, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : add system user to pgpass] *******************************************************************************\r\n"]
[1.171, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item=None)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item=None)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item=None)\u001b[0m\r\n"]
[1.124, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item=None)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item=None)\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item=None)\u001b[0m\r\n"]
[1.126, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item=None)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.006, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item=None)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item=None)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : check replication connectivity] **************************************************************************\r\n"]
[0.043, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[1.135, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : launch patroni replica] **********************************************************************************\r\n"]
[0.038, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[1.823, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.032, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : wait for patroni replica] ********************************************************************************\r\n"]
[0.015, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[5.127, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : wait for postgres replica] *******************************************************************************\r\n"]
[0.015, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[1.119, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : check postgres replica ready] ****************************************************************************\r\n"]
[0.016, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[1.124, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : copy extra files to pgdata] ******************************************************************************\r\n"]
[0.007, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : render postgres hba rules] *******************************************************************************\r\n"]
[2.332, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : overwrite postgres parameters] ***************************************************************************\r\n"]
[2.279, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : reload postgres config] **********************************************************************************\r\n"]
[1.135, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.010, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : reload patroni config] ***********************************************************************************\r\n"]
[1.398, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.007, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : pause patroni] *******************************************************************************************\r\n"]
[0.014, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : stop patroni replicas] ***********************************************************************************\r\n"]
[0.015, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : stop patroni primary] ************************************************************************************\r\n"]
[0.014, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : launch raw postgres primary] *****************************************************************************\r\n"]
[0.014, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.005, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : launch raw postgres replicas] ****************************************************************************\r\n"]
[0.013, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : wait for raw postgres] ***********************************************************************************\r\n"]
[0.014, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : include_tasks] *******************************************************************************************\r\n"]
[0.025, "o", "\u001b[0;36mincluded: /data/pgsty/pigsty/roles/pgsql/tasks/user.yml for 10.10.10.11, 10.10.10.12, 10.10.10.13 => (item={'name': 'test', 'password': 'test', 'pgbouncer': True, 'roles': ['dbrole_admin']})\u001b[0m\r\n"]
[0.027, "o", "\r\nTASK [pgsql : validate user name test] *********************************************************************************\r\n"]
[0.010, "o", "\u001b[0;32mok: [10.10.10.11] => {\u001b[0m\r\n\u001b[0;32m    \"changed\": false,\u001b[0m\r\n\u001b[0;32m    \"msg\": \"All assertions passed\"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.12] => {\u001b[0m\r\n\u001b[0;32m    \"changed\": false,\u001b[0m\r\n\u001b[0;32m    \"msg\": \"All assertions passed\"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.13] => {\u001b[0m\r\n\u001b[0;32m    \"changed\": false,\u001b[0m\r\n\u001b[0;32m    \"msg\": \"All assertions passed\"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : drop user test] ******************************************************************************************\r\n"]
[0.015, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : prepare sql for user test] *******************************************************************************\r\n"]
[0.010, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[2.301, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.003, "o", "\r\nTASK [pgsql : create postgres user test] *******************************************************************************\r\n"]
[0.017, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[1.134, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : write plain biz user password to pgpass for citus cluster] ***********************************************\r\n"]
[0.016, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : include_tasks] *******************************************************************************************\r\n"]
[0.025, "o", "\u001b[0;36mincluded: /data/pgsty/pigsty/roles/pgsql/tasks/database.yml for 10.10.10.11, 10.10.10.12, 10.10.10.13 => (item={'name': 'test'})\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mincluded: /data/pgsty/pigsty/roles/pgsql/tasks/database.yml for 10.10.10.11, 10.10.10.12, 10.10.10.13 => (item={'name': 'test2'})\u001b[0m\r\n"]
[0.028, "o", "\r\nTASK [pgsql : drop database test] **************************************************************************************\r\n"]
[0.016, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : render sql for database test] ****************************************************************************\r\n"]
[0.011, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[2.306, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.003, "o", "\r\nTASK [pgsql : copy baseline for database test] *************************************************************************\r\n"]
[0.010, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : create database test] ************************************************************************************\r\n"]
[0.017, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[1.187, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : provision database test] *********************************************************************************\r\n"]
[0.018, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[1.126, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : load database test baseline] *****************************************************************************\r\n"]
[0.018, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : drop database test2] *************************************************************************************\r\n"]
[0.018, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : render sql for database test2] ***************************************************************************\r\n"]
[0.009, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[2.306, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : copy baseline for database test2] ************************************************************************\r\n"]
[0.010, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : create database test2] ***********************************************************************************\r\n"]
[0.017, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[1.174, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : provision database test2] ********************************************************************************\r\n"]
[0.021, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[1.128, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.003, "o", "\r\nTASK [pgsql : load database test2 baseline] ****************************************************************************\r\n"]
[0.018, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : create pgbackrest dir] ***********************************************************************************\r\n"]
[1.134, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : config pgbackrest] ***************************************************************************************\r\n"]
[2.313, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : create pgbackrest repo stanza] ***************************************************************************\r\n"]
[0.017, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[1.146, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : create pgbackrest initial backup] ************************************************************************\r\n"]
[0.018, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[2.806, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : create pgbouncer dir] ************************************************************************************\r\n"]
[1.136, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item=/etc/pgbouncer)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item=/etc/pgbouncer)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item=/etc/pgbouncer)\u001b[0m\r\n"]
[1.118, "o", "\u001b[0;32mok: [10.10.10.11] => (item=/pg/log/pgbouncer)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => (item=/pg/log/pgbouncer)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13] => (item=/pg/log/pgbouncer)\u001b[0m\r\n"]
[0.003, "o", "\r\nTASK [pgsql : config pgbouncer] ****************************************************************************************\r\n"]
[2.309, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'pgbouncer.svc', 'dest': '/lib/systemd/system/pgbouncer.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'src': 'pgbouncer.svc', 'dest': '/lib/systemd/system/pgbouncer.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'src': 'pgbouncer.svc', 'dest': '/lib/systemd/system/pgbouncer.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[2.272, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'pgbouncer.ini', 'dest': '/etc/pgbouncer/pgbouncer.ini', 'owner': 'postgres', 'group': 'postgres', 'mode': '0640'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'src': 'pgbouncer.ini', 'dest': '/etc/pgbouncer/pgbouncer.ini', 'owner': 'postgres', 'group': 'postgres', 'mode': '0640'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'src': 'pgbouncer.ini', 'dest': '/etc/pgbouncer/pgbouncer.ini', 'owner': 'postgres', 'group': 'postgres', 'mode': '0640'})\u001b[0m\r\n"]
[2.274, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'src': 'pgbouncer.database', 'dest': '/etc/pgbouncer/database.txt', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'src': 'pgbouncer.database', 'dest': '/etc/pgbouncer/database.txt', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'pgbouncer.database', 'dest': '/etc/pgbouncer/database.txt', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[2.273, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'src': 'pgbouncer.useropts', 'dest': '/etc/pgbouncer/useropts.txt', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'src': 'pgbouncer.useropts', 'dest': '/etc/pgbouncer/useropts.txt', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'pgbouncer.useropts', 'dest': '/etc/pgbouncer/useropts.txt', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : config pgbouncer hba rules] ******************************************************************************\r\n"]
[2.308, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : create pgbouncer userlist] *******************************************************************************\r\n"]
[1.196, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.009, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : launch pgbouncer systemd service] ************************************************************************\r\n"]
[1.859, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.009, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.012, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : wait for pgbouncer service online] ***********************************************************************\r\n"]
[1.138, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : reload pgbouncer] ****************************************************************************************\r\n"]
[1.387, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : check pgbouncer ready] ***********************************************************************************\r\n"]
[1.137, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : config vip-manager] **************************************************************************************\r\n"]
[2.297, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'src': 'vip-manager.yml', 'dest': '/etc/default/vip-manager.yml', 'owner': 'root', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'vip-manager.yml', 'dest': '/etc/default/vip-manager.yml', 'owner': 'root', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.007, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'src': 'vip-manager.yml', 'dest': '/etc/default/vip-manager.yml', 'owner': 'root', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[2.277, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'src': 'vip-manager.svc', 'dest': '/lib/systemd/system/vip-manager.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'vip-manager.svc', 'dest': '/lib/systemd/system/vip-manager.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'src': 'vip-manager.svc', 'dest': '/lib/systemd/system/vip-manager.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : launch vip-manager] **************************************************************************************\r\n"]
[1.548, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.011, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : render postgres instance dns] ****************************************************************************\r\n"]
[0.770, "o", "\u001b[0;33mchanged: [10.10.10.11 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.12 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.13 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : activate postgres instance dns] **************************************************************************\r\n"]
[0.166, "o", "\u001b[0;33mchanged: [10.10.10.11 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.12 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : render postgres cluster dns] *****************************************************************************\r\n"]
[0.312, "o", "\u001b[0;33mchanged: [10.10.10.11 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.12 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : activate postgres cluster dns] ***************************************************************************\r\n"]
[0.163, "o", "\u001b[0;33mchanged: [10.10.10.13 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.11 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : wipe existing postgres haproxy service from local haproxy] ***********************************************\r\n"]
[0.124, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : render haproxy service config on local haproxy] **********************************************************\r\n"]
[0.315, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'name': 'primary', 'port': 5433, 'dest': 'default', 'check': '/primary', 'selector': '[]'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'name': 'primary', 'port': 5433, 'dest': 'default', 'check': '/primary', 'selector': '[]'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'name': 'primary', 'port': 5433, 'dest': 'default', 'check': '/primary', 'selector': '[]'})\u001b[0m\r\n"]
[0.279, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'name': 'replica', 'port': 5434, 'dest': 'default', 'check': '/read-only', 'selector': '[]', 'backup': '[? pg_role == `primary` || pg_role == `offline` ]'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'name': 'replica', 'port': 5434, 'dest': 'default', 'check': '/read-only', 'selector': '[]', 'backup': '[? pg_role == `primary` || pg_role == `offline` ]'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'name': 'replica', 'port': 5434, 'dest': 'default', 'check': '/read-only', 'selector': '[]', 'backup': '[? pg_role == `primary` || pg_role == `offline` ]'})\u001b[0m\r\n"]
[0.276, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'name': 'default', 'port': 5436, 'dest': 'postgres', 'check': '/primary', 'selector': '[]'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'name': 'default', 'port': 5436, 'dest': 'postgres', 'check': '/primary', 'selector': '[]'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'name': 'default', 'port': 5436, 'dest': 'postgres', 'check': '/primary', 'selector': '[]'})\u001b[0m\r\n"]
[0.279, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'name': 'offline', 'port': 5438, 'dest': 'postgres', 'check': '/replica', 'selector': '[? pg_role == `offline` || pg_offline_query ]', 'backup': '[? pg_role == `replica` && !pg_offline_query]'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'name': 'offline', 'port': 5438, 'dest': 'postgres', 'check': '/replica', 'selector': '[? pg_role == `offline` || pg_offline_query ]', 'backup': '[? pg_role == `replica` && !pg_offline_query]'})\u001b[0m\r\n"]
[0.005, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'name': 'offline', 'port': 5438, 'dest': 'postgres', 'check': '/replica', 'selector': '[? pg_role == `offline` || pg_offline_query ]', 'backup': '[? pg_role == `replica` && !pg_offline_query]'})\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : check local haproxy config before reload] ****************************************************************\r\n"]
[0.169, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : reload local haproxy] ************************************************************************************\r\n"]
[0.486, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.016, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : wipe existing postgres service from remote haproxy] ******************************************************\r\n"]
[0.007, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : render haproxy service on remote haproxy] ****************************************************************\r\n"]
[0.007, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\r\nTASK [pgsql : check remote haproxy config before reload] ***************************************************************\r\n"]
[0.006, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : reload remote haproxy] ***********************************************************************************\r\n"]
[0.006, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : pgsql init done] *****************************************************************************************\r\n"]
[0.017, "o", "\u001b[0;32mok: [10.10.10.11] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"postgres://10.10.10.11/postgres | test test2  | test \"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"postgres://10.10.10.12/postgres | test test2  | test \"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.13] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"postgres://10.10.10.13/postgres | test test2  | test \"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pg_monitor : config pg_exporter] *********************************************************************************\r\n"]
[0.308, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'pg_exporter.yml', 'dest': '/etc/pg_exporter.yml', 'owner': 'postgres', 'group': 'postgres', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'src': 'pg_exporter.yml', 'dest': '/etc/pg_exporter.yml', 'owner': 'postgres', 'group': 'postgres', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'src': 'pg_exporter.yml', 'dest': '/etc/pg_exporter.yml', 'owner': 'postgres', 'group': 'postgres', 'mode': '0644'})\u001b[0m\r\n"]
[0.272, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'src': 'pg_exporter.env', 'dest': '/etc/default/pg_exporter', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'src': 'pg_exporter.env', 'dest': '/etc/default/pg_exporter', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.005, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'pg_exporter.env', 'dest': '/etc/default/pg_exporter', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.259, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'src': 'pg_exporter.svc', 'dest': '/lib/systemd/system/pg_exporter.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'src': 'pg_exporter.svc', 'dest': '/lib/systemd/system/pg_exporter.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'src': 'pg_exporter.svc', 'dest': '/lib/systemd/system/pg_exporter.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pg_monitor : launch pg_exporter systemd unit] ********************************************************************\r\n"]
[0.550, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.005, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.019, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pg_monitor : wait for pg_exporter online] ************************************************************************\r\n"]
[0.138, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.005, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pg_monitor : config pgbouncer_exporter] **************************************************************************\r\n"]
[0.290, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'src': 'pgbouncer_exporter.yml', 'dest': '/etc/pgbouncer_exporter.yml', 'owner': 'postgres', 'group': 'postgres', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'src': 'pgbouncer_exporter.yml', 'dest': '/etc/pgbouncer_exporter.yml', 'owner': 'postgres', 'group': 'postgres', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'pgbouncer_exporter.yml', 'dest': '/etc/pgbouncer_exporter.yml', 'owner': 'postgres', 'group': 'postgres', 'mode': '0644'})\u001b[0m\r\n"]
[0.267, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'src': 'pgbouncer_exporter.env', 'dest': '/etc/default/pgbouncer_exporter', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'src': 'pgbouncer_exporter.env', 'dest': '/etc/default/pgbouncer_exporter', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'pgbouncer_exporter.env', 'dest': '/etc/default/pgbouncer_exporter', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.265, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'src': 'pgbouncer_exporter.svc', 'dest': '/lib/systemd/system/pgbouncer_exporter.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'src': 'pgbouncer_exporter.svc', 'dest': '/lib/systemd/system/pgbouncer_exporter.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'src': 'pgbouncer_exporter.svc', 'dest': '/lib/systemd/system/pgbouncer_exporter.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pg_monitor : launch pgbouncer_exporter systemd unit] *************************************************************\r\n"]
[0.551, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.006, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pg_monitor : wait for pgbouncer_exporter online] *****************************************************************\r\n"]
[0.136, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pg_monitor : config pgbackrest_exporter] *************************************************************************\r\n"]
[0.299, "o", "\u001b[0;33mchanged: [10.10.10.12] => (item={'src': 'pgbackrest_exporter.env', 'dest': '/etc/default/pgbackrest_exporter', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11] => (item={'src': 'pgbackrest_exporter.env', 'dest': '/etc/default/pgbackrest_exporter', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.006, "o", "\u001b[0;33mchanged: [10.10.10.13] => (item={'src': 'pgbackrest_exporter.env', 'dest': '/etc/default/pgbackrest_exporter', 'owner': 'postgres', 'group': 'postgres', 'mode': '0600'})\u001b[0m\r\n"]
[0.271, "o", "\u001b[0;32mok: [10.10.10.12] => (item={'src': 'pgbackrest_exporter.svc', 'dest': '/lib/systemd/system/pgbackrest_exporter.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13] => (item={'src': 'pgbackrest_exporter.svc', 'dest': '/lib/systemd/system/pgbackrest_exporter.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.11] => (item={'src': 'pgbackrest_exporter.svc', 'dest': '/lib/systemd/system/pgbackrest_exporter.service', 'owner': 'root', 'group': 'root', 'mode': '0644'})\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pg_monitor : launch pgbackrest_exporter systemd unit] ************************************************************\r\n"]
[0.542, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.013, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.005, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pg_monitor : wait for pg_exporter online] ************************************************************************\r\n"]
[0.138, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.008, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pg_monitor : register postgres to victoria] **********************************************************************\r\n"]
[0.318, "o", "\u001b[0;33mchanged: [10.10.10.13 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.12 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pg_monitor : register ssl patroni to victoria] *******************************************************************\r\n"]
[0.016, "o", "\u001b[0;36mskipping: [10.10.10.11] => (item=10.10.10.10) \u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.12] => (item=10.10.10.10) \u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13] => (item=10.10.10.10) \u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pg_monitor : register pg vip ping target to victoria] ************************************************************\r\n"]
[0.307, "o", "\u001b[0;33mchanged: [10.10.10.12 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.11 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.13 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pg_monitor : render pgsql vector logging config] *****************************************************************\r\n"]
[0.285, "o", "\u001b[0;32mok: [10.10.10.11] => (item=postgres)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.13] => (item=postgres)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.12] => (item=postgres)\u001b[0m\r\n"]
[0.267, "o", "\u001b[0;32mok: [10.10.10.13] => (item=pgbackrest)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => (item=pgbackrest)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.11] => (item=pgbackrest)\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pg_monitor : reload vector to consume pgsql log] *****************************************************************\r\n"]
[0.394, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.006, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pg_monitor : include_tasks] **************************************************************************************\r\n"]
[0.026, "o", "\u001b[0;36mincluded: /data/pgsty/pigsty/roles/pg_monitor/tasks/register_grafana.yml for 10.10.10.12, 10.10.10.11, 10.10.10.13 => (item={'name': 'postgres'})\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mincluded: /data/pgsty/pigsty/roles/pg_monitor/tasks/register_grafana.yml for 10.10.10.12, 10.10.10.11, 10.10.10.13 => (item={'name': 'test'})\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;36mincluded: /data/pgsty/pigsty/roles/pg_monitor/tasks/register_grafana.yml for 10.10.10.12, 10.10.10.11, 10.10.10.13 => (item={'name': 'test2'})\u001b[0m\r\n"]
[0.013, "o", "\r\nTASK [pg_monitor : render grafana datasource for postgres] *************************************************************\r\n"]
[0.307, "o", "\u001b[0;32mok: [10.10.10.13 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.12 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.003, "o", "\r\nTASK [pg_monitor : load grafana datasource postgres] *******************************************************************\r\n"]
[0.189, "o", "\u001b[0;33mchanged: [10.10.10.13 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.008, "o", "\u001b[0;33mchanged: [10.10.10.12 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.017, "o", "\u001b[0;33mchanged: [10.10.10.11 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pg_monitor : render grafana datasource for test] *****************************************************************\r\n"]
[0.304, "o", "\u001b[0;32mok: [10.10.10.13 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.12 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.003, "o", "\r\nTASK [pg_monitor : load grafana datasource test] ***********************************************************************\r\n"]
[0.185, "o", "\u001b[0;33mchanged: [10.10.10.12 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.010, "o", "\u001b[0;33mchanged: [10.10.10.11 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;33mchanged: [10.10.10.13 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.003, "o", "\r\nTASK [pg_monitor : render grafana datasource for test2] ****************************************************************\r\n"]
[0.303, "o", "\u001b[0;32mok: [10.10.10.13 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.11 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.12 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pg_monitor : load grafana datasource test2] **********************************************************************\r\n"]
[0.185, "o", "\u001b[0;33mchanged: [10.10.10.11 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.006, "o", "\u001b[0;33mchanged: [10.10.10.13 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.006, "o", "\u001b[0;33mchanged: [10.10.10.12 -> 10.10.10.10] => (item=10.10.10.10)\u001b[0m\r\n"]
[0.005, "o", "\r\nPLAY RECAP *************************************************************************************************************\r\n"]
[0.000, "o", "\u001b[0;33m10.10.10.11\u001b[0m                : \u001b[0;32mok=114 \u001b[0m \u001b[0;33mchanged=68  \u001b[0m unreachable=0    failed=0    \u001b[0;36mskipped=31  \u001b[0m rescued=0    ignored=0   \r\n"]
[0.000, "o", "\u001b[0;33m10.10.10.12\u001b[0m                : \u001b[0;32mok=96  \u001b[0m \u001b[0;33mchanged=51  \u001b[0m unreachable=0    failed=0    \u001b[0;36mskipped=49  \u001b[0m rescued=0    ignored=0   \r\n"]
[0.000, "o", "\u001b[0;33m10.10.10.13\u001b[0m                : \u001b[0;32mok=96  \u001b[0m \u001b[0;33mchanged=50  \u001b[0m unreachable=0    failed=0    \u001b[0;36mskipped=49  \u001b[0m rescued=0    ignored=0   \r\n"]
[0.000, "o", "\r\n"]
[0.069, "o", "\u001b[0;35m[SUMMARY] ===========================================\u001b[0m\r\n[\u001b[0;32m OK \u001b[0m] \u001b[0;32mcreate pgsql cluster pg-test complete!\u001b[0m\r\n\u001b[0;34mconn check: psql postgres://pg-test/postgres\u001b[0m\r\n"]
[0.000, "o", "\u001b[?2004h\u001b]0;vonng@vonng-aimax: ~/pigsty\u0007\u001b[01;32mvonng@vonng-aimax\u001b[00m:\u001b[01;34m~/pigsty\u001b[00m$ "]
[0.792, "o", "\u001b[?2004l\r\r\n"]
[0.000, "o", "exit\r\n"]
[0.001, "x", "0"]
