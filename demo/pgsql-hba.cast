{"version":3,"term":{"cols":120,"rows":30,"type":"xterm-256color","version":"iTerm2 3.5.14","theme":{"fg":"#697a82","bg":"#fcf7e5","palette":"#163540:#cb4238:#89982d:#ae8b2c:#4689cd:#c34380:#519f98:#ede9d7:#0d2a34:#bc5329:#5c6d74:#697a82:#869496:#6d71bf:#96a1a1:#fcf7e5"}},"timestamp":1768184484,"idle_time_limit":0.5,"title":"pgsql-hba","env":{"SHELL":"/bin/bash"}}
[0.014, "o", "\u001b[?2004h\u001b]0;vonng@vonng-aimax: ~/pigsty\u0007\u001b[01;32mvonng@vonng-aimax\u001b[00m:\u001b[01;34m~/pigsty\u001b[00m$ "]
[0.274, "o", "b"]
[0.102, "o", "i"]
[0.074, "o", "n"]
[0.090, "o", "/"]
[0.150, "o", "pg"]
[0.147, "o", "s"]
[0.148, "o", "q"]
[0.023, "o", "l"]
[0.168, "o", "-"]
[0.161, "o", "h"]
[0.114, "o", "b"]
[0.023, "o", "a"]
[0.821, "o", " "]
[0.153, "o", "p"]
[0.145, "o", "-"]
[0.021, "o", "g"]
[0.393, "o", "\b\u001b[K"]
[0.153, "o", "\b\u001b[K"]
[0.070, "o", "g"]
[0.127, "o", "-"]
[0.096, "o", "t"]
[0.074, "o", "e"]
[0.046, "o", "s"]
[0.075, "o", "t"]
[0.070, "o", "\r\n\u001b[?2004l\r"]
[0.004, "o", "\u001b[0;35m[EXECUTE] ===========================================\u001b[0m\r\n[\u001b[0;33mWARN\u001b[0m] \u001b[0;33mreload hba rules for 'pg-test'\u001b[0m\r\n\u001b[0;34m$ ./pgsql.yml -l 'pg-test' -t pg_hba,pg_reload,pgbouncer_hba,pgbouncer_reload\u001b[0m\r\n"]
[0.268, "o", "\r\nPLAY [PGSQL] ***********************************************************************************************************\r\n"]
[0.019, "o", "\r\nTASK [node_id : get node fact] *****************************************************************************************\r\n"]
[0.198, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.005, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [node_id : set node fact] *****************************************************************************************\r\n"]
[0.020, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [node_id : fill empty nodename with hostname] *********************************************************************\r\n"]
[0.016, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [node_id : build node identity] ***********************************************************************************\r\n"]
[0.022, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [node_id : load roles/node_id/vars/u24.x86_64.yml] ****************************************************************\r\n"]
[0.016, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.003, "o", "\r\nTASK [node_id : fallback to u24.x86_64.yml if u24.x86_64.yml not exists] ***********************************************\r\n"]
[0.007, "o", "\u001b[0;36mskipping: [10.10.10.11]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;36mskipping: [10.10.10.12]\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;36mskipping: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [node_id : print node identity] ***********************************************************************************\r\n"]
[0.020, "o", "\u001b[0;32mok: [10.10.10.11] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"nodename: pg-test-1, node_cluster: pg-test, spec: c4m8, os: ubuntu.24.x86_64 u24:deb,   [PGSQL: pg-test] [REDIS: redis-meta]    \"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.12] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"nodename: pg-test-2, node_cluster: pg-test, spec: c4m8, os: ubuntu.24.x86_64 u24:deb,   [PGSQL: pg-test] [REDIS: redis-test]    \"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;32mok: [10.10.10.13] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"nodename: pg-test-3, node_cluster: pg-test, spec: c4m8, os: ubuntu.24.x86_64 u24:deb,   [PGSQL: pg-test] [REDIS: redis-test]    \"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pg_id : get pgsql identity] **************************************************************************************\r\n"]
[0.124, "o", "\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.005, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.004, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pg_id : build pgsql identity] ************************************************************************************\r\n"]
[0.108, "o", "\u001b[0;32mok: [10.10.10.13]\u001b[0m\r\n\u001b[0;32mok: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;32mok: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pg_id : print pgsql identity] ************************************************************************************\r\n"]
[0.080, "o", "\u001b[0;32mok: [10.10.10.13] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"  [replica] pg-test-3 @ 10.10.10.13 , ins = pg-test-3 , cls = pg-test , REPLICATE PRIMARY pg-test-1 @ 10.10.10.11 -> pg-test-3  [OFFLINE]  , postgres://10.10.10.13:5432/postgres\"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;32mok: [10.10.10.12] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"  [replica] pg-test-2 @ 10.10.10.12 , ins = pg-test-2 , cls = pg-test , REPLICATE PRIMARY pg-test-1 @ 10.10.10.11 -> pg-test-2   , postgres://10.10.10.12:5432/postgres\"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.003, "o", "\u001b[0;32mok: [10.10.10.11] => {\u001b[0m\r\n\u001b[0;32m    \"msg\": \"  [primary] pg-test-1 @ 10.10.10.11 , ins = pg-test-1 , cls = pg-test ,  CLUSTER LEADER @ pg-test-1    , postgres://10.10.10.11:5432/postgres\"\u001b[0m\r\n\u001b[0;32m}\u001b[0m\r\n"]
[0.002, "o", "\r\nTASK [pgsql : render postgres hba rules] *******************************************************************************\r\n"]
[0.407, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : reload postgres config] **********************************************************************************\r\n"]
[0.138, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : config pgbouncer hba rules] ******************************************************************************\r\n"]
[0.314, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : reload pgbouncer] ****************************************************************************************\r\n"]
[0.484, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.010, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.002, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.001, "o", "\r\nTASK [pgsql : check pgbouncer ready] ***********************************************************************************\r\n"]
[0.136, "o", "\u001b[0;33mchanged: [10.10.10.11]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.13]\u001b[0m\r\n"]
[0.000, "o", "\u001b[0;33mchanged: [10.10.10.12]\u001b[0m\r\n"]
[0.006, "o", "\r\nPLAY RECAP *************************************************************************************************************\r\n"]
[0.000, "o", "\u001b[0;33m10.10.10.11\u001b[0m                : \u001b[0;32mok=13  \u001b[0m \u001b[0;33mchanged=6   \u001b[0m unreachable=0    failed=0    \u001b[0;36mskipped=2   \u001b[0m rescued=0    ignored=0   \r\n"]
[0.000, "o", "\u001b[0;33m10.10.10.12\u001b[0m                : \u001b[0;32mok=13  \u001b[0m \u001b[0;33mchanged=6   \u001b[0m unreachable=0    failed=0    \u001b[0;36mskipped=2   \u001b[0m rescued=0    ignored=0   \r\n"]
[0.000, "o", "\u001b[0;33m10.10.10.13\u001b[0m                : \u001b[0;32mok=13  \u001b[0m \u001b[0;33mchanged=6   \u001b[0m unreachable=0    failed=0    \u001b[0;36mskipped=2   \u001b[0m rescued=0    ignored=0   \r\n\r\n"]
[0.060, "o", "\u001b[0;35m[SUMMARY] ===========================================\u001b[0m\r\n[\u001b[0;32m OK \u001b[0m] \u001b[0;32mreload hba rules for 'pg-test' complete\u001b[0m\r\n"]
[0.001, "o", "\u001b[?2004h\u001b]0;vonng@vonng-aimax: ~/pigsty\u0007\u001b[01;32mvonng@vonng-aimax\u001b[00m:\u001b[01;34m~/pigsty\u001b[00m$ "]
[1.595, "o", "\u001b[?2004l\r\r\nexit\r\n"]
[0.001, "x", "0"]
