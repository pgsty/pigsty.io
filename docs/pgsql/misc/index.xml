<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Misc on PIGSTY</title><link>https://pigsty.io/docs/pgsql/misc/</link><description>Recent content in Misc on PIGSTY</description><generator>Hugo</generator><language>en</language><atom:link href="https://pigsty.io/docs/pgsql/misc/index.xml" rel="self" type="application/rss+xml"/><item><title>Service / Access</title><link>https://pigsty.io/docs/pgsql/misc/svc/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.io/docs/pgsql/misc/svc/</guid><description>&lt;blockquote&gt;
&lt;p&gt;Separate read and write operations, route traffic correctly, and deliver PostgreSQL cluster capabilities reliably.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="#service-overview"&gt;Service&lt;/a&gt; is an abstraction: it is the form in which database clusters provide capabilities to the outside world and encapsulates the details of the underlying cluster.&lt;/p&gt;
&lt;p&gt;Services are critical for &lt;a href="#accessing-services"&gt;stable access&lt;/a&gt; in production environments and show their value when &lt;a href="https://pigsty.io/docs/concept/ha"&gt;high availability&lt;/a&gt; clusters automatically fail over. &lt;a href="#single-node-users"&gt;Single-node users&lt;/a&gt; typically don&amp;rsquo;t need to worry about this concept.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="single-node-users"&gt;Single-Node Users&lt;/h2&gt;
&lt;p&gt;The concept of &amp;ldquo;service&amp;rdquo; is for production environments. Personal users/single-node clusters can simply access the database directly using instance name/IP address.&lt;/p&gt;</description></item><item><title>User / Role</title><link>https://pigsty.io/docs/pgsql/misc/user/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.io/docs/pgsql/misc/user/</guid><description>&lt;blockquote&gt;
&lt;p&gt;In this context, users refer to logical objects within a database cluster created using the SQL commands &lt;code&gt;CREATE USER/ROLE&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In PostgreSQL, users belong directly to the database cluster rather than to a specific database. Therefore, when creating business databases and business users, you should follow the principle of &amp;ldquo;users first, then databases.&amp;rdquo;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="defining-users"&gt;Defining Users&lt;/h2&gt;
&lt;p&gt;Pigsty defines roles and users in database clusters through two configuration parameters:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://pigsty.io/docs/pgsql/param#pg_default_roles"&gt;&lt;code&gt;pg_default_roles&lt;/code&gt;&lt;/a&gt;: Defines globally unified roles and users&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pigsty.io/docs/pgsql/param#pg_users"&gt;&lt;code&gt;pg_users&lt;/code&gt;&lt;/a&gt;: Defines business users and roles at the database cluster level&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The former defines roles and users shared across the entire environment, while the latter defines business roles and users specific to individual clusters. Both have the same format and are arrays of user definition objects.&lt;/p&gt;</description></item><item><title>Database</title><link>https://pigsty.io/docs/pgsql/misc/db/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.io/docs/pgsql/misc/db/</guid><description>&lt;blockquote&gt;
&lt;p&gt;In this context, Database refers to the logical object created using the SQL command &lt;code&gt;CREATE DATABASE&lt;/code&gt; within a database cluster.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A PostgreSQL server can serve multiple &lt;strong&gt;databases&lt;/strong&gt; simultaneously. In Pigsty, you can &lt;a href="#define-database"&gt;define&lt;/a&gt; the required databases in the cluster configuration.&lt;/p&gt;
&lt;p&gt;Pigsty will modify and customize the default template database &lt;code&gt;template1&lt;/code&gt;, creating default schemas, installing default extensions, and configuring default privileges. Newly created databases will inherit these settings from &lt;code&gt;template1&lt;/code&gt; by default.&lt;/p&gt;</description></item><item><title>Authentication / HBA</title><link>https://pigsty.io/docs/pgsql/misc/hba/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.io/docs/pgsql/misc/hba/</guid><description>&lt;blockquote&gt;
&lt;p&gt;Detailed explanation of Host-Based Authentication (HBA) in Pigsty.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Authentication is the foundation of &lt;a href="https://pigsty.io/docs/concept/sec/ac/"&gt;Access Control&lt;/a&gt; and the &lt;a href="https://pigsty.io/docs/concept/sec/ac/#privilege-system"&gt;Privilege System&lt;/a&gt;. PostgreSQL has multiple &lt;a href="https://www.postgresql.org/docs/current/client-authentication.html"&gt;authentication&lt;/a&gt; methods.&lt;/p&gt;
&lt;p&gt;Here we mainly introduce HBA: Host Based Authentication. HBA rules define which users can access which databases from which locations and in which ways.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="client-authentication"&gt;Client Authentication&lt;/h2&gt;
&lt;p&gt;To connect to a PostgreSQL database, users must first be authenticated (password is used by default).&lt;/p&gt;
&lt;p&gt;You can provide the password in the connection string (not secure), or pass it using the &lt;code&gt;PGPASSWORD&lt;/code&gt; environment variable or &lt;code&gt;.pgpass&lt;/code&gt; file. Refer to the &lt;a href="https://www.postgresql.org/docs/current/app-psql.html#usage"&gt;&lt;code&gt;psql&lt;/code&gt;&lt;/a&gt; documentation and &lt;a href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING"&gt;PostgreSQL Connection Strings&lt;/a&gt; for more details.&lt;/p&gt;</description></item><item><title>Access Control</title><link>https://pigsty.io/docs/pgsql/misc/acl/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://pigsty.io/docs/pgsql/misc/acl/</guid><description>&lt;blockquote&gt;
&lt;p&gt;Pigsty provides a battery-included access control model based on a &lt;a href="#role-system"&gt;role system&lt;/a&gt; and &lt;a href="#privilege-system"&gt;privilege system&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Access control is important, but many users don&amp;rsquo;t do it well. Therefore, Pigsty provides a simplified, ready-to-use access control model to provide a security baseline for your cluster.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="role-system"&gt;Role System&lt;/h2&gt;
&lt;p&gt;Pigsty&amp;rsquo;s default role system includes four &lt;a href="#default-roles"&gt;default roles&lt;/a&gt; and four &lt;a href="#default-users"&gt;default users&lt;/a&gt;:&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;Role Name&lt;/th&gt;
 &lt;th&gt;Attributes&lt;/th&gt;
 &lt;th&gt;Member of&lt;/th&gt;
 &lt;th&gt;Description&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbrole_readonly&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;NOLOGIN&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;role for global read-only access&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbrole_readwrite&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;NOLOGIN&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;dbrole_readonly&lt;/td&gt;
 &lt;td&gt;role for global read-write access&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbrole_admin&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;NOLOGIN&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;pg_monitor,dbrole_readwrite&lt;/td&gt;
 &lt;td&gt;role for object creation&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbrole_offline&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;NOLOGIN&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;role for restricted read-only access&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;postgres&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;SUPERUSER&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;system superuser&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;replicator&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;REPLICATION&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;pg_monitor,dbrole_readonly&lt;/td&gt;
 &lt;td&gt;system replicator&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbuser_dba&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;code&gt;SUPERUSER&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;dbrole_admin&lt;/td&gt;
 &lt;td&gt;pgsql admin user&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;code&gt;dbuser_monitor&lt;/code&gt;&lt;/td&gt;
 &lt;td&gt;&lt;/td&gt;
 &lt;td&gt;pg_monitor&lt;/td&gt;
 &lt;td&gt;pgsql monitor user&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;The detailed definitions of these &lt;a href="https://pigsty.io/docs/pgsql/config/user#defining-users"&gt;roles and users&lt;/a&gt; are as follows:&lt;/p&gt;</description></item></channel></rss>