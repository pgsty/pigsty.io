<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js data-theme-init><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=color-scheme content="light dark"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#000000"><style>html{background:Canvas;color:CanvasText}@media(prefers-color-scheme:dark){html{background:#0b0d12;color:#e6e6e6}}html[data-theme-init] *{transition:none!important}</style><script>(function(){const t="td-color-theme",n=localStorage.getItem(t);let e=n||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");e==="auto"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-bs-theme",e)})()</script><link rel=alternate type=application/rss+xml href=https://pigsty.io/docs/pgsql/param/index.xml><link rel=alternate type=text/html href=https://pigsty.io/_print/docs/pgsql/param/><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Parameters | PIGSTY</title><meta name=description content="Customize PostgreSQL clusters with 120 parameters in the PGSQL module"><meta property="og:url" content="https://pigsty.io/docs/pgsql/param/"><meta property="og:site_name" content="PIGSTY"><meta property="og:title" content="Parameters"><meta property="og:description" content="Customize PostgreSQL clusters with 120 parameters in the PGSQL module"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Parameters"><meta itemprop=description content="Customize PostgreSQL clusters with 120 parameters in the PGSQL module"><meta itemprop=dateModified content="2026-01-15T00:33:11+08:00"><meta itemprop=wordCount content="14562"><meta itemprop=keywords content="Reference"><meta name=twitter:card content="summary"><meta name=twitter:title content="Parameters"><meta name=twitter:description content="Customize PostgreSQL clusters with 120 parameters in the PGSQL module"><link rel=preload href=/scss/main.min.f6da858eb22dc48110abb983f095554930a5a614c30190b4e32ee7b08a496331.css as=style integrity="sha256-9tqFjrItxIEQq7mD8JVVSTClphTDAZC04y7nsIpJYzE=" crossorigin=anonymous><link href=/scss/main.min.f6da858eb22dc48110abb983f095554930a5a614c30190b4e32ee7b08a496331.css rel=stylesheet integrity="sha256-9tqFjrItxIEQq7mD8JVVSTClphTDAZC04y7nsIpJYzE=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-LG1V9WTKGE"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LG1V9WTKGE")}</script></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="td-navbar-container container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg viewBox="0 0 24 24" width="24" height="24"><defs/><g id="32" fill="none" stroke-dasharray="none" fill-opacity="1" stroke-opacity="1" stroke="none"><title>32</title><g id="32_图层_2"><title>图层 2</title><g id="Group_17"><g id="Graphic_16"/><g id="Graphic_15"><path d="M7.666187 11.971335l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" fill="#bbb" fill-opacity=".9526367"/><path d="M7.666187 11.971335l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_14"><path d="M7.666187 19.474806l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" fill="#de372c" fill-opacity=".8545852"/><path d="M7.666187 19.474806l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_13"><path d="M14.161476 15.751202l2.165064-3.75h4.33013l2.165064 3.75-2.165064 3.75H16.32654z" fill="#424242" fill-opacity=".9016462"/><path d="M14.161476 15.751202l2.165064-3.75h4.33013l2.165064 3.75-2.165064 3.75H16.32654z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_12"><path d="M14.161476 8.226008 16.32654 4.4760076h4.33013L22.821734 8.226008l-2.165064 3.75H16.32654z" fill="#ffa269" fill-opacity=".8975772"/><path d="M14.161476 8.226008 16.32654 4.4760076h4.33013L22.821734 8.226008l-2.165064 3.75H16.32654z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_11"><path d="M7.666187 4.5 9.831251.75H14.16138L16.326445 4.5 14.16138 8.25H9.831251z" fill="#419edb" fill-opacity=".8979957"/><path d="M7.666187 4.5 9.831251.75H14.16138L16.326445 4.5 14.16138 8.25H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_10"><path d="M1.1491742 8.226008 3.3142388 4.4760076H7.644368L9.809432 8.226008l-2.165064 3.75H3.3142388z" fill="#2f6793" fill-opacity=".9002511"/><path d="M1.1491742 8.226008 3.3142388 4.4760076H7.644368L9.809432 8.226008l-2.165064 3.75H3.3142388z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_9"><path d="M1.182071 15.741036l2.1650645-3.75h4.330129l2.1650645 3.75-2.1650645 3.75H3.3471355z" fill="#53ac79" fill-opacity=".9"/><path d="M1.182071 15.741036l2.1650645-3.75h4.330129l2.1650645 3.75-2.1650645 3.75H3.3471355z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g></g></g></g></svg></span><span class=navbar-brand__name>PIGSTY</span></a><div class="td-navbar-nav-scroll td-navbar-nav-scroll--indicator" id=main_navbar><div class="scroll-indicator scroll-left"></div><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/docs/><i class='fa-solid fa-book'></i><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=/blog/><i class="fas fa-blog"></i><span>Blog</span></a></li><li class="nav-item dropdown d-none d-lg-block td-navbar__version-menu"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>Ver</a><ul class=dropdown-menu><li><a class=dropdown-item href=https://pigsty.cc>Pigsty 中文网站</a></li><li><a class=dropdown-item href=https://doc.pgsty.com>Pigsty v3.7 Doc</a></li><li><a class=dropdown-item href=https://v34.pigsty.cc>Pigsty v3.4 Doc</a></li><li><a class=dropdown-item href=https://v27.pigsty.cc>Pigsty v2.7 Doc</a></li><li><a class=dropdown-item href=https://v15.pigsty.cc/docs>Pigsty v1.5 Doc</a></li></ul></div></li><li class="nav-item td-navbar__light-dark-menu"><div class="td-light-dark-menu dropdown"><svg class="d-none"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5.0 010 .708l-7 7a.5.5.0 01-.708.0l-3.5-3.5a.5.5.0 11.708-.708L6.5 10.293l6.646-6.647a.5.5.0 01.708.0z"/></symbol><symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></symbol><symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></symbol><symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></symbol></svg>
<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id=bd-theme type=button aria-expanded=false data-bs-toggle=dropdown aria-label="Toggle theme (auto)">
<svg class="bi my-1 theme-icon-active"><use href="#circle-half"/></svg></button><ul class=dropdown-menu aria-labelledby=bd-theme><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#sun-fill"/></svg>
Light
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"/></svg>
Dark
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center active" data-bs-theme-value=auto aria-pressed=true>
<svg class="bi me-2 opacity-50"><use href="#circle-half"/></svg>
Auto
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li></ul></div></li><li class=nav-item><a class=nav-link href=# onclick="return switchLang(),!1" title="Switch Language / 切换语言"><i class="fas fa-language"></i></a></li></ul><div class="scroll-indicator scroll-right"></div></div><div class="d-none d-lg-block td-navbar__search"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.d757e151050fd40088751a74721d74f6.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav><script>function switchLang(){var t=window.location.host,e=window.location.pathname+window.location.search+window.location.hash;t.indexOf("pigsty.io")!==-1?window.location.href="https://pigsty.cc"+e:t.indexOf("pigsty.cc")!==-1?window.location.href="https://pigsty.io"+e:window.location.href="https://pigsty.cc"+e}</script></header><div class="container-fluid td-outer"><div class=td-main data-bs-spy=scroll data-bs-target=.td-toc data-bs-root-margin="0px 0px -10%"><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.d757e151050fd40088751a74721d74f6.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse foldable-nav" id=td-section-nav data-sidebar-root-id=/docs/pgsql/><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docspgsql-li><a href=/docs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docspgsql><i class="fas fa-database fa-bounce"></i><span class=td-sidebar-root-up-icon>Module: PGSQL</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child sidebar-divider" id=m-docspgsql_div_concept-li><input type=checkbox id=m-docspgsql_div_concept-check>
<label for=m-docspgsql_div_concept-check><span class="align-left ps-0 td-sidebar-link td-sidebar-link__divider" id=m-docspgsql_div_concept><span>Core Concepts</span></span></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docspgsqlconfig-li><input type=checkbox id=m-docspgsqlconfig-check>
<label for=m-docspgsqlconfig-check><a href=/docs/pgsql/config/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqlconfig><i class="fa-solid fa-code"></i><span>Configuration</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlconfigcluster-li><input type=checkbox id=m-docspgsqlconfigcluster-check>
<label for=m-docspgsqlconfigcluster-check><a href=/docs/pgsql/config/cluster/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlconfigcluster><i class="fa-solid fa-code"></i><span>Cluster / Instance</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlconfigkernel-li><input type=checkbox id=m-docspgsqlconfigkernel-check>
<label for=m-docspgsqlconfigkernel-check><a href=/docs/pgsql/config/kernel/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlconfigkernel><i class="fa-solid fa-microchip"></i><span>Kernel Version</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlconfigalias-li><input type=checkbox id=m-docspgsqlconfigalias-check>
<label for=m-docspgsqlconfigalias-check><a href=/docs/pgsql/config/alias/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlconfigalias><i class="fa-solid fa-square-binary"></i><span>Package Alias</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlconfiguser-li><input type=checkbox id=m-docspgsqlconfiguser-check>
<label for=m-docspgsqlconfiguser-check><a href=/docs/pgsql/config/user/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlconfiguser><i class="fa-solid fa-users"></i><span>User/Role</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlconfigdb-li><input type=checkbox id=m-docspgsqlconfigdb-check>
<label for=m-docspgsqlconfigdb-check><a href=/docs/pgsql/config/db/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlconfigdb><i class="fa-solid fa-coins"></i><span>Database</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlconfighba-li><input type=checkbox id=m-docspgsqlconfighba-check>
<label for=m-docspgsqlconfighba-check><a href=/docs/pgsql/config/hba/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlconfighba><i class="fa-solid fa-key"></i><span>HBA Rules</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlconfigacl-li><input type=checkbox id=m-docspgsqlconfigacl-check>
<label for=m-docspgsqlconfigacl-check><a href=/docs/pgsql/config/acl/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlconfigacl><i class="fa-solid fa-lock"></i><span>Access Control</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlservice-li><input type=checkbox id=m-docspgsqlservice-check>
<label for=m-docspgsqlservice-check><a href=/docs/pgsql/service/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqlservice><i class="fa-solid fa-arrow-down-up-across-line"></i><span>Service/Access</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlsecurity-li><input type=checkbox id=m-docspgsqlsecurity-check>
<label for=m-docspgsqlsecurity-check><a href=/docs/pgsql/security/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqlsecurity><i class="fa-solid fa-lock"></i><span>Access Control</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child sidebar-divider" id=m-docspgsql_div_admin-li><input type=checkbox id=m-docspgsql_div_admin-check>
<label for=m-docspgsql_div_admin-check><span class="align-left ps-0 td-sidebar-link td-sidebar-link__divider" id=m-docspgsql_div_admin><span>Administration</span></span></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docspgsqladmin-li><input type=checkbox id=m-docspgsqladmin-check checked>
<label for=m-docspgsqladmin-check><a href=/docs/pgsql/admin/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqladmin><i class="fa-solid fa-building-columns"></i><span>Administration</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqladmincluster-li><input type=checkbox id=m-docspgsqladmincluster-check>
<label for=m-docspgsqladmincluster-check><a href=/docs/pgsql/admin/cluster/ title="Managing PostgreSQL Clusters" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqladmincluster><i class="fa-solid fa-server"></i><span>Cluster Admin</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqladminuser-li><input type=checkbox id=m-docspgsqladminuser-check>
<label for=m-docspgsqladminuser-check><a href=/docs/pgsql/admin/user/ title="Managing PostgreSQL Users" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqladminuser><i class="fa-solid fa-users"></i><span>User Admin</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqladmindb-li><input type=checkbox id=m-docspgsqladmindb-check>
<label for=m-docspgsqladmindb-check><a href=/docs/pgsql/admin/db/ title="Managing PostgreSQL Databases" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqladmindb><i class="fa-solid fa-coins"></i><span>Database Admin</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqladminpatroni-li><input type=checkbox id=m-docspgsqladminpatroni-check>
<label for=m-docspgsqladminpatroni-check><a href=/docs/pgsql/admin/patroni/ title="Patroni HA Management" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqladminpatroni><i class="fa-solid fa-infinity"></i><span>Patroni HA Admin</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqladminpgbouncer-li><input type=checkbox id=m-docspgsqladminpgbouncer-check>
<label for=m-docspgsqladminpgbouncer-check><a href=/docs/pgsql/admin/pgbouncer/ title="Pgbouncer Connection Pooling" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqladminpgbouncer><i class="fa-solid fa-filter"></i><span>Pgbouncer Admin</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqladmincomponent-li><input type=checkbox id=m-docspgsqladmincomponent-check>
<label for=m-docspgsqladmincomponent-check><a href=/docs/pgsql/admin/component/ title="Managing PostgreSQL Component Services" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqladmincomponent><i class="fa-solid fa-gears"></i><span>Component Admin</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqladmincrontab-li><input type=checkbox id=m-docspgsqladmincrontab-check>
<label for=m-docspgsqladmincrontab-check><a href=/docs/pgsql/admin/crontab/ title="Manage PostgreSQL Cron Jobs" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqladmincrontab><i class="fa-solid fa-clock-rotate-left"></i><span>Crontab Admin</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqladminext-li><input type=checkbox id=m-docspgsqladminext-check>
<label for=m-docspgsqladminext-check><a href=/docs/pgsql/admin/ext/ title="Managing PostgreSQL Extensions" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqladminext><i class="fas fa-puzzle-piece"></i><span>Extension Admin</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqladminupgrade-li><input type=checkbox id=m-docspgsqladminupgrade-check>
<label for=m-docspgsqladminupgrade-check><a href=/docs/pgsql/admin/upgrade/ title="Upgrading PostgreSQL Major/Minor Versions" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqladminupgrade><i class="fa-solid fa-plane-up"></i><span>Version Upgrade</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docspgsqlbackup-li><input type=checkbox id=m-docspgsqlbackup-check>
<label for=m-docspgsqlbackup-check><a href=/docs/pgsql/backup/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqlbackup><i class="fa-solid fa-clock-rotate-left"></i><span>Backup & Restore</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlbackuppolicy-li><input type=checkbox id=m-docspgsqlbackuppolicy-check>
<label for=m-docspgsqlbackuppolicy-check><a href=/docs/pgsql/backup/policy/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlbackuppolicy><i class="fa-solid fa-clipboard-list"></i><span>Backup Policy</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlbackupmechanism-li><input type=checkbox id=m-docspgsqlbackupmechanism-check>
<label for=m-docspgsqlbackupmechanism-check><a href=/docs/pgsql/backup/mechanism/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlbackupmechanism><i class="fa-solid fa-gears"></i><span>Backup Mechanism</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlbackuprepository-li><input type=checkbox id=m-docspgsqlbackuprepository-check>
<label for=m-docspgsqlbackuprepository-check><a href=/docs/pgsql/backup/repository/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlbackuprepository><i class="fa-solid fa-box-archive"></i><span>Backup Repository</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlbackupadmin-li><input type=checkbox id=m-docspgsqlbackupadmin-check>
<label for=m-docspgsqlbackupadmin-check><a href=/docs/pgsql/backup/admin/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlbackupadmin><i class="fa-solid fa-terminal"></i><span>Admin Commands</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlbackuprestore-li><input type=checkbox id=m-docspgsqlbackuprestore-check>
<label for=m-docspgsqlbackuprestore-check><a href=/docs/pgsql/backup/restore/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlbackuprestore><i class="fa-solid fa-rotate-left"></i><span>Restore Operations</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlbackupcluster-li><input type=checkbox id=m-docspgsqlbackupcluster-check>
<label for=m-docspgsqlbackupcluster-check><a href=/docs/pgsql/backup/cluster/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlbackupcluster><i class="fa-solid fa-rotate-left"></i><span>Clone PG Cluster</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlbackupdatabase-li><input type=checkbox id=m-docspgsqlbackupdatabase-check>
<label for=m-docspgsqlbackupdatabase-check><a href=/docs/pgsql/backup/database/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlbackupdatabase><i class="fa-solid fa-rotate-left"></i><span>Clone Database</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlmigration-li><input type=checkbox id=m-docspgsqlmigration-check>
<label for=m-docspgsqlmigration-check><a href=/docs/pgsql/migration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqlmigration><i class="fa-solid fa-truck-moving"></i><span>Data Migration</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docspgsqltutorial-li><input type=checkbox id=m-docspgsqltutorial-check>
<label for=m-docspgsqltutorial-check><a href=/docs/pgsql/tutorial/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqltutorial><i class="fas fa-tasks"></i><span>Tutorials</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqltutorialinstance-li><input type=checkbox id=m-docspgsqltutorialinstance-check>
<label for=m-docspgsqltutorialinstance-check><a href=/docs/pgsql/tutorial/instance/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqltutorialinstance><i class="fa-solid fa-rotate-left"></i><span>Instance Recovery</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqltutorialfailure-li><input type=checkbox id=m-docspgsqltutorialfailure-check>
<label for=m-docspgsqltutorialfailure-check><a href=/docs/pgsql/tutorial/failure/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqltutorialfailure><i class="fa-solid fa-fire"></i><span>Troubleshooting</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqltutorialexample-li><input type=checkbox id=m-docspgsqltutorialexample-check>
<label for=m-docspgsqltutorialexample-check><a href=/docs/pgsql/tutorial/example/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqltutorialexample><i class="fa-solid fa-flask"></i><span>Manual Recovery</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqltutorialhugepage-li><input type=checkbox id=m-docspgsqltutorialhugepage-check>
<label for=m-docspgsqltutorialhugepage-check><a href=/docs/pgsql/tutorial/hugepage/ title="Enabling HugePage for PostgreSQL" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqltutorialhugepage><i class="fa-solid fa-file-circle-plus"></i><span>Enable HugePage</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqltutorialdrop-li><input type=checkbox id=m-docspgsqltutorialdrop-check>
<label for=m-docspgsqltutorialdrop-check><a href=/docs/pgsql/tutorial/drop/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqltutorialdrop><i class="fa-solid fa-trash"></i><span>Accidental Deletion</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqltutorialdrill-li><input type=checkbox id=m-docspgsqltutorialdrill-check>
<label for=m-docspgsqltutorialdrill-check><a href=/docs/pgsql/tutorial/drill/ title="HA Drill: Handling 2-of-3 Node Failure" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqltutorialdrill><i class="fa-solid fa-arrow-right-from-bracket"></i><span>HA Drill: 2/3 Failure</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqltutorialpg-vip-li><input type=checkbox id=m-docspgsqltutorialpg-vip-check>
<label for=m-docspgsqltutorialpg-vip-check><a href=/docs/pgsql/tutorial/pg-vip/ title="Bind a L2 VIP to PostgreSQL Primary with VIP-Manager" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqltutorialpg-vip><i class="fa-solid fa-arrows-split-up-and-left"></i><span>Bind a L2 PG VIP</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqltutorialcitus-li><input type=checkbox id=m-docspgsqltutorialcitus-check>
<label for=m-docspgsqltutorialcitus-check><a href=/docs/pgsql/tutorial/citus/ title="Deploy HA Citus Cluster" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqltutorialcitus><i class="fa-solid fa-arrow-right-from-bracket"></i><span>Setup HA Citus</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child sidebar-divider" id=m-docspgsql_div_reference-li><input type=checkbox id=m-docspgsql_div_reference-check>
<label for=m-docspgsql_div_reference-check><span class="align-left ps-0 td-sidebar-link td-sidebar-link__divider" id=m-docspgsql_div_reference><span>Reference</span></span></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docspgsqlmonitor-li><input type=checkbox id=m-docspgsqlmonitor-check>
<label for=m-docspgsqlmonitor-check><a href=/docs/pgsql/monitor/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqlmonitor><i class="fa-solid fa-binoculars"></i><span>Monitoring</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlmonitordashboard-li><input type=checkbox id=m-docspgsqlmonitordashboard-check>
<label for=m-docspgsqlmonitordashboard-check><a href=/docs/pgsql/monitor/dashboard/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlmonitordashboard><i class="fa-solid fa-gauge-simple-high"></i><span>Dashboards</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlmonitormetric-li><input type=checkbox id=m-docspgsqlmonitormetric-check>
<label for=m-docspgsqlmonitormetric-check><a href=/docs/pgsql/monitor/metric/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlmonitormetric><i class="fa-solid fa-list-check"></i><span>Metrics List</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docspgsqldashboard-li><input type=checkbox id=m-docspgsqldashboard-check>
<label for=m-docspgsqldashboard-check><a href=/docs/pgsql/dashboard/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqldashboard><i class="fa-solid fa-gauge-simple-high"></i><span>Dashboard</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docspgsqldashboardoverview-li><input type=checkbox id=m-docspgsqldashboardoverview-check>
<label for=m-docspgsqldashboardoverview-check><a href=/docs/pgsql/dashboard/overview/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqldashboardoverview><span>Overview</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardoverviewpgsql-overview-li><input type=checkbox id=m-docspgsqldashboardoverviewpgsql-overview-check>
<label for=m-docspgsqldashboardoverviewpgsql-overview-check><a href=/docs/pgsql/dashboard/overview/pgsql-overview/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardoverviewpgsql-overview><span>PGSQL Overview</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardoverviewpgsql-alert-li><input type=checkbox id=m-docspgsqldashboardoverviewpgsql-alert-check>
<label for=m-docspgsqldashboardoverviewpgsql-alert-check><a href=/docs/pgsql/dashboard/overview/pgsql-alert/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardoverviewpgsql-alert><span>PGSQL Alert</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardoverviewpgsql-shard-li><input type=checkbox id=m-docspgsqldashboardoverviewpgsql-shard-check>
<label for=m-docspgsqldashboardoverviewpgsql-shard-check><a href=/docs/pgsql/dashboard/overview/pgsql-shard/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardoverviewpgsql-shard><span>PGSQL Shard</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docspgsqldashboardcluster-li><input type=checkbox id=m-docspgsqldashboardcluster-check>
<label for=m-docspgsqldashboardcluster-check><a href=/docs/pgsql/dashboard/cluster/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqldashboardcluster><span>Cluster</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardclusterpgsql-cluster-li><input type=checkbox id=m-docspgsqldashboardclusterpgsql-cluster-check>
<label for=m-docspgsqldashboardclusterpgsql-cluster-check><a href=/docs/pgsql/dashboard/cluster/pgsql-cluster/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardclusterpgsql-cluster><span>PGSQL Cluster</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardclusterpgrds-cluster-li><input type=checkbox id=m-docspgsqldashboardclusterpgrds-cluster-check>
<label for=m-docspgsqldashboardclusterpgrds-cluster-check><a href=/docs/pgsql/dashboard/cluster/pgrds-cluster/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardclusterpgrds-cluster><span>PGRDS Cluster</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardclusterpgsql-activity-li><input type=checkbox id=m-docspgsqldashboardclusterpgsql-activity-check>
<label for=m-docspgsqldashboardclusterpgsql-activity-check><a href=/docs/pgsql/dashboard/cluster/pgsql-activity/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardclusterpgsql-activity><span>PGSQL Activity</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardclusterpgsql-replication-li><input type=checkbox id=m-docspgsqldashboardclusterpgsql-replication-check>
<label for=m-docspgsqldashboardclusterpgsql-replication-check><a href=/docs/pgsql/dashboard/cluster/pgsql-replication/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardclusterpgsql-replication><span>PGSQL Replication</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardclusterpgsql-service-li><input type=checkbox id=m-docspgsqldashboardclusterpgsql-service-check>
<label for=m-docspgsqldashboardclusterpgsql-service-check><a href=/docs/pgsql/dashboard/cluster/pgsql-service/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardclusterpgsql-service><span>PGSQL Service</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardclusterpgsql-databases-li><input type=checkbox id=m-docspgsqldashboardclusterpgsql-databases-check>
<label for=m-docspgsqldashboardclusterpgsql-databases-check><a href=/docs/pgsql/dashboard/cluster/pgsql-databases/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardclusterpgsql-databases><span>PGSQL Databases</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardclusterpgsql-patroni-li><input type=checkbox id=m-docspgsqldashboardclusterpgsql-patroni-check>
<label for=m-docspgsqldashboardclusterpgsql-patroni-check><a href=/docs/pgsql/dashboard/cluster/pgsql-patroni/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardclusterpgsql-patroni><span>PGSQL Patroni</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardclusterpgsql-pitr-li><input type=checkbox id=m-docspgsqldashboardclusterpgsql-pitr-check>
<label for=m-docspgsqldashboardclusterpgsql-pitr-check><a href=/docs/pgsql/dashboard/cluster/pgsql-pitr/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardclusterpgsql-pitr><span>PGSQL PITR</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docspgsqldashboardinstance-li><input type=checkbox id=m-docspgsqldashboardinstance-check>
<label for=m-docspgsqldashboardinstance-check><a href=/docs/pgsql/dashboard/instance/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqldashboardinstance><span>Instance</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardinstancepgsql-instance-li><input type=checkbox id=m-docspgsqldashboardinstancepgsql-instance-check>
<label for=m-docspgsqldashboardinstancepgsql-instance-check><a href=/docs/pgsql/dashboard/instance/pgsql-instance/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardinstancepgsql-instance><span>PGSQL Instance</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardinstancepgrds-instance-li><input type=checkbox id=m-docspgsqldashboardinstancepgrds-instance-check>
<label for=m-docspgsqldashboardinstancepgrds-instance-check><a href=/docs/pgsql/dashboard/instance/pgrds-instance/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardinstancepgrds-instance><span>PGRDS Instance</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardinstancepgcat-instance-li><input type=checkbox id=m-docspgsqldashboardinstancepgcat-instance-check>
<label for=m-docspgsqldashboardinstancepgcat-instance-check><a href=/docs/pgsql/dashboard/instance/pgcat-instance/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardinstancepgcat-instance><span>PGCAT Instance</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardinstancepgsql-persist-li><input type=checkbox id=m-docspgsqldashboardinstancepgsql-persist-check>
<label for=m-docspgsqldashboardinstancepgsql-persist-check><a href=/docs/pgsql/dashboard/instance/pgsql-persist/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardinstancepgsql-persist><span>PGSQL Persist</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardinstancepgsql-proxy-li><input type=checkbox id=m-docspgsqldashboardinstancepgsql-proxy-check>
<label for=m-docspgsqldashboardinstancepgsql-proxy-check><a href=/docs/pgsql/dashboard/instance/pgsql-proxy/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardinstancepgsql-proxy><span>PGSQL Proxy</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardinstancepgsql-pgbouncer-li><input type=checkbox id=m-docspgsqldashboardinstancepgsql-pgbouncer-check>
<label for=m-docspgsqldashboardinstancepgsql-pgbouncer-check><a href=/docs/pgsql/dashboard/instance/pgsql-pgbouncer/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardinstancepgsql-pgbouncer><span>PGSQL Pgbouncer</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardinstancepgsql-session-li><input type=checkbox id=m-docspgsqldashboardinstancepgsql-session-check>
<label for=m-docspgsqldashboardinstancepgsql-session-check><a href=/docs/pgsql/dashboard/instance/pgsql-session/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardinstancepgsql-session><span>PGSQL Session</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardinstancepgsql-xacts-li><input type=checkbox id=m-docspgsqldashboardinstancepgsql-xacts-check>
<label for=m-docspgsqldashboardinstancepgsql-xacts-check><a href=/docs/pgsql/dashboard/instance/pgsql-xacts/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardinstancepgsql-xacts><span>PGSQL Xacts</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboardinstancepgsql-exporter-li><input type=checkbox id=m-docspgsqldashboardinstancepgsql-exporter-check>
<label for=m-docspgsqldashboardinstancepgsql-exporter-check><a href=/docs/pgsql/dashboard/instance/pgsql-exporter/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboardinstancepgsql-exporter><span>PGSQL Exporter</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docspgsqldashboarddatabase-li><input type=checkbox id=m-docspgsqldashboarddatabase-check>
<label for=m-docspgsqldashboarddatabase-check><a href=/docs/pgsql/dashboard/database/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqldashboarddatabase><span>Database</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboarddatabasepgsql-database-li><input type=checkbox id=m-docspgsqldashboarddatabasepgsql-database-check>
<label for=m-docspgsqldashboarddatabasepgsql-database-check><a href=/docs/pgsql/dashboard/database/pgsql-database/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboarddatabasepgsql-database><span>PGSQL Database</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboarddatabasepgcat-database-li><input type=checkbox id=m-docspgsqldashboarddatabasepgcat-database-check>
<label for=m-docspgsqldashboarddatabasepgcat-database-check><a href=/docs/pgsql/dashboard/database/pgcat-database/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboarddatabasepgcat-database><span>PGCAT Database</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboarddatabasepgsql-tables-li><input type=checkbox id=m-docspgsqldashboarddatabasepgsql-tables-check>
<label for=m-docspgsqldashboarddatabasepgsql-tables-check><a href=/docs/pgsql/dashboard/database/pgsql-tables/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboarddatabasepgsql-tables><span>PGSQL Tables</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboarddatabasepgsql-table-li><input type=checkbox id=m-docspgsqldashboarddatabasepgsql-table-check>
<label for=m-docspgsqldashboarddatabasepgsql-table-check><a href=/docs/pgsql/dashboard/database/pgsql-table/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboarddatabasepgsql-table><span>PGSQL Table</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboarddatabasepgcat-table-li><input type=checkbox id=m-docspgsqldashboarddatabasepgcat-table-check>
<label for=m-docspgsqldashboarddatabasepgcat-table-check><a href=/docs/pgsql/dashboard/database/pgcat-table/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboarddatabasepgcat-table><span>PGCAT Table</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboarddatabasepgsql-query-li><input type=checkbox id=m-docspgsqldashboarddatabasepgsql-query-check>
<label for=m-docspgsqldashboarddatabasepgsql-query-check><a href=/docs/pgsql/dashboard/database/pgsql-query/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboarddatabasepgsql-query><span>PGSQL Query</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboarddatabasepgcat-query-li><input type=checkbox id=m-docspgsqldashboarddatabasepgcat-query-check>
<label for=m-docspgsqldashboarddatabasepgcat-query-check><a href=/docs/pgsql/dashboard/database/pgcat-query/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboarddatabasepgcat-query><span>PGCAT Query</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboarddatabasepgcat-locks-li><input type=checkbox id=m-docspgsqldashboarddatabasepgcat-locks-check>
<label for=m-docspgsqldashboarddatabasepgcat-locks-check><a href=/docs/pgsql/dashboard/database/pgcat-locks/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboarddatabasepgcat-locks><span>PGCAT Locks</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqldashboarddatabasepgcat-schema-li><input type=checkbox id=m-docspgsqldashboarddatabasepgcat-schema-check>
<label for=m-docspgsqldashboarddatabasepgcat-schema-check><a href=/docs/pgsql/dashboard/database/pgcat-schema/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqldashboarddatabasepgcat-schema><span>PGCAT Schema</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlmetric-li><input type=checkbox id=m-docspgsqlmetric-check>
<label for=m-docspgsqlmetric-check><a href=/docs/pgsql/metric/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlmetric><i class="fa-solid fa-list-check"></i><span>Metrics</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docspgsqlparam-li><input type=checkbox id=m-docspgsqlparam-check checked>
<label for=m-docspgsqlparam-check><a href=/docs/pgsql/param/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__section" id=m-docspgsqlparam><i class="fa-solid fa-sliders"></i><span class=td-sidebar-nav-active-item>Parameters</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlplaybook-li><input type=checkbox id=m-docspgsqlplaybook-check>
<label for=m-docspgsqlplaybook-check><a href=/docs/pgsql/playbook/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlplaybook><i class="fa-solid fa-scroll"></i><span>Playbook</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docspgsqlext-li><input type=checkbox id=m-docspgsqlext-check>
<label for=m-docspgsqlext-check><a href=/docs/pgsql/ext/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqlext><i class="fas fa-puzzle-piece"></i><span>Extensions</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlextstart-li><input type=checkbox id=m-docspgsqlextstart-check>
<label for=m-docspgsqlextstart-check><a href=/docs/pgsql/ext/start/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlextstart><i class="fa-solid fa-rocket"></i><span>Quick Start</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlextintro-li><input type=checkbox id=m-docspgsqlextintro-check>
<label for=m-docspgsqlextintro-check><a href=/docs/pgsql/ext/intro/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlextintro><i class="fas fa-info-circle"></i><span>Introduction</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlextpkg-li><input type=checkbox id=m-docspgsqlextpkg-check>
<label for=m-docspgsqlextpkg-check><a href=/docs/pgsql/ext/pkg/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlextpkg><i class="fa-solid fa-box"></i><span>Packages</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlextdownload-li><input type=checkbox id=m-docspgsqlextdownload-check>
<label for=m-docspgsqlextdownload-check><a href=/docs/pgsql/ext/download/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlextdownload><i class="fas fa-download"></i><span>Download</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlextinstall-li><input type=checkbox id=m-docspgsqlextinstall-check>
<label for=m-docspgsqlextinstall-check><a href=/docs/pgsql/ext/install/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlextinstall><i class="fas fa-box-open"></i><span>Install</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlextconfig-li><input type=checkbox id=m-docspgsqlextconfig-check>
<label for=m-docspgsqlextconfig-check><a href=/docs/pgsql/ext/config/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlextconfig><i class="fa-solid fa-gears"></i><span>Config</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlextcreate-li><input type=checkbox id=m-docspgsqlextcreate-check>
<label for=m-docspgsqlextcreate-check><a href=/docs/pgsql/ext/create/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlextcreate><i class="fas fa-plus-circle"></i><span>Create</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlextupdate-li><input type=checkbox id=m-docspgsqlextupdate-check>
<label for=m-docspgsqlextupdate-check><a href=/docs/pgsql/ext/update/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlextupdate><i class="fas fa-arrow-up"></i><span>Update</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlextremove-li><input type=checkbox id=m-docspgsqlextremove-check>
<label for=m-docspgsqlextremove-check><a href=/docs/pgsql/ext/remove/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlextremove><i class="fas fa-trash"></i><span>Remove</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlextextension-li><input type=checkbox id=m-docspgsqlextextension-check>
<label for=m-docspgsqlextextension-check><a href=/docs/pgsql/ext/extension/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlextextension><i class="fa-brands fa-usb"></i><span>Default Extensions</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlextrepo-li><input type=checkbox id=m-docspgsqlextrepo-check>
<label for=m-docspgsqlextrepo-check><a href=/docs/pgsql/ext/repo/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlextrepo><i class="fas fa-warehouse"></i><span>Repository</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docspgsqltemplate-li><input type=checkbox id=m-docspgsqltemplate-check>
<label for=m-docspgsqltemplate-check><a href=/docs/pgsql/template/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqltemplate><i class="fas fa-paint-roller"></i><span>Param Templates</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqltemplatetune-li><input type=checkbox id=m-docspgsqltemplatetune-check>
<label for=m-docspgsqltemplatetune-check><a href=/docs/pgsql/template/tune/ title="Parameter Optimization Policy" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqltemplatetune><i class="fa-solid fa-gauge-high"></i><span>Optimize Params</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqltemplateoltp-li><input type=checkbox id=m-docspgsqltemplateoltp-check>
<label for=m-docspgsqltemplateoltp-check><a href=/docs/pgsql/template/oltp/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqltemplateoltp><i class="fa-solid fa-bolt"></i><span>OLTP Template</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqltemplateolap-li><input type=checkbox id=m-docspgsqltemplateolap-check>
<label for=m-docspgsqltemplateolap-check><a href=/docs/pgsql/template/olap/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqltemplateolap><i class="fa-solid fa-chart-line"></i><span>OLAP Template</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqltemplatecrit-li><input type=checkbox id=m-docspgsqltemplatecrit-check>
<label for=m-docspgsqltemplatecrit-check><a href=/docs/pgsql/template/crit/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqltemplatecrit><i class="fa-solid fa-shield-halved"></i><span>CRIT Template</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqltemplatetiny-li><input type=checkbox id=m-docspgsqltemplatetiny-check>
<label for=m-docspgsqltemplatetiny-check><a href=/docs/pgsql/template/tiny/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqltemplatetiny><i class="fa-solid fa-microchip"></i><span>TINY Template</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docspgsqlkernel-li><input type=checkbox id=m-docspgsqlkernel-check>
<label for=m-docspgsqlkernel-check><a href=/docs/pgsql/kernel/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docspgsqlkernel><i class="fas fa-heart"></i><span>PG Kernels</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlkernelpostgres-li><input type=checkbox id=m-docspgsqlkernelpostgres-check>
<label for=m-docspgsqlkernelpostgres-check><a href=/docs/pgsql/kernel/postgres/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlkernelpostgres><i class="fa-solid fa-database"></i><span>PostgreSQL</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlkernelsupabase-li><input type=checkbox id=m-docspgsqlkernelsupabase-check>
<label for=m-docspgsqlkernelsupabase-check><a href=/docs/pgsql/kernel/supabase/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlkernelsupabase><i class="fas fa-bolt"></i><span>Supabase</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlkernelpercona-li><input type=checkbox id=m-docspgsqlkernelpercona-check>
<label for=m-docspgsqlkernelpercona-check><a href=/docs/pgsql/kernel/percona/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlkernelpercona><i class="fa-solid fa-lock"></i><span>Percona</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlkernelopenhalo-li><input type=checkbox id=m-docspgsqlkernelopenhalo-check>
<label for=m-docspgsqlkernelopenhalo-check><a href=/docs/pgsql/kernel/openhalo/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlkernelopenhalo><i class="fa-solid fa-sync"></i><span>OpenHalo</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlkernelorioledb-li><input type=checkbox id=m-docspgsqlkernelorioledb-check>
<label for=m-docspgsqlkernelorioledb-check><a href=/docs/pgsql/kernel/orioledb/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlkernelorioledb><i class="fa-solid fa-bolt"></i><span>OrioleDB</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlkernelcitus-li><input type=checkbox id=m-docspgsqlkernelcitus-check>
<label for=m-docspgsqlkernelcitus-check><a href=/docs/pgsql/kernel/citus/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlkernelcitus><i class="fas fa-lemon"></i><span>Citus</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlkernelbabelfish-li><input type=checkbox id=m-docspgsqlkernelbabelfish-check>
<label for=m-docspgsqlkernelbabelfish-check><a href=/docs/pgsql/kernel/babelfish/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlkernelbabelfish><i class="fab fa-microsoft"></i><span>Babelfish</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlkernelivorysql-li><input type=checkbox id=m-docspgsqlkernelivorysql-check>
<label for=m-docspgsqlkernelivorysql-check><a href=/docs/pgsql/kernel/ivorysql/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlkernelivorysql><i class="fas fa-server"></i><span>IvorySQL</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlkernelpolardb-li><input type=checkbox id=m-docspgsqlkernelpolardb-check>
<label for=m-docspgsqlkernelpolardb-check><a href=/docs/pgsql/kernel/polardb/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlkernelpolardb><i class="fas fa-paw"></i><span>PolarDB PG</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlkernelpolardb-o-li><input type=checkbox id=m-docspgsqlkernelpolardb-o-check>
<label for=m-docspgsqlkernelpolardb-o-check><a href=/docs/pgsql/kernel/polardb-o/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlkernelpolardb-o><i class="fas fa-paw"></i><span>PolarDB Oracle</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlkernelpgml-li><input type=checkbox id=m-docspgsqlkernelpgml-check>
<label for=m-docspgsqlkernelpgml-check><a href=/docs/pgsql/kernel/pgml/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlkernelpgml><i class="fas fa-bolt"></i><span>PostgresML</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlkernelcloudberry-li><input type=checkbox id=m-docspgsqlkernelcloudberry-check>
<label for=m-docspgsqlkernelcloudberry-check><a href=/docs/pgsql/kernel/cloudberry/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlkernelcloudberry><i class="fas fa-leaf"></i><span>Cloudberry</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docspgsqlfaq-li><input type=checkbox id=m-docspgsqlfaq-check>
<label for=m-docspgsqlfaq-check><a href=/docs/pgsql/faq/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docspgsqlfaq><i class="fa-solid fa-circle-question"></i><span>FAQ</span></a></label></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"><a href=https://github.com/pgsty/pigsty.io/tree/main/content/docs/pgsql/param/_index.md class="td-page-meta--view td-page-meta__view" target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> View Page Source</a>
<a href=https://github.com/pgsty/pigsty.io/edit/main/content/docs/pgsql/param/_index.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit Current Page</a>
<a href="https://github.com/pgsty/pigsty.io/new/main/content/docs/pgsql/param?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> Create Child Page</a>
<a href="https://github.com/pgsty/pigsty.io/issues/new?title=Parameters" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create Docs Issue</a>
<a href=https://github.com/pgsty/pigsty/issues/new class="td-page-meta--project td-page-meta__project-issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> Create Project Issue</a>
<a id=print href=/_print/docs/pgsql/param/><i class="fa-solid fa-print fa-fw"></i> Print Entire Section</a></div><div class=td-toc data-proofer-ignore><div class=td-toc-title><span class=td-toc-title__text>On this page</span>
<a class=td-toc-title__link title="Top of page" href=#></a></div><nav id=TableOfContents><ul><li><a href=#parameter-overview>Parameter Overview</a></li><li><a href=#pg_id><code>PG_ID</code></a><ul><li><a href=#pg_mode><code>pg_mode</code></a></li><li><a href=#pg_cluster><code>pg_cluster</code></a></li><li><a href=#pg_seq><code>pg_seq</code></a></li><li><a href=#pg_role><code>pg_role</code></a></li><li><a href=#pg_instances><code>pg_instances</code></a></li><li><a href=#pg_upstream><code>pg_upstream</code></a></li><li><a href=#pg_shard><code>pg_shard</code></a></li><li><a href=#pg_group><code>pg_group</code></a></li><li><a href=#gp_role><code>gp_role</code></a></li><li><a href=#pg_exporters><code>pg_exporters</code></a></li><li><a href=#pg_offline_query><code>pg_offline_query</code></a></li></ul></li><li><a href=#pg_business><code>PG_BUSINESS</code></a><ul><li><a href=#pg_users><code>pg_users</code></a></li><li><a href=#pg_databases><code>pg_databases</code></a></li><li><a href=#pg_services><code>pg_services</code></a></li><li><a href=#pg_hba_rules><code>pg_hba_rules</code></a></li><li><a href=#pgb_hba_rules><code>pgb_hba_rules</code></a></li><li><a href=#pg_crontab><code>pg_crontab</code></a></li><li><a href=#pg_replication_username><code>pg_replication_username</code></a></li><li><a href=#pg_replication_password><code>pg_replication_password</code></a></li><li><a href=#pg_admin_username><code>pg_admin_username</code></a></li><li><a href=#pg_admin_password><code>pg_admin_password</code></a></li><li><a href=#pg_monitor_username><code>pg_monitor_username</code></a></li><li><a href=#pg_monitor_password><code>pg_monitor_password</code></a></li><li><a href=#pg_dbsu_password><code>pg_dbsu_password</code></a></li></ul></li><li><a href=#pg_install><code>PG_INSTALL</code></a><ul><li><a href=#pg_dbsu><code>pg_dbsu</code></a></li><li><a href=#pg_dbsu_uid><code>pg_dbsu_uid</code></a></li><li><a href=#pg_dbsu_sudo><code>pg_dbsu_sudo</code></a></li><li><a href=#pg_dbsu_home><code>pg_dbsu_home</code></a></li><li><a href=#pg_dbsu_ssh_exchange><code>pg_dbsu_ssh_exchange</code></a></li><li><a href=#pg_version><code>pg_version</code></a></li><li><a href=#pg_bin_dir><code>pg_bin_dir</code></a></li><li><a href=#pg_log_dir><code>pg_log_dir</code></a></li><li><a href=#pg_packages><code>pg_packages</code></a></li><li><a href=#pg_extensions><code>pg_extensions</code></a></li></ul></li><li><a href=#pg_bootstrap><code>PG_BOOTSTRAP</code></a><ul><li><a href=#pg_data><code>pg_data</code></a></li><li><a href=#pg_fs_main><code>pg_fs_main</code></a></li><li><a href=#pg_fs_backup><code>pg_fs_backup</code></a></li><li><a href=#pg_storage_type><code>pg_storage_type</code></a></li><li><a href=#pg_dummy_filesize><code>pg_dummy_filesize</code></a></li><li><a href=#pg_listen><code>pg_listen</code></a></li><li><a href=#pg_port><code>pg_port</code></a></li><li><a href=#pg_localhost><code>pg_localhost</code></a></li><li><a href=#pg_namespace><code>pg_namespace</code></a></li><li><a href=#patroni_enabled><code>patroni_enabled</code></a></li><li><a href=#patroni_mode><code>patroni_mode</code></a></li><li><a href=#patroni_port><code>patroni_port</code></a></li><li><a href=#patroni_log_dir><code>patroni_log_dir</code></a></li><li><a href=#patroni_ssl_enabled><code>patroni_ssl_enabled</code></a></li><li><a href=#patroni_watchdog_mode><code>patroni_watchdog_mode</code></a></li><li><a href=#patroni_username><code>patroni_username</code></a></li><li><a href=#patroni_password><code>patroni_password</code></a></li><li><a href=#pg_primary_db><code>pg_primary_db</code></a></li><li><a href=#pg_parameters><code>pg_parameters</code></a></li><li><a href=#pg_files><code>pg_files</code></a></li><li><a href=#pg_conf><code>pg_conf</code></a></li><li><a href=#pg_max_conn><code>pg_max_conn</code></a></li><li><a href=#pg_shared_buffer_ratio><code>pg_shared_buffer_ratio</code></a></li><li><a href=#pg_rto><code>pg_rto</code></a></li><li><a href=#pg_rpo><code>pg_rpo</code></a></li><li><a href=#pg_libs><code>pg_libs</code></a></li><li><a href=#pg_delay><code>pg_delay</code></a></li><li><a href=#pg_checksum><code>pg_checksum</code></a></li><li><a href=#pg_pwd_enc><code>pg_pwd_enc</code></a></li><li><a href=#pg_encoding><code>pg_encoding</code></a></li><li><a href=#pg_locale><code>pg_locale</code></a></li><li><a href=#pg_lc_collate><code>pg_lc_collate</code></a></li><li><a href=#pg_lc_ctype><code>pg_lc_ctype</code></a></li><li><a href=#pg_io_method><code>pg_io_method</code></a></li><li><a href=#pg_etcd_password><code>pg_etcd_password</code></a></li><li><a href=#pgsodium_key><code>pgsodium_key</code></a></li><li><a href=#pgsodium_getkey_script><code>pgsodium_getkey_script</code></a></li></ul></li><li><a href=#pg_provision><code>PG_PROVISION</code></a><ul><li><a href=#pg_provision-1><code>pg_provision</code></a></li><li><a href=#pg_init><code>pg_init</code></a></li><li><a href=#pg_default_roles><code>pg_default_roles</code></a></li><li><a href=#pg_default_privileges><code>pg_default_privileges</code></a></li><li><a href=#pg_default_schemas><code>pg_default_schemas</code></a></li><li><a href=#pg_default_extensions><code>pg_default_extensions</code></a></li><li><a href=#pg_reload><code>pg_reload</code></a></li><li><a href=#pg_default_hba_rules><code>pg_default_hba_rules</code></a></li><li><a href=#pgb_default_hba_rules><code>pgb_default_hba_rules</code></a></li></ul></li><li><a href=#pg_backup><code>PG_BACKUP</code></a><ul><li><a href=#pgbackrest_enabled><code>pgbackrest_enabled</code></a></li><li><a href=#pgbackrest_clean><code>pgbackrest_clean</code></a></li><li><a href=#pgbackrest_log_dir><code>pgbackrest_log_dir</code></a></li><li><a href=#pgbackrest_method><code>pgbackrest_method</code></a></li><li><a href=#pgbackrest_init_backup><code>pgbackrest_init_backup</code></a></li><li><a href=#pgbackrest_repo><code>pgbackrest_repo</code></a></li></ul></li><li><a href=#pg_access><code>PG_ACCESS</code></a><ul><li><a href=#pgbouncer_enabled><code>pgbouncer_enabled</code></a></li><li><a href=#pgbouncer_port><code>pgbouncer_port</code></a></li><li><a href=#pgbouncer_log_dir><code>pgbouncer_log_dir</code></a></li><li><a href=#pgbouncer_auth_query><code>pgbouncer_auth_query</code></a></li><li><a href=#pgbouncer_poolmode><code>pgbouncer_poolmode</code></a></li><li><a href=#pgbouncer_sslmode><code>pgbouncer_sslmode</code></a></li><li><a href=#pgbouncer_ignore_param><code>pgbouncer_ignore_param</code></a></li><li><a href=#pg_weight><code>pg_weight</code></a></li><li><a href=#pg_service_provider><code>pg_service_provider</code></a></li><li><a href=#pg_default_service_dest><code>pg_default_service_dest</code></a></li><li><a href=#pg_default_services><code>pg_default_services</code></a></li><li><a href=#pg_vip_enabled><code>pg_vip_enabled</code></a></li><li><a href=#pg_vip_address><code>pg_vip_address</code></a></li><li><a href=#pg_vip_interface><code>pg_vip_interface</code></a></li><li><a href=#pg_dns_suffix><code>pg_dns_suffix</code></a></li><li><a href=#pg_dns_target><code>pg_dns_target</code></a></li></ul></li><li><a href=#pg_monitor><code>PG_MONITOR</code></a><ul><li><a href=#pg_exporter_enabled><code>pg_exporter_enabled</code></a></li><li><a href=#pg_exporter_config><code>pg_exporter_config</code></a></li><li><a href=#pg_exporter_cache_ttls><code>pg_exporter_cache_ttls</code></a></li><li><a href=#pg_exporter_port><code>pg_exporter_port</code></a></li><li><a href=#pg_exporter_params><code>pg_exporter_params</code></a></li><li><a href=#pg_exporter_url><code>pg_exporter_url</code></a></li><li><a href=#pg_exporter_auto_discovery><code>pg_exporter_auto_discovery</code></a></li><li><a href=#pg_exporter_exclude_database><code>pg_exporter_exclude_database</code></a></li><li><a href=#pg_exporter_include_database><code>pg_exporter_include_database</code></a></li><li><a href=#pg_exporter_connect_timeout><code>pg_exporter_connect_timeout</code></a></li><li><a href=#pg_exporter_options><code>pg_exporter_options</code></a></li><li><a href=#pgbouncer_exporter_enabled><code>pgbouncer_exporter_enabled</code></a></li><li><a href=#pgbouncer_exporter_port><code>pgbouncer_exporter_port</code></a></li><li><a href=#pgbouncer_exporter_url><code>pgbouncer_exporter_url</code></a></li><li><a href=#pgbouncer_exporter_options><code>pgbouncer_exporter_options</code></a></li><li><a href=#pgbackrest_exporter_enabled><code>pgbackrest_exporter_enabled</code></a></li><li><a href=#pgbackrest_exporter_port><code>pgbackrest_exporter_port</code></a></li><li><a href=#pgbackrest_exporter_options><code>pgbackrest_exporter_options</code></a></li></ul></li><li><a href=#pg_remove><code>PG_REMOVE</code></a><ul><li><a href=#pg_rm_data><code>pg_rm_data</code></a></li><li><a href=#pg_rm_backup><code>pg_rm_backup</code></a></li><li><a href=#pg_rm_pkg><code>pg_rm_pkg</code></a></li><li><a href=#pg_safeguard><code>pg_safeguard</code></a></li></ul></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud taxo-module"><h5 class=taxonomy-title>Module</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://pigsty.io/module/app/ data-taxonomy-term=app><span class=taxonomy-label>APP</span><span class=taxonomy-count>10</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/blog/ data-taxonomy-term=blog><span class=taxonomy-label>BLOG</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/consul/ data-taxonomy-term=consul><span class=taxonomy-label>CONSUL</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/docker/ data-taxonomy-term=docker><span class=taxonomy-label>DOCKER</span><span class=taxonomy-count>5</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/duckdb/ data-taxonomy-term=duckdb><span class=taxonomy-label>DUCKDB</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/etcd/ data-taxonomy-term=etcd><span class=taxonomy-label>ETCD</span><span class=taxonomy-count>7</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/infra/ data-taxonomy-term=infra><span class=taxonomy-label>INFRA</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/jupyter/ data-taxonomy-term=jupyter><span class=taxonomy-label>JUPYTER</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/kafka/ data-taxonomy-term=kafka><span class=taxonomy-label>KAFKA</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/kube/ data-taxonomy-term=kube><span class=taxonomy-label>KUBE</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/minio/ data-taxonomy-term=minio><span class=taxonomy-label>MINIO</span><span class=taxonomy-count>9</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/mysql/ data-taxonomy-term=mysql><span class=taxonomy-label>MYSQL</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/pgsql/ data-taxonomy-term=pgsql><span class=taxonomy-label>PGSQL</span><span class=taxonomy-count>91</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/pig/ data-taxonomy-term=pig><span class=taxonomy-label>PIG</span><span class=taxonomy-count>10</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/pigsty/ data-taxonomy-term=pigsty><span class=taxonomy-label>PIGSTY</span><span class=taxonomy-count>51</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/pilot/ data-taxonomy-term=pilot><span class=taxonomy-label>PILOT</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/redis/ data-taxonomy-term=redis><span class=taxonomy-label>REDIS</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/software/ data-taxonomy-term=software><span class=taxonomy-label>SOFTWARE</span><span class=taxonomy-count>20</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/tigerbeetle/ data-taxonomy-term=tigerbeetle><span class=taxonomy-label>TIGERBEETLE</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/module/victoria/ data-taxonomy-term=victoria><span class=taxonomy-label>VICTORIA</span><span class=taxonomy-count>1</span></a></li></ul></div><div class="taxonomy taxonomy-terms-cloud taxo-categories"><h5 class=taxonomy-title>Category</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://pigsty.io/categories/admin/ data-taxonomy-term=admin><span class=taxonomy-label>Admin</span><span class=taxonomy-count>6</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/categories/application/ data-taxonomy-term=application><span class=taxonomy-label>Application</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/categories/concept/ data-taxonomy-term=concept><span class=taxonomy-label>Concept</span><span class=taxonomy-count>48</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/categories/database/ data-taxonomy-term=database><span class=taxonomy-label>Database</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/categories/reference/ data-taxonomy-term=reference><span class=taxonomy-label>Reference</span><span class=taxonomy-count>182</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/categories/task/ data-taxonomy-term=task><span class=taxonomy-label>Task</span><span class=taxonomy-count>52</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/categories/tutorial/ data-taxonomy-term=tutorial><span class=taxonomy-label>Tutorial</span><span class=taxonomy-count>25</span></a></li></ul></div><div class="taxonomy taxonomy-terms-cloud taxo-tags"><h5 class=taxonomy-title>Tags</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://pigsty.io/tags/agent/ data-taxonomy-term=agent><span class=taxonomy-label>Agent</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/ai/ data-taxonomy-term=ai><span class=taxonomy-label>AI</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/alibaba-cloud/ data-taxonomy-term=alibaba-cloud><span class=taxonomy-label>Alibaba-Cloud</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/aliyun/ data-taxonomy-term=aliyun><span class=taxonomy-label>Aliyun</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/architecture/ data-taxonomy-term=architecture><span class=taxonomy-label>Architecture</span><span class=taxonomy-count>5</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/auth/ data-taxonomy-term=auth><span class=taxonomy-label>Auth</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/aws/ data-taxonomy-term=aws><span class=taxonomy-label>AWS</span><span class=taxonomy-count>5</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/backup/ data-taxonomy-term=backup><span class=taxonomy-label>Backup</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/business/ data-taxonomy-term=business><span class=taxonomy-label>Business</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/cdc/ data-taxonomy-term=cdc><span class=taxonomy-label>CDC</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/cdn/ data-taxonomy-term=cdn><span class=taxonomy-label>CDN</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/citus/ data-taxonomy-term=citus><span class=taxonomy-label>Citus</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/clickhouse/ data-taxonomy-term=clickhouse><span class=taxonomy-label>ClickHouse</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/cloud/ data-taxonomy-term=cloud><span class=taxonomy-label>Cloud</span><span class=taxonomy-count>7</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/cloud-exit/ data-taxonomy-term=cloud-exit><span class=taxonomy-label>Cloud-Exit</span><span class=taxonomy-count>37</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/cloud-outage/ data-taxonomy-term=cloud-outage><span class=taxonomy-label>Cloud-Outage</span><span class=taxonomy-count>11</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/cloudberry/ data-taxonomy-term=cloudberry><span class=taxonomy-label>Cloudberry</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/cloudflare/ data-taxonomy-term=cloudflare><span class=taxonomy-label>Cloudflare</span><span class=taxonomy-count>4</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/cmdb/ data-taxonomy-term=cmdb><span class=taxonomy-label>CMDB</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/configuration/ data-taxonomy-term=configuration><span class=taxonomy-label>Configuration</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/configuration-management/ data-taxonomy-term=configuration-management><span class=taxonomy-label>Configuration Management</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/connection-pool/ data-taxonomy-term=connection-pool><span class=taxonomy-label>Connection-Pool</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/convention/ data-taxonomy-term=convention><span class=taxonomy-label>Convention</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/cost/ data-taxonomy-term=cost><span class=taxonomy-label>Cost</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/data-corruption/ data-taxonomy-term=data-corruption><span class=taxonomy-label>Data-Corruption</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/database/ data-taxonomy-term=database><span class=taxonomy-label>Database</span><span class=taxonomy-count>50</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/dba/ data-taxonomy-term=dba><span class=taxonomy-label>DBA</span><span class=taxonomy-count>5</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/dbos/ data-taxonomy-term=dbos><span class=taxonomy-label>DBOS</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/ddia/ data-taxonomy-term=ddia><span class=taxonomy-label>DDIA</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/development/ data-taxonomy-term=development><span class=taxonomy-label>Development</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/dhh/ data-taxonomy-term=dhh><span class=taxonomy-label>DHH</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/distributed/ data-taxonomy-term=distributed><span class=taxonomy-label>Distributed</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/docker/ data-taxonomy-term=docker><span class=taxonomy-label>Docker</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/domestic-database/ data-taxonomy-term=domestic-database><span class=taxonomy-label>Domestic-Database</span><span class=taxonomy-count>4</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/duckdb/ data-taxonomy-term=duckdb><span class=taxonomy-label>DuckDB</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/ebs/ data-taxonomy-term=ebs><span class=taxonomy-label>EBS</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/ecosystem/ data-taxonomy-term=ecosystem><span class=taxonomy-label>Ecosystem</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/ecs/ data-taxonomy-term=ecs><span class=taxonomy-label>ECS</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/encoding/ data-taxonomy-term=encoding><span class=taxonomy-label>Encoding</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/etcd/ data-taxonomy-term=etcd><span class=taxonomy-label>Etcd</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/extension/ data-taxonomy-term=extension><span class=taxonomy-label>Extension</span><span class=taxonomy-count>26</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/faq/ data-taxonomy-term=faq><span class=taxonomy-label>FAQ</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/finops/ data-taxonomy-term=finops><span class=taxonomy-label>FinOps</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/full-text-search/ data-taxonomy-term=full-text-search><span class=taxonomy-label>Full-Text-Search</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/functions/ data-taxonomy-term=functions><span class=taxonomy-label>Functions</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/gin/ data-taxonomy-term=gin><span class=taxonomy-label>GIN</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/gis/ data-taxonomy-term=gis><span class=taxonomy-label>GIS</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/go/ data-taxonomy-term=go><span class=taxonomy-label>Go</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/gpl/ data-taxonomy-term=gpl><span class=taxonomy-label>GPL</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/greenplum/ data-taxonomy-term=greenplum><span class=taxonomy-label>Greenplum</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/hardware/ data-taxonomy-term=hardware><span class=taxonomy-label>Hardware</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/hba/ data-taxonomy-term=hba><span class=taxonomy-label>HBA</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/iac/ data-taxonomy-term=iac><span class=taxonomy-label>IaC</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/iceberg/ data-taxonomy-term=iceberg><span class=taxonomy-label>Iceberg</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/incident-report/ data-taxonomy-term=incident-report><span class=taxonomy-label>Incident-Report</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/installation/ data-taxonomy-term=installation><span class=taxonomy-label>Installation</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/introduction/ data-taxonomy-term=introduction><span class=taxonomy-label>Introduction</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/juicefs/ data-taxonomy-term=juicefs><span class=taxonomy-label>JuiceFS</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/kernel/ data-taxonomy-term=kernel><span class=taxonomy-label>Kernel</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/knn/ data-taxonomy-term=knn><span class=taxonomy-label>KNN</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/kubernetes/ data-taxonomy-term=kubernetes><span class=taxonomy-label>Kubernetes</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/license/ data-taxonomy-term=license><span class=taxonomy-label>License</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/linux/ data-taxonomy-term=linux><span class=taxonomy-label>Linux</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/lock/ data-taxonomy-term=lock><span class=taxonomy-label>Lock</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/logging/ data-taxonomy-term=logging><span class=taxonomy-label>Logging</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/mcp/ data-taxonomy-term=mcp><span class=taxonomy-label>MCP</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/metrics/ data-taxonomy-term=metrics><span class=taxonomy-label>Metrics</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/microservices/ data-taxonomy-term=microservices><span class=taxonomy-label>Microservices</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/migration/ data-taxonomy-term=migration><span class=taxonomy-label>Migration</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/minio/ data-taxonomy-term=minio><span class=taxonomy-label>MinIO</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/ml/ data-taxonomy-term=ml><span class=taxonomy-label>ML</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/mongodb/ data-taxonomy-term=mongodb><span class=taxonomy-label>MongoDB</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/monitoring/ data-taxonomy-term=monitoring><span class=taxonomy-label>Monitoring</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/mssql/ data-taxonomy-term=mssql><span class=taxonomy-label>MSSQL</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/mysql/ data-taxonomy-term=mysql><span class=taxonomy-label>MySQL</span><span class=taxonomy-count>10</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/neon/ data-taxonomy-term=neon><span class=taxonomy-label>Neon</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/newsql/ data-taxonomy-term=newsql><span class=taxonomy-label>NewSQL</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/observability/ data-taxonomy-term=observability><span class=taxonomy-label>Observability</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/olap/ data-taxonomy-term=olap><span class=taxonomy-label>OLAP</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/open-source/ data-taxonomy-term=open-source><span class=taxonomy-label>Open-Source</span><span class=taxonomy-count>11</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/openai/ data-taxonomy-term=openai><span class=taxonomy-label>OpenAI</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/opentelemetry/ data-taxonomy-term=opentelemetry><span class=taxonomy-label>OpenTelemetry</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/operating-system/ data-taxonomy-term=operating-system><span class=taxonomy-label>Operating-System</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/oracle/ data-taxonomy-term=oracle><span class=taxonomy-label>Oracle</span><span class=taxonomy-count>4</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/performance/ data-taxonomy-term=performance><span class=taxonomy-label>Performance</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/pg-admin/ data-taxonomy-term=pg-admin><span class=taxonomy-label>PG-Admin</span><span class=taxonomy-count>42</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/pg-development/ data-taxonomy-term=pg-development><span class=taxonomy-label>PG-Development</span><span class=taxonomy-count>20</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/pg-ecosystem/ data-taxonomy-term=pg-ecosystem><span class=taxonomy-label>PG-Ecosystem</span><span class=taxonomy-count>21</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/pg-kernel/ data-taxonomy-term=pg-kernel><span class=taxonomy-label>PG-Kernel</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/pigsty/ data-taxonomy-term=pigsty><span class=taxonomy-label>Pigsty</span><span class=taxonomy-count>32</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/pigstyapp/ data-taxonomy-term=pigstyapp><span class=taxonomy-label>PigstyApp</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/pitr/ data-taxonomy-term=pitr><span class=taxonomy-label>PITR</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/polardb/ data-taxonomy-term=polardb><span class=taxonomy-label>PolarDB</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/positioning/ data-taxonomy-term=positioning><span class=taxonomy-label>Positioning</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/postgresml/ data-taxonomy-term=postgresml><span class=taxonomy-label>PostgresML</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/postgresql/ data-taxonomy-term=postgresql><span class=taxonomy-label>PostgreSQL</span><span class=taxonomy-count>124</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/rds/ data-taxonomy-term=rds><span class=taxonomy-label>RDS</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/recommendation-system/ data-taxonomy-term=recommendation-system><span class=taxonomy-label>Recommendation System</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/recovery/ data-taxonomy-term=recovery><span class=taxonomy-label>Recovery</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/redis/ data-taxonomy-term=redis><span class=taxonomy-label>Redis</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/rednote/ data-taxonomy-term=rednote><span class=taxonomy-label>RedNote</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/s3/ data-taxonomy-term=s3><span class=taxonomy-label>S3</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/security/ data-taxonomy-term=security><span class=taxonomy-label>Security</span><span class=taxonomy-count>4</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/serverless/ data-taxonomy-term=serverless><span class=taxonomy-label>Serverless</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/service/ data-taxonomy-term=service><span class=taxonomy-label>Service</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/sla/ data-taxonomy-term=sla><span class=taxonomy-label>SLA</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/sop/ data-taxonomy-term=sop><span class=taxonomy-label>SOP</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/sponsor/ data-taxonomy-term=sponsor><span class=taxonomy-label>Sponsor</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/sql/ data-taxonomy-term=sql><span class=taxonomy-label>SQL</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/sqlite/ data-taxonomy-term=sqlite><span class=taxonomy-label>SQLite</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/supabase/ data-taxonomy-term=supabase><span class=taxonomy-label>Supabase</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/supply-chain/ data-taxonomy-term=supply-chain><span class=taxonomy-label>Supply Chain</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/tech-commentary/ data-taxonomy-term=tech-commentary><span class=taxonomy-label>Tech Commentary</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/tencent-cloud/ data-taxonomy-term=tencent-cloud><span class=taxonomy-label>Tencent-Cloud</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/tool/ data-taxonomy-term=tool><span class=taxonomy-label>Tool</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/tools/ data-taxonomy-term=tools><span class=taxonomy-label>Tools</span><span class=taxonomy-count>4</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/triggers/ data-taxonomy-term=triggers><span class=taxonomy-label>Triggers</span><span class=taxonomy-count>3</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/user/ data-taxonomy-term=user><span class=taxonomy-label>User</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/vector/ data-taxonomy-term=vector><span class=taxonomy-label>Vector</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/vector-database/ data-taxonomy-term=vector-database><span class=taxonomy-label>Vector-Database</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/vector-db/ data-taxonomy-term=vector-db><span class=taxonomy-label>Vector-DB</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/victoria/ data-taxonomy-term=victoria><span class=taxonomy-label>Victoria</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/visualization/ data-taxonomy-term=visualization><span class=taxonomy-label>Visualization</span><span class=taxonomy-count>6</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/vulnerability/ data-taxonomy-term=vulnerability><span class=taxonomy-label>Vulnerability</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://pigsty.io/tags/wizard/ data-taxonomy-term=wizard><span class=taxonomy-label>Wizard</span><span class=taxonomy-count>1</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Docs</a></li><li class=breadcrumb-item><a href=/docs/pgsql/>Module: PGSQL</a></li><li class="breadcrumb-item active" aria-current=page>Parameters</li></ol></nav><div class=td-content><h1>Parameters</h1><div class=lead>Customize PostgreSQL clusters with 120 parameters in the PGSQL module</div><header class=article-meta></header><p>The <a href=/docs/pgsql><code>PGSQL</code></a> module needs to be installed on nodes managed by Pigsty (i.e., nodes that have the <a href=/docs/node><code>NODE</code></a> module configured), and also requires an available <a href=/docs/etcd><code>ETCD</code></a> cluster in your deployment to store cluster metadata.</p><p>Installing the <code>PGSQL</code> module on a single node will create a standalone PGSQL server/instance, i.e., a <a href=/docs/pgsql/config#primary>primary</a> instance.
Installing on additional nodes will create <a href=/docs/pgsql/config#replica>read replicas</a>, which can serve as standby instances and handle read-only requests.
You can also create <a href=/docs/pgsql/config#offline>offline</a> instances for ETL/OLAP/interactive queries, use <a href=/docs/pgsql/config#sync-standby>sync standby</a> and <a href=/docs/pgsql/config#quorum-commit>quorum commit</a> to improve data consistency,
or even set up <a href=/docs/pgsql/config#standby-cluster>standby clusters</a> and <a href=/docs/pgsql/config#delayed-cluster>delayed clusters</a> to quickly respond to data loss caused by human errors and software defects.</p><p>You can define multiple PGSQL clusters and further organize them into a horizontal sharding cluster: Pigsty natively supports <a href=/docs/pgsql/config#citus-cluster>Citus cluster groups</a>, allowing you to upgrade your standard PGSQL cluster in-place to a distributed database cluster.</p><blockquote><p>Pigsty v4.0 uses PostgreSQL 18 by default and introduces new parameters such as <code>pg_io_method</code> and <code>pgbackrest_exporter</code>.</p></blockquote><hr><table><thead><tr><th style=text-align:left>Section</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><a href=#pg_id><code>PG_ID</code></a></td><td style=text-align:left>PostgreSQL cluster and instance identity parameters</td></tr><tr><td style=text-align:left><a href=#pg_business><code>PG_BUSINESS</code></a></td><td style=text-align:left>Business users, databases, services and access control rule definition</td></tr><tr><td style=text-align:left><a href=#pg_install><code>PG_INSTALL</code></a></td><td style=text-align:left>PostgreSQL installation: version, paths, packages</td></tr><tr><td style=text-align:left><a href=#pg_bootstrap><code>PG_BOOTSTRAP</code></a></td><td style=text-align:left>PostgreSQL cluster initialization: Patroni high availability</td></tr><tr><td style=text-align:left><a href=#pg_provision><code>PG_PROVISION</code></a></td><td style=text-align:left>PostgreSQL cluster template provisioning: roles, privileges, extensions</td></tr><tr><td style=text-align:left><a href=#pg_backup><code>PG_BACKUP</code></a></td><td style=text-align:left>pgBackRest backup and recovery configuration</td></tr><tr><td style=text-align:left><a href=#pg_access><code>PG_ACCESS</code></a></td><td style=text-align:left>Service exposure, connection pooling, VIP, DNS client access config</td></tr><tr><td style=text-align:left><a href=#pg_monitor><code>PG_MONITOR</code></a></td><td style=text-align:left>PostgreSQL monitoring exporter configuration</td></tr><tr><td style=text-align:left><a href=#pg_remove><code>PG_REMOVE</code></a></td><td style=text-align:left>PostgreSQL instance cleanup and uninstall configuration</td></tr></tbody></table><hr><h2 id=parameter-overview>Parameter Overview</h2><hr><p><a href=#pg_id><code>PG_ID</code></a> parameters are used to define PostgreSQL cluster and instance identity, including cluster name, instance sequence number, role, shard, and other core identity parameters.</p><table><thead><tr><th style=text-align:left>Parameter</th><th style=text-align:center>Type</th><th style=text-align:center>Level</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><a href=#pg_mode><code>pg_mode</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgsql cluster mode: pgsql,citus,mssql,mysql,polar,ivory,oracle,gpsql</td></tr><tr><td style=text-align:left><a href=#pg_cluster><code>pg_cluster</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgsql cluster name, REQUIRED identity parameter</td></tr><tr><td style=text-align:left><a href=#pg_seq><code>pg_seq</code></a></td><td style=text-align:center><code>int</code></td><td style=text-align:center><code>I</code></td><td style=text-align:left>pgsql instance seq number, REQUIRED identity parameter</td></tr><tr><td style=text-align:left><a href=#pg_role><code>pg_role</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>I</code></td><td style=text-align:left>pgsql instance role, REQUIRED, could be primary, replica, offline</td></tr><tr><td style=text-align:left><a href=#pg_instances><code>pg_instances</code></a></td><td style=text-align:center><code>dict</code></td><td style=text-align:center><code>I</code></td><td style=text-align:left>define multiple pg instances on node in <code>{port:ins_vars}</code> format</td></tr><tr><td style=text-align:left><a href=#pg_upstream><code>pg_upstream</code></a></td><td style=text-align:center><code>ip</code></td><td style=text-align:center><code>I</code></td><td style=text-align:left>repl upstream ip addr for standby cluster or cascade replica</td></tr><tr><td style=text-align:left><a href=#pg_shard><code>pg_shard</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgsql shard name, REQUIRED identity for sharding clusters like citus</td></tr><tr><td style=text-align:left><a href=#pg_group><code>pg_group</code></a></td><td style=text-align:center><code>int</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgsql shard index, REQUIRED identity for sharding clusters like citus</td></tr><tr><td style=text-align:left><a href=#gp_role><code>gp_role</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>greenplum role of this cluster, could be master or segment</td></tr><tr><td style=text-align:left><a href=#pg_exporters><code>pg_exporters</code></a></td><td style=text-align:center><code>dict</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>additional pg_exporters to monitor remote postgres instances</td></tr><tr><td style=text-align:left><a href=#pg_offline_query><code>pg_offline_query</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>I</code></td><td style=text-align:left>set to true to mark this replica as offline instance for offline queries</td></tr></tbody></table><hr><p><a href=#pg_business><code>PG_BUSINESS</code></a> parameters are used to define business users, databases, services and access control rules, as well as default system user credentials.</p><table><thead><tr><th style=text-align:left>Parameter</th><th style=text-align:center>Type</th><th style=text-align:center>Level</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><a href=#pg_users><code>pg_users</code></a></td><td style=text-align:center><code>user[]</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>postgres business users</td></tr><tr><td style=text-align:left><a href=#pg_databases><code>pg_databases</code></a></td><td style=text-align:center><code>database[]</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>postgres business databases</td></tr><tr><td style=text-align:left><a href=#pg_services><code>pg_services</code></a></td><td style=text-align:center><code>service[]</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>postgres business services</td></tr><tr><td style=text-align:left><a href=#pg_hba_rules><code>pg_hba_rules</code></a></td><td style=text-align:center><code>hba[]</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>business hba rules for postgres</td></tr><tr><td style=text-align:left><a href=#pgb_hba_rules><code>pgb_hba_rules</code></a></td><td style=text-align:center><code>hba[]</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>business hba rules for pgbouncer</td></tr><tr><td style=text-align:left><a href=#pg_crontab><code>pg_crontab</code></a></td><td style=text-align:center><code>string[]</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>crontab entries for postgres dbsu</td></tr><tr><td style=text-align:left><a href=#pg_replication_username><code>pg_replication_username</code></a></td><td style=text-align:center><code>username</code></td><td style=text-align:center><code>G</code></td><td style=text-align:left>postgres replication username, <code>replicator</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_replication_password><code>pg_replication_password</code></a></td><td style=text-align:center><code>password</code></td><td style=text-align:center><code>G</code></td><td style=text-align:left>postgres replication password, <code>DBUser.Replicator</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_admin_username><code>pg_admin_username</code></a></td><td style=text-align:center><code>username</code></td><td style=text-align:center><code>G</code></td><td style=text-align:left>postgres admin username, <code>dbuser_dba</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_admin_password><code>pg_admin_password</code></a></td><td style=text-align:center><code>password</code></td><td style=text-align:center><code>G</code></td><td style=text-align:left>postgres admin password in plain text, <code>DBUser.DBA</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_monitor_username><code>pg_monitor_username</code></a></td><td style=text-align:center><code>username</code></td><td style=text-align:center><code>G</code></td><td style=text-align:left>postgres monitor username, <code>dbuser_monitor</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_monitor_password><code>pg_monitor_password</code></a></td><td style=text-align:center><code>password</code></td><td style=text-align:center><code>G</code></td><td style=text-align:left>postgres monitor password, <code>DBUser.Monitor</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_dbsu_password><code>pg_dbsu_password</code></a></td><td style=text-align:center><code>password</code></td><td style=text-align:center><code>G/C</code></td><td style=text-align:left>dbsu password, empty string disables it by default, best not set</td></tr></tbody></table><hr><p><a href=#pg_install><code>PG_INSTALL</code></a> parameters are used to configure PostgreSQL installation options, including version, paths, packages, and extensions.</p><table><thead><tr><th style=text-align:left>Parameter</th><th style=text-align:center>Type</th><th style=text-align:center>Level</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><a href=#pg_dbsu><code>pg_dbsu</code></a></td><td style=text-align:center><code>username</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>os dbsu name, <code>postgres</code> by default, better not change it</td></tr><tr><td style=text-align:left><a href=#pg_dbsu_uid><code>pg_dbsu_uid</code></a></td><td style=text-align:center><code>int</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>os dbsu uid and gid, 26 for default postgres user and group</td></tr><tr><td style=text-align:left><a href=#pg_dbsu_sudo><code>pg_dbsu_sudo</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>dbsu sudo privilege, none,limit,all,nopass. limit by default</td></tr><tr><td style=text-align:left><a href=#pg_dbsu_home><code>pg_dbsu_home</code></a></td><td style=text-align:center><code>path</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>postgresql home directory, <code>/var/lib/pgsql</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_dbsu_ssh_exchange><code>pg_dbsu_ssh_exchange</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>exchange postgres dbsu ssh key among same pgsql cluster</td></tr><tr><td style=text-align:left><a href=#pg_version><code>pg_version</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>postgres major version to be installed, 18 by default</td></tr><tr><td style=text-align:left><a href=#pg_bin_dir><code>pg_bin_dir</code></a></td><td style=text-align:center><code>path</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>postgres binary dir, <code>/usr/pgsql/bin</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_log_dir><code>pg_log_dir</code></a></td><td style=text-align:center><code>path</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>postgres log dir, <code>/pg/log/postgres</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_packages><code>pg_packages</code></a></td><td style=text-align:center><code>string[]</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pg packages to be installed, <code>${pg_version}</code> will be replaced</td></tr><tr><td style=text-align:left><a href=#pg_extensions><code>pg_extensions</code></a></td><td style=text-align:center><code>string[]</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pg extensions to be installed, <code>${pg_version}</code> will be replaced</td></tr></tbody></table><hr><p><a href=#pg_bootstrap><code>PG_BOOTSTRAP</code></a> parameters are used to configure PostgreSQL cluster initialization, including Patroni high availability, data directory, storage, networking, encoding, and other core settings.</p><table><thead><tr><th style=text-align:left>Parameter</th><th style=text-align:center>Type</th><th style=text-align:center>Level</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><a href=#pg_data><code>pg_data</code></a></td><td style=text-align:center><code>path</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>postgres data directory, <code>/pg/data</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_fs_main><code>pg_fs_main</code></a></td><td style=text-align:center><code>path</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>mountpoint/path for pg main data, <code>/data/postgres</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_fs_backup><code>pg_fs_backup</code></a></td><td style=text-align:center><code>path</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>mountpoint/path for pg backup data, <code>/data/backups</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_storage_type><code>pg_storage_type</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>storage type for pg main data, SSD,HDD. SSD by default</td></tr><tr><td style=text-align:left><a href=#pg_dummy_filesize><code>pg_dummy_filesize</code></a></td><td style=text-align:center><code>size</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>size of <code>/pg/dummy</code>, hold 64MB disk space for emergency use</td></tr><tr><td style=text-align:left><a href=#pg_listen><code>pg_listen</code></a></td><td style=text-align:center><code>ip(s)</code></td><td style=text-align:center><code>C/I</code></td><td style=text-align:left>postgres/pgbouncer listen addr, comma separated list, <code>0.0.0.0</code></td></tr><tr><td style=text-align:left><a href=#pg_port><code>pg_port</code></a></td><td style=text-align:center><code>port</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>postgres listen port, 5432 by default</td></tr><tr><td style=text-align:left><a href=#pg_localhost><code>pg_localhost</code></a></td><td style=text-align:center><code>path</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>postgres unix socket dir for localhost connection</td></tr><tr><td style=text-align:left><a href=#pg_namespace><code>pg_namespace</code></a></td><td style=text-align:center><code>path</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>top level key namespace in etcd, used by patroni & vip</td></tr><tr><td style=text-align:left><a href=#patroni_enabled><code>patroni_enabled</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>if disabled, no postgres cluster will be created during init</td></tr><tr><td style=text-align:left><a href=#patroni_mode><code>patroni_mode</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>patroni working mode: default,pause,remove</td></tr><tr><td style=text-align:left><a href=#patroni_port><code>patroni_port</code></a></td><td style=text-align:center><code>port</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>patroni listen port, 8008 by default</td></tr><tr><td style=text-align:left><a href=#patroni_log_dir><code>patroni_log_dir</code></a></td><td style=text-align:center><code>path</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>patroni log dir, <code>/pg/log/patroni</code> by default</td></tr><tr><td style=text-align:left><a href=#patroni_ssl_enabled><code>patroni_ssl_enabled</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>G</code></td><td style=text-align:left>secure patroni RestAPI communications with SSL?</td></tr><tr><td style=text-align:left><a href=#patroni_watchdog_mode><code>patroni_watchdog_mode</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>patroni watchdog mode: automatic,required,off. off by default</td></tr><tr><td style=text-align:left><a href=#patroni_username><code>patroni_username</code></a></td><td style=text-align:center><code>username</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>patroni restapi username, <code>postgres</code> by default</td></tr><tr><td style=text-align:left><a href=#patroni_password><code>patroni_password</code></a></td><td style=text-align:center><code>password</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>patroni restapi password, <code>Patroni.API</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_primary_db><code>pg_primary_db</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>primary database name, used by citus,etc. <code>postgres</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_parameters><code>pg_parameters</code></a></td><td style=text-align:center><code>dict</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>extra parameters in postgresql.auto.conf</td></tr><tr><td style=text-align:left><a href=#pg_files><code>pg_files</code></a></td><td style=text-align:center><code>path[]</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>extra files to be copied to PGDATA (e.g. license files)</td></tr><tr><td style=text-align:left><a href=#pg_conf><code>pg_conf</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>config template: oltp,olap,crit,tiny. <code>oltp.yml</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_max_conn><code>pg_max_conn</code></a></td><td style=text-align:center><code>int</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>postgres max connections, <code>auto</code> will use recommended value</td></tr><tr><td style=text-align:left><a href=#pg_shared_buffer_ratio><code>pg_shared_buffer_ratio</code></a></td><td style=text-align:center><code>float</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>postgres shared buffer memory ratio, 0.25 by default, 0.1~0.4</td></tr><tr><td style=text-align:left><a href=#pg_rto><code>pg_rto</code></a></td><td style=text-align:center><code>int</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>recovery time objective in seconds, <code>30s</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_rpo><code>pg_rpo</code></a></td><td style=text-align:center><code>int</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>recovery point objective in bytes, <code>1MiB</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_libs><code>pg_libs</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>preloaded libraries, <code>pg_stat_statements,auto_explain</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_delay><code>pg_delay</code></a></td><td style=text-align:center><code>interval</code></td><td style=text-align:center><code>I</code></td><td style=text-align:left>WAL replay apply delay for standby cluster, for delayed replica</td></tr><tr><td style=text-align:left><a href=#pg_checksum><code>pg_checksum</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>enable data checksum for postgres cluster?</td></tr><tr><td style=text-align:left><a href=#pg_pwd_enc><code>pg_pwd_enc</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>password encryption algorithm: fixed to scram-sha-256</td></tr><tr><td style=text-align:left><a href=#pg_encoding><code>pg_encoding</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>database cluster encoding, <code>UTF8</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_locale><code>pg_locale</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>database cluster locale, <code>C</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_lc_collate><code>pg_lc_collate</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>database cluster collate, <code>C</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_lc_ctype><code>pg_lc_ctype</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>database character type, <code>C</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_io_method><code>pg_io_method</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>PostgreSQL IO method: <code>auto</code>, <code>sync</code>, <code>worker</code>, <code>io_uring</code></td></tr><tr><td style=text-align:left><a href=#pg_etcd_password><code>pg_etcd_password</code></a></td><td style=text-align:center><code>password</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>etcd password for this PostgreSQL cluster, cluster name by default</td></tr><tr><td style=text-align:left><a href=#pgsodium_key><code>pgsodium_key</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgsodium encryption master key, 64 hex digits, sha256(pg_cluster)</td></tr><tr><td style=text-align:left><a href=#pgsodium_getkey_script><code>pgsodium_getkey_script</code></a></td><td style=text-align:center><code>path</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgsodium getkey script path, uses template pgsodium_getkey</td></tr></tbody></table><hr><p><a href=#pg_provision><code>PG_PROVISION</code></a> parameters are used to configure PostgreSQL cluster template provisioning, including default roles, privileges, schemas, extensions, and HBA rules.</p><table><thead><tr><th style=text-align:left>Parameter</th><th style=text-align:center>Type</th><th style=text-align:center>Level</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><a href=#pg_provision><code>pg_provision</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>provision postgres cluster content after bootstrap?</td></tr><tr><td style=text-align:left><a href=#pg_init><code>pg_init</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><code>G/C</code></td><td style=text-align:left>init script for cluster template, <code>pg-init</code> by default</td></tr><tr><td style=text-align:left><a href=#pg_default_roles><code>pg_default_roles</code></a></td><td style=text-align:center><code>role[]</code></td><td style=text-align:center><code>G/C</code></td><td style=text-align:left>default predefined roles and system users in postgres</td></tr><tr><td style=text-align:left><a href=#pg_default_privileges><code>pg_default_privileges</code></a></td><td style=text-align:center><code>string[]</code></td><td style=text-align:center><code>G/C</code></td><td style=text-align:left>default privileges when created by admin user</td></tr><tr><td style=text-align:left><a href=#pg_default_schemas><code>pg_default_schemas</code></a></td><td style=text-align:center><code>string[]</code></td><td style=text-align:center><code>G/C</code></td><td style=text-align:left>default schemas to be created</td></tr><tr><td style=text-align:left><a href=#pg_default_extensions><code>pg_default_extensions</code></a></td><td style=text-align:center><code>extension[]</code></td><td style=text-align:center><code>G/C</code></td><td style=text-align:left>default extensions to be created</td></tr><tr><td style=text-align:left><a href=#pg_reload><code>pg_reload</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>A</code></td><td style=text-align:left>reload postgres config after hba changes?</td></tr><tr><td style=text-align:left><a href=#pg_default_hba_rules><code>pg_default_hba_rules</code></a></td><td style=text-align:center><code>hba[]</code></td><td style=text-align:center><code>G/C</code></td><td style=text-align:left>postgres default host-based auth rules, global default HBA</td></tr><tr><td style=text-align:left><a href=#pgb_default_hba_rules><code>pgb_default_hba_rules</code></a></td><td style=text-align:center><code>hba[]</code></td><td style=text-align:center><code>G/C</code></td><td style=text-align:left>pgbouncer default host-based auth rules, global default HBA</td></tr></tbody></table><hr><p><a href=#pg_backup><code>PG_BACKUP</code></a> parameters are used to configure pgBackRest backup and recovery, including repository type, paths, and retention policies.</p><table><thead><tr><th style=text-align:left>Parameter</th><th style=text-align:center>Type</th><th style=text-align:center>Level</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><a href=#pgbackrest_enabled><code>pgbackrest_enabled</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>enable pgbackrest on pgsql host?</td></tr><tr><td style=text-align:left><a href=#pgbackrest_clean><code>pgbackrest_clean</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>remove previous pg backup data during init?</td></tr><tr><td style=text-align:left><a href=#pgbackrest_log_dir><code>pgbackrest_log_dir</code></a></td><td style=text-align:center><code>path</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgbackrest log dir, <code>/pg/log/pgbackrest</code> by default</td></tr><tr><td style=text-align:left><a href=#pgbackrest_method><code>pgbackrest_method</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgbackrest repo method: local,minio,etc&mldr;</td></tr><tr><td style=text-align:left><a href=#pgbackrest_init_backup><code>pgbackrest_init_backup</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>perform full backup after init? <code>true</code> by default</td></tr><tr><td style=text-align:left><a href=#pgbackrest_repo><code>pgbackrest_repo</code></a></td><td style=text-align:center><code>dict</code></td><td style=text-align:center><code>G/C</code></td><td style=text-align:left>pgbackrest repo definition</td></tr></tbody></table><hr><p><a href=#pg_access><code>PG_ACCESS</code></a> parameters are used to configure service exposure, connection pooling, VIP, DNS, and other client access options.</p><table><thead><tr><th style=text-align:left>Parameter</th><th style=text-align:center>Type</th><th style=text-align:center>Level</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><a href=#pgbouncer_enabled><code>pgbouncer_enabled</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>if disabled, pgbouncer will not be configured</td></tr><tr><td style=text-align:left><a href=#pgbouncer_port><code>pgbouncer_port</code></a></td><td style=text-align:center><code>port</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgbouncer listen port, 6432 by default</td></tr><tr><td style=text-align:left><a href=#pgbouncer_log_dir><code>pgbouncer_log_dir</code></a></td><td style=text-align:center><code>path</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgbouncer log dir, <code>/pg/log/pgbouncer</code> by default</td></tr><tr><td style=text-align:left><a href=#pgbouncer_auth_query><code>pgbouncer_auth_query</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>use AuthQuery to get unlisted business users from postgres?</td></tr><tr><td style=text-align:left><a href=#pgbouncer_poolmode><code>pgbouncer_poolmode</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pool mode: transaction,session,statement. transaction by default</td></tr><tr><td style=text-align:left><a href=#pgbouncer_sslmode><code>pgbouncer_sslmode</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgbouncer client ssl mode, disabled by default</td></tr><tr><td style=text-align:left><a href=#pgbouncer_ignore_param><code>pgbouncer_ignore_param</code></a></td><td style=text-align:center><code>string[]</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgbouncer ignore startup parameters list</td></tr><tr><td style=text-align:left><a href=#pg_weight><code>pg_weight</code></a></td><td style=text-align:center><code>int</code></td><td style=text-align:center><code>I</code></td><td style=text-align:left>relative load balancing weight in service, 0-255, 100 by default</td></tr><tr><td style=text-align:left><a href=#pg_service_provider><code>pg_service_provider</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><code>G/C</code></td><td style=text-align:left>dedicated haproxy node group name, or use local haproxy</td></tr><tr><td style=text-align:left><a href=#pg_default_service_dest><code>pg_default_service_dest</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>G/C</code></td><td style=text-align:left>default service dest if svc.dest=&lsquo;default&rsquo;: postgres or pgbouncer</td></tr><tr><td style=text-align:left><a href=#pg_default_services><code>pg_default_services</code></a></td><td style=text-align:center><code>service[]</code></td><td style=text-align:center><code>G/C</code></td><td style=text-align:left>postgres default service definition list, shared globally</td></tr><tr><td style=text-align:left><a href=#pg_vip_enabled><code>pg_vip_enabled</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>enable L2 VIP for pgsql primary? disabled by default</td></tr><tr><td style=text-align:left><a href=#pg_vip_address><code>pg_vip_address</code></a></td><td style=text-align:center><code>cidr4</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>vip address in <code>&lt;ipv4>/&lt;mask></code> format, required if vip enabled</td></tr><tr><td style=text-align:left><a href=#pg_vip_interface><code>pg_vip_interface</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><code>C/I</code></td><td style=text-align:left>vip network interface to bindg, eth0 by default</td></tr><tr><td style=text-align:left><a href=#pg_dns_suffix><code>pg_dns_suffix</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgsql dns suffix, empty by default</td></tr><tr><td style=text-align:left><a href=#pg_dns_target><code>pg_dns_target</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>PG DNS resolves to: auto, primary, vip, none, or specific IP</td></tr></tbody></table><hr><p><a href=#pg_monitor><code>PG_MONITOR</code></a> parameters are used to configure PostgreSQL monitoring exporters, including pg_exporter, pgbouncer_exporter, and pgbackrest_exporter.</p><table><thead><tr><th style=text-align:left>Parameter</th><th style=text-align:center>Type</th><th style=text-align:center>Level</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><a href=#pg_exporter_enabled><code>pg_exporter_enabled</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>enable pg_exporter on pgsql host?</td></tr><tr><td style=text-align:left><a href=#pg_exporter_config><code>pg_exporter_config</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pg_exporter config file/template name</td></tr><tr><td style=text-align:left><a href=#pg_exporter_cache_ttls><code>pg_exporter_cache_ttls</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pg_exporter collector ttl stages, &lsquo;1,10,60,300&rsquo; by default</td></tr><tr><td style=text-align:left><a href=#pg_exporter_port><code>pg_exporter_port</code></a></td><td style=text-align:center><code>port</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pg_exporter listen port, 9630 by default</td></tr><tr><td style=text-align:left><a href=#pg_exporter_params><code>pg_exporter_params</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>extra URL parameters for pg_exporter dsn</td></tr><tr><td style=text-align:left><a href=#pg_exporter_url><code>pg_exporter_url</code></a></td><td style=text-align:center><code>pgurl</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>overwrite auto-generated postgres DSN connection string</td></tr><tr><td style=text-align:left><a href=#pg_exporter_auto_discovery><code>pg_exporter_auto_discovery</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>enable auto database discovery for monitoring? enabled</td></tr><tr><td style=text-align:left><a href=#pg_exporter_exclude_database><code>pg_exporter_exclude_database</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>excluded database list when auto-discovery, comma separated</td></tr><tr><td style=text-align:left><a href=#pg_exporter_include_database><code>pg_exporter_include_database</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>only monitor these databases when auto-discovery enabled</td></tr><tr><td style=text-align:left><a href=#pg_exporter_connect_timeout><code>pg_exporter_connect_timeout</code></a></td><td style=text-align:center><code>int</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pg_exporter connect timeout in ms, 200 by default</td></tr><tr><td style=text-align:left><a href=#pg_exporter_options><code>pg_exporter_options</code></a></td><td style=text-align:center><code>arg</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>extra command line options for pg_exporter</td></tr><tr><td style=text-align:left><a href=#pgbouncer_exporter_enabled><code>pgbouncer_exporter_enabled</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>enable pgbouncer_exporter on pgsql host?</td></tr><tr><td style=text-align:left><a href=#pgbouncer_exporter_port><code>pgbouncer_exporter_port</code></a></td><td style=text-align:center><code>port</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgbouncer_exporter listen port, 9631 by default</td></tr><tr><td style=text-align:left><a href=#pgbouncer_exporter_url><code>pgbouncer_exporter_url</code></a></td><td style=text-align:center><code>pgurl</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>overwrite auto-generated pgbouncer dsn connection string</td></tr><tr><td style=text-align:left><a href=#pgbouncer_exporter_options><code>pgbouncer_exporter_options</code></a></td><td style=text-align:center><code>arg</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>extra command line options for pgbouncer_exporter</td></tr><tr><td style=text-align:left><a href=#pgbackrest_exporter_enabled><code>pgbackrest_exporter_enabled</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>enable pgbackrest_exporter on pgsql host?</td></tr><tr><td style=text-align:left><a href=#pgbackrest_exporter_port><code>pgbackrest_exporter_port</code></a></td><td style=text-align:center><code>port</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>pgbackrest_exporter listen port, 9854 by default</td></tr><tr><td style=text-align:left><a href=#pgbackrest_exporter_options><code>pgbackrest_exporter_options</code></a></td><td style=text-align:center><code>arg</code></td><td style=text-align:center><code>C</code></td><td style=text-align:left>extra command line options for pgbackrest_exporter</td></tr></tbody></table><hr><p><a href=#pg_remove><code>PG_REMOVE</code></a> parameters are used to configure PostgreSQL instance cleanup and uninstall behavior, including data directory, backup, and package removal control.</p><table><thead><tr><th style=text-align:left>Parameter</th><th style=text-align:center>Type</th><th style=text-align:center>Level</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><a href=#pg_rm_data><code>pg_rm_data</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>G/C/A</code></td><td style=text-align:left>remove postgres data directory when removing instance?</td></tr><tr><td style=text-align:left><a href=#pg_rm_backup><code>pg_rm_backup</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>G/C/A</code></td><td style=text-align:left>remove pgbackrest backup when removing primary?</td></tr><tr><td style=text-align:left><a href=#pg_rm_pkg><code>pg_rm_pkg</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>G/C/A</code></td><td style=text-align:left>uninstall related packages when removing pgsql instance?</td></tr><tr><td style=text-align:left><a href=#pg_safeguard><code>pg_safeguard</code></a></td><td style=text-align:center><code>bool</code></td><td style=text-align:center><code>G/C/A</code></td><td style=text-align:left>prevent accidental pgsql cleanup operations? false</td></tr></tbody></table><hr><h2 id=pg_id><code>PG_ID</code></h2><p>Here are commonly used parameters for identifying <a href=/docs/pgsql/config#er-diagram>entities</a> in the PGSQL module: clusters, instances, services, etc&mldr;</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># pg_cluster:           #CLUSTER  # pgsql cluster name, required identity parameter</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># pg_seq: 0             #INSTANCE # pgsql instance seq number, required identity parameter</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># pg_role: replica      #INSTANCE # pgsql role, required, could be primary,replica,offline</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># pg_instances: {}      #INSTANCE # define multiple pg instances on node in `{port:ins_vars}` format</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># pg_upstream:          #INSTANCE # repl upstream ip addr for standby cluster or cascade replica</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># pg_shard:             #CLUSTER  # pgsql shard name, optional identity for sharding clusters</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># pg_group: 0           #CLUSTER  # pgsql shard index number, optional identity for sharding clusters</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># gp_role: master       #CLUSTER  # greenplum role of this cluster, could be master or segment</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_offline_query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic>#INSTANCE # set to true to enable offline query on this instance</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>You must explicitly specify these <strong>identity parameters</strong>, they have no default values:</p><table><thead><tr><th style=text-align:center>Name</th><th style=text-align:center>Type</th><th style=text-align:center>Level</th><th>Description</th></tr></thead><tbody><tr><td style=text-align:center><a href=#pg_cluster><code>pg_cluster</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><strong>C</strong></td><td><strong>PG cluster name</strong></td></tr><tr><td style=text-align:center><a href=#pg_seq><code>pg_seq</code></a></td><td style=text-align:center><code>number</code></td><td style=text-align:center><strong>I</strong></td><td><strong>PG instance ID</strong></td></tr><tr><td style=text-align:center><a href=#pg_role><code>pg_role</code></a></td><td style=text-align:center><code>enum</code></td><td style=text-align:center><strong>I</strong></td><td><strong>PG instance role</strong></td></tr><tr><td style=text-align:center><a href=#pg_shard><code>pg_shard</code></a></td><td style=text-align:center><code>string</code></td><td style=text-align:center><strong>C</strong></td><td><strong>Shard name</strong></td></tr><tr><td style=text-align:center><a href=#pg_group><code>pg_group</code></a></td><td style=text-align:center><code>number</code></td><td style=text-align:center><strong>C</strong></td><td><strong>Shard index</strong></td></tr></tbody></table><ul><li><a href=#pg_cluster><code>pg_cluster</code></a>: Identifies the cluster name, configured at cluster level.</li><li><a href=#pg_role><code>pg_role</code></a>: Configured at instance level, identifies the role of the instance. Only <code>primary</code> role is treated specially. If not specified, defaults to <code>replica</code> role, with special <code>delayed</code> and <code>offline</code> roles.</li><li><a href=#pg_seq><code>pg_seq</code></a>: Used to identify instances within a cluster, typically an integer starting from 0 or 1, once assigned it doesn&rsquo;t change.</li><li><code>{{ pg_cluster }}-{{ pg_seq }}</code> uniquely identifies an instance, i.e., <code>pg_instance</code>.</li><li><code>{{ pg_cluster }}-{{ pg_role }}</code> identifies services within the cluster, i.e., <code>pg_service</code>.</li><li><a href=#pg_shard><code>pg_shard</code></a> and <a href=#pg_group><code>pg_group</code></a> are used for horizontal sharding clusters, only for citus, greenplum, and matrixdb.</li></ul><p><a href=#pg_cluster><code>pg_cluster</code></a>, <a href=#pg_role><code>pg_role</code></a>, <a href=#pg_seq><code>pg_seq</code></a> are core <strong>identity parameters</strong>, <strong>required</strong> for any Postgres cluster and must be explicitly specified. Here is an example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg-test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>hosts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>10.10.10.11</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#204a87;font-weight:700>pg_seq: 1, pg_role</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>replica}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>10.10.10.12</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#204a87;font-weight:700>pg_seq: 2, pg_role</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>primary}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>10.10.10.13</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#204a87;font-weight:700>pg_seq: 3, pg_role</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>replica}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_cluster</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg-test</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>All other parameters can be inherited from global or default configuration, but identity parameters must be <strong>explicitly specified</strong> and <strong>manually assigned</strong>.</p><h3 id=pg_mode><code>pg_mode</code></h3><p>Parameter Name: <code>pg_mode</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>PostgreSQL cluster mode, default value is <code>pgsql</code>, i.e., standard PostgreSQL cluster.</p><p>Available mode options include:</p><ul><li><code>pgsql</code>: Standard PostgreSQL cluster</li><li><code>citus</code>: Citus distributed database cluster</li><li><code>mssql</code>: Babelfish MSSQL wire protocol compatible kernel</li><li><code>mysql</code>: OpenHalo/HaloDB MySQL wire protocol compatible kernel</li><li><code>ivory</code>: IvorySQL Oracle compatible kernel</li><li><code>polar</code>: PolarDB for PostgreSQL kernel</li><li><code>oracle</code>: PolarDB for Oracle kernel</li><li><code>gpsql</code>: Greenplum parallel database cluster (monitoring)</li></ul><p>If <code>pg_mode</code> is set to <code>citus</code> or <code>gpsql</code>, two additional required identity parameters <a href=#pg_shard><code>pg_shard</code></a> and <a href=#pg_group><code>pg_group</code></a> are needed to define the horizontal sharding cluster identity.</p><p>In both cases, each PostgreSQL cluster is part of a larger business unit.</p><h3 id=pg_cluster><code>pg_cluster</code></h3><p>Parameter Name: <code>pg_cluster</code>, Type: <code>string</code>, Level: <code>C</code></p><p>PostgreSQL cluster name, required identity parameter, no default value.</p><p>The cluster name is used as the namespace for resources.</p><p>Cluster naming must follow a specific pattern: <code>[a-z][a-z0-9-]*</code>, i.e., only numbers and lowercase letters, not starting with a number, to meet different identifier constraints.</p><h3 id=pg_seq><code>pg_seq</code></h3><p>Parameter Name: <code>pg_seq</code>, Type: <code>int</code>, Level: <code>I</code></p><p>PostgreSQL instance sequence number, required identity parameter, no default value.</p><p>The sequence number of this instance, uniquely assigned within its <strong>cluster</strong>, typically using natural numbers starting from 0 or 1, usually not recycled or reused.</p><h3 id=pg_role><code>pg_role</code></h3><p>Parameter Name: <code>pg_role</code>, Type: <code>enum</code>, Level: <code>I</code></p><p>PostgreSQL instance role, required identity parameter, no default value. Values can be: <code>primary</code>, <code>replica</code>, <code>offline</code></p><p>The role of a PGSQL instance can be: <code>primary</code>, <code>replica</code>, <code>standby</code>, or <code>offline</code>.</p><ul><li><code>primary</code>: Primary instance, there is one and only one in a cluster.</li><li><code>replica</code>: Replica for serving online read-only traffic, may have slight replication delay under high load (10ms~100ms, 100KB).</li><li><code>offline</code>: Offline replica for handling offline read-only traffic, such as analytics/ETL/personal queries.</li></ul><h3 id=pg_instances><code>pg_instances</code></h3><p>Parameter Name: <code>pg_instances</code>, Type: <code>dict</code>, Level: <code>I</code></p><p>Define multiple PostgreSQL instances on a single host using <code>{port:ins_vars}</code> format.</p><p>This parameter is reserved for multi-instance deployment on a single node. Pigsty has not yet implemented this feature and strongly recommends dedicated node deployment.</p><h3 id=pg_upstream><code>pg_upstream</code></h3><p>Parameter Name: <code>pg_upstream</code>, Type: <code>ip</code>, Level: <code>I</code></p><p>Upstream instance IP address for <a href=/docs/pgsql/config#standby-cluster>standby cluster</a> or cascade replica.</p><p>Setting <code>pg_upstream</code> on the <code>primary</code> instance of a cluster indicates this cluster is a <a href=/docs/pgsql/config#standby-cluster>standby cluster</a>, and this instance will act as a <code>standby leader</code>, receiving and applying changes from the upstream cluster.</p><p>Setting <code>pg_upstream</code> on a non-<code>primary</code> instance specifies a specific instance as the upstream for physical replication. If different from the primary instance IP address, this instance becomes a <strong>cascade replica</strong>. It is the user&rsquo;s responsibility to ensure the upstream IP address is another instance in the same cluster.</p><h3 id=pg_shard><code>pg_shard</code></h3><p>Parameter Name: <code>pg_shard</code>, Type: <code>string</code>, Level: <code>C</code></p><p>PostgreSQL horizontal shard name, required identity parameter for sharding clusters (e.g., citus clusters).</p><p>When multiple standard PostgreSQL clusters serve the same business together in a horizontal sharding manner, Pigsty marks this group of clusters as a <strong>horizontal sharding cluster</strong>.</p><p><a href=#pg_shard><code>pg_shard</code></a> is the shard group name. It is typically a prefix of <a href=#pg_cluster><code>pg_cluster</code></a>.</p><p>For example, if we have a shard group <code>pg-citus</code> with 4 clusters, their identity parameters would be:</p><pre tabindex=0><code>cls pg_shard: pg-citus
cls pg_group = 0:   pg-citus0
cls pg_group = 1:   pg-citus1
cls pg_group = 2:   pg-citus2
cls pg_group = 3:   pg-citus3
</code></pre><h3 id=pg_group><code>pg_group</code></h3><p>Parameter Name: <code>pg_group</code>, Type: <code>int</code>, Level: <code>C</code></p><p>PostgreSQL horizontal sharding cluster shard index number, required identity parameter for sharding clusters (e.g., citus clusters).</p><p>This parameter is used in conjunction with <a href=#pg_shard>pg_shard</a>, typically using non-negative integers as index numbers.</p><h3 id=gp_role><code>gp_role</code></h3><p>Parameter Name: <code>gp_role</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>Greenplum/Matrixdb role of the PostgreSQL cluster, can be <code>master</code> or <code>segment</code>.</p><ul><li><code>master</code>: Marks the postgres cluster as a greenplum master instance (coordinator node), this is the default value.</li><li><code>segment</code>: Marks the postgres cluster as a greenplum segment cluster (data node).</li></ul><p>This parameter is only used for Greenplum/MatrixDB databases (<a href=#pg_mode><code>pg_mode</code></a> is <code>gpsql</code>) and has no meaning for regular PostgreSQL clusters.</p><h3 id=pg_exporters><code>pg_exporters</code></h3><p>Parameter Name: <code>pg_exporters</code>, Type: <code>dict</code>, Level: <code>C</code></p><p>Additional exporter definitions for <a href=/docs/pgsql/monitor>monitoring</a> remote PostgreSQL instances, default value: <code>{}</code></p><p>If you want to monitor remote PostgreSQL instances, define them in the <code>pg_exporters</code> parameter on the cluster where the monitoring system resides (Infra node), and use the <a href=/docs/pgsql/playbook#pgsql-monitoryml><code>pgsql-monitor.yml</code></a> playbook to complete the deployment.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_exporters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># list all remote instances here, alloc a unique unused local port as k</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>20001</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_cluster: pg-foo, pg_seq: 1, pg_host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>10.10.10.10</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>20004</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_cluster: pg-foo, pg_seq: 2, pg_host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>10.10.10.11</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>20002</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_cluster: pg-bar, pg_seq: 1, pg_host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>10.10.10.12</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>20003</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_cluster: pg-bar, pg_seq: 1, pg_host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>10.10.10.13</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pg_offline_query><code>pg_offline_query</code></h3><p>Parameter Name: <code>pg_offline_query</code>, Type: <code>bool</code>, Level: <code>I</code></p><p>Set to <code>true</code> to enable offline queries on this instance, default is <code>false</code>.</p><p>When this parameter is enabled on a PostgreSQL instance, users belonging to the <code>dbrole_offline</code> group can directly connect to this PostgreSQL instance to execute offline queries (slow queries, interactive queries, ETL/analytics queries).</p><p>Instances with this flag have an effect similar to setting <code>pg_role</code> = <code>offline</code> for the instance, with the only difference being that <code>offline</code> instances by default do not serve <code>replica</code> service requests and exist as dedicated offline/analytics replica instances.</p><p>If you don&rsquo;t have spare instances available for this purpose, you can select a regular replica and enable this parameter at the instance level to handle offline queries when needed.</p><hr><h2 id=pg_business><code>PG_BUSINESS</code></h2><p>Customize cluster templates: users, databases, services, and permission rules.</p><p>Users should <strong>pay close attention</strong> to this section of parameters, as this is where business declares its required database objects.</p><ul><li>Business user definition: <a href=#pg_users><code>pg_users</code></a></li><li>Business database definition: <a href=#pg_databases><code>pg_databases</code></a></li><li>Cluster-specific service definition: <a href=#pg_services><code>pg_services</code></a> (global definition: <a href=#pg_default_services><code>pg_default_services</code></a>)</li><li>PostgreSQL cluster/instance-specific HBA rules: <a href=#pg_hba_rules><code>pg_hba_rules</code></a></li><li>Pgbouncer connection pool-specific HBA rules: <a href=#pgb_hba_rules><code>pgb_hba_rules</code></a></li><li>Cron job (crontab) definition: <a href=#pg_crontab><code>pg_crontab</code></a></li></ul><p><a href=/docs/concept/sec/ac/#default-users>Default</a> database users and their credentials. It is strongly recommended to change these user passwords in production environments.</p><ul><li>PG admin user: <a href=#pg_admin_username><code>pg_admin_username</code></a> / <a href=#pg_admin_password><code>pg_admin_password</code></a></li><li>PG replication user: <a href=#pg_replication_username><code>pg_replication_username</code></a> / <a href=#pg_replication_password><code>pg_replication_password</code></a></li><li>PG monitor user: <a href=#pg_monitor_username><code>pg_monitor_username</code></a> / <a href=#pg_monitor_password><code>pg_monitor_password</code></a></li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># postgres business object definition, overwrite in group vars</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_users</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[]</span><span style=color:#f8f8f8>                      </span><span style=color:#8f5902;font-style:italic># postgres business users</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_databases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[]</span><span style=color:#f8f8f8>                  </span><span style=color:#8f5902;font-style:italic># postgres business databases</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_services</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[]</span><span style=color:#f8f8f8>                   </span><span style=color:#8f5902;font-style:italic># postgres business services</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_hba_rules</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[]</span><span style=color:#f8f8f8>                  </span><span style=color:#8f5902;font-style:italic># business hba rules for postgres</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgb_hba_rules</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[]</span><span style=color:#f8f8f8>                 </span><span style=color:#8f5902;font-style:italic># business hba rules for pgbouncer</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_crontab</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[]</span><span style=color:#f8f8f8>                    </span><span style=color:#8f5902;font-style:italic># crontab entries for postgres dbsu</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># global credentials, overwrite in global vars</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_dbsu_password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#f8f8f8>              </span><span style=color:#8f5902;font-style:italic># dbsu password, empty string means no dbsu password by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_replication_username</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>replicator</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_replication_password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>DBUser.Replicator</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_admin_username</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_dba</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_admin_password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>DBUser.DBA</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_monitor_username</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_monitor</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_monitor_password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>DBUser.Monitor</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pg_users><code>pg_users</code></h3><p>Parameter Name: <code>pg_users</code>, Type: <code>user[]</code>, Level: <code>C</code></p><p>PostgreSQL business user list, needs to be defined at the PG cluster level. Default value: <code>[]</code> empty list.</p><p>Each array element is a <a href=/docs/pgsql/config/user>user/role</a> definition, for example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_meta              </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># required, `name` is the only required field for user definition</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>DBUser.Meta          </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, password, can be scram-sha-256 hash string or plaintext</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>login</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>                     </span><span style=color:#8f5902;font-style:italic># optional, can login by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>superuser</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8>                </span><span style=color:#8f5902;font-style:italic># optional, default false, is superuser?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>createdb</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8>                 </span><span style=color:#8f5902;font-style:italic># optional, default false, can create database?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>createrole</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8>               </span><span style=color:#8f5902;font-style:italic># optional, default false, can create role?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>inherit</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>                   </span><span style=color:#8f5902;font-style:italic># optional, by default, can this role use inherited privileges?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>replication</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8>              </span><span style=color:#8f5902;font-style:italic># optional, default false, can this role do replication?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>bypassrls</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8>                </span><span style=color:#8f5902;font-style:italic># optional, default false, can this role bypass row-level security?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>pgbouncer</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>                 </span><span style=color:#8f5902;font-style:italic># optional, default false, add this user to pgbouncer user list? (production users using connection pool should explicitly set to true)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>connlimit</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>-<span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8>                   </span><span style=color:#8f5902;font-style:italic># optional, user connection limit, default -1 disables limit</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>expire_in: 3650                 # optional, this role expires</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>calculated from creation + n days (higher priority than expire_at)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>expire_at</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;2030-12-31&#39;</span><span style=color:#f8f8f8>         </span><span style=color:#8f5902;font-style:italic># optional, when this role expires, use YYYY-MM-DD format string to specify a specific date (lower priority than expire_in)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pigsty admin user     </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, description and comment string for this user/role</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>roles: [dbrole_admin]           # optional, default roles are</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>dbrole_{admin,readonly,readwrite,offline}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>parameters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{}<span style=color:#f8f8f8>                  </span><span style=color:#8f5902;font-style:italic># optional, use `ALTER ROLE SET` for this role, configure role-level database parameters</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>pool_mode</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>transaction         </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, pgbouncer pool mode at user level, default transaction</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>pool_connlimit</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>-<span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8>              </span><span style=color:#8f5902;font-style:italic># optional, user-level max database connections, default -1 disables limit</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>search_path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public            </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, key-value config parameter per postgresql docs (e.g., use pigsty as default search_path)</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pg_databases><code>pg_databases</code></h3><p>Parameter Name: <code>pg_databases</code>, Type: <code>database[]</code>, Level: <code>C</code></p><p>PostgreSQL business database list, needs to be defined at the PG cluster level. Default value: <code>[]</code> empty list.</p><p>Each array element is a <a href=/docs/pgsql/config/db>business database</a> definition, for example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>meta                     </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># required, `name` is the only required field for database definition</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>baseline</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>cmdb.sql             </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, database sql baseline file path (relative path in ansible search path, e.g., files/)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>pgbouncer</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>                 </span><span style=color:#8f5902;font-style:italic># optional, add this database to pgbouncer database list? default true</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>schemas</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#000>pigsty]              </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, additional schemas to create, array of schema name strings</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>extensions:                     # optional, additional extensions to install</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>array of extension objects</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: postgis , schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public } </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># can specify which schema to install extension into, or not (if not specified, installs to first schema in search_path)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>timescaledb }              </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># some extensions create and use fixed schemas, so no need to specify schema</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pigsty meta database  </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, description and comment for the database</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>owner</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>postgres                </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, database owner, default is postgres</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>template</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>template1            </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, template to use, default is template1, target must be a template database</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>encoding</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>UTF8                 </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, database encoding, default UTF8 (must match template database)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>locale</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>C                      </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, database locale setting, default C (must match template database)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>lc_collate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>C                  </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, database collate rule, default C (must match template database), no reason to change</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>lc_ctype</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>C                    </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, database ctype character set, default C (must match template database)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>tablespace</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_default         </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, default tablespace, default is &#39;pg_default&#39;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>allowconn</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>                 </span><span style=color:#8f5902;font-style:italic># optional, allow connections, default true. Explicitly set false to completely forbid connections</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>revokeconn</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8>               </span><span style=color:#8f5902;font-style:italic># optional, revoke public connect privileges. default false, when true, CONNECT privilege revoked from users other than owner and admin</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>register_datasource</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>       </span><span style=color:#8f5902;font-style:italic># optional, register this database to grafana datasource? default true, explicitly false skips registration</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>connlimit</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>-<span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8>                   </span><span style=color:#8f5902;font-style:italic># optional, database connection limit, default -1 means no limit, positive integer limits connections</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>pool_auth_user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_meta    </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, all connections to this pgbouncer database will authenticate using this user (useful when pgbouncer_auth_query enabled)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>pool_mode</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>transaction         </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, database-level pgbouncer pooling mode, default transaction</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>pool_size</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>64</span><span style=color:#f8f8f8>                   </span><span style=color:#8f5902;font-style:italic># optional, database-level pgbouncer default pool size, default 64</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>pool_size_reserve</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>32</span><span style=color:#f8f8f8>           </span><span style=color:#8f5902;font-style:italic># optional, database-level pgbouncer pool reserve, default 32, max additional burst connections when default pool insufficient</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>pool_size_min</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8>                </span><span style=color:#8f5902;font-style:italic># optional, database-level pgbouncer pool minimum size, default 0</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>pool_max_db_conn</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8>           </span><span style=color:#8f5902;font-style:italic># optional, database-level max database connections, default 100</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>In each database definition object, only <code>name</code> is a required field, all other fields are optional.</p><h3 id=pg_services><code>pg_services</code></h3><p>Parameter Name: <code>pg_services</code>, Type: <code>service[]</code>, Level: <code>C</code></p><p>PostgreSQL service list, needs to be defined at the PG cluster level. Default value: <code>[]</code>, empty list.</p><p>Used to define additional services at the database cluster level. Each object in the array defines a <a href=/docs/pgsql/service/#define-service>service</a>. A complete service definition example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>standby                  </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># required, service name, final svc name will use `pg_cluster` as prefix, e.g., pg-meta-standby</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>5435</span><span style=color:#f8f8f8>                      </span><span style=color:#8f5902;font-style:italic># required, exposed service port (as kubernetes service node port mode)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>ip</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;*&#34;</span><span style=color:#f8f8f8>                         </span><span style=color:#8f5902;font-style:italic># optional, IP address to bind service, default is all IP addresses</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>selector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[]&#34;</span><span style=color:#f8f8f8>                  </span><span style=color:#8f5902;font-style:italic># required, service member selector, use JMESPath to filter inventory</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>backup</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[? pg_role == `primary`]&#34;</span><span style=color:#f8f8f8>  </span><span style=color:#8f5902;font-style:italic># optional, service member selector (backup), service is handled by these instances when default selector instances are all down</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>dest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>default                  </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># optional, target port, default|postgres|pgbouncer|&lt;port_number&gt;, default is &#39;default&#39;, Default means use pg_default_service_dest value to decide</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>check: /sync                    # optional, health check URL path, default is /, here uses Patroni API</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/sync, only sync standby and primary return 200 health status</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>maxconn</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>5000</span><span style=color:#f8f8f8>                   </span><span style=color:#8f5902;font-style:italic># optional, max frontend connections allowed, default 5000</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>balance: roundrobin             # optional, haproxy load balancing algorithm (default roundrobin, other option</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>leastconn)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>options</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;inter 3s fastinter 1s downinter 5s rise 3 fall 3 on-marked-down shutdown-sessions slowstart 30s maxconn 3000 maxqueue 128 weight 100&#39;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>Note that this parameter is used to add additional services at the cluster level. If you want to globally define services that all PostgreSQL databases should provide, use the <a href=#pg_default_services><code>pg_default_services</code></a> parameter.</p><h3 id=pg_hba_rules><code>pg_hba_rules</code></h3><p>Parameter Name: <code>pg_hba_rules</code>, Type: <code>hba[]</code>, Level: <code>C</code></p><p>Client IP whitelist/blacklist rules for database cluster/instance. Default: <code>[]</code> empty list.</p><p>Array of objects, each object represents a rule. <a href=/docs/pgsql/config/hba#define-hba>HBA</a> rule object definition:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#204a87;font-weight:700>title</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>allow intranet password access</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>role</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>common</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>rules</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span>- <span style=color:#000>host   all  all  10.0.0.0/8      md5</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span>- <span style=color:#000>host   all  all  172.16.0.0/12   md5</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span>- <span style=color:#000>host   all  all  192.168.0.0/16  md5</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><ul><li><code>title</code>: Rule title name, rendered as comment in HBA file.</li><li><code>rules</code>: Rule array, each element is a standard HBA rule string.</li><li><code>role</code>: Rule application scope, which instance roles will enable this rule?<ul><li><code>common</code>: Applies to all instances</li><li><code>primary</code>, <code>replica</code>, <code>offline</code>: Only applies to instances with specific <a href=#pg_role><code>pg_role</code></a>.</li><li>Special case: <code>role: 'offline'</code> rules apply to instances with <code>pg_role : offline</code>, and also to instances with <a href=#pg_offline_query><code>pg_offline_query</code></a> flag.</li></ul></li></ul><p>In addition to the native HBA rule definition above, Pigsty also provides a more convenient alias form:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#204a87;font-weight:700>addr</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;intra&#39;</span><span style=color:#f8f8f8>    </span><span style=color:#8f5902;font-style:italic># world|intra|infra|admin|local|localhost|cluster|&lt;cidr&gt;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>auth</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;pwd&#39;</span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># trust|pwd|ssl|cert|deny|&lt;official auth method&gt;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;all&#39;</span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># all|${dbsu}|${repl}|${admin}|${monitor}|&lt;user&gt;|&lt;group&gt;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>db</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;all&#39;</span><span style=color:#f8f8f8>        </span><span style=color:#8f5902;font-style:italic># all|replication|....</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>rules</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[]</span><span style=color:#f8f8f8>        </span><span style=color:#8f5902;font-style:italic># raw hba string precedence over above all</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>title</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>allow intranet password access</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p><a href=#pg_default_hba_rules><code>pg_default_hba_rules</code></a> is similar to this parameter, but it&rsquo;s used to define global HBA rules, while this parameter is typically used to customize HBA rules for specific clusters/instances.</p><h3 id=pgb_hba_rules><code>pgb_hba_rules</code></h3><p>Parameter Name: <code>pgb_hba_rules</code>, Type: <code>hba[]</code>, Level: <code>C</code></p><p>Pgbouncer business HBA rules, default value: <code>[]</code>, empty array.</p><p>This parameter is similar to <a href=#pg_hba_rules><code>pg_hba_rules</code></a>, both are arrays of <a href=/docs/pgsql/config/hba#define-hba>hba</a> rule objects, the difference is that this parameter is for Pgbouncer.</p><p><a href=#pgb_default_hba_rules><code>pgb_default_hba_rules</code></a> is similar to this parameter, but it&rsquo;s used to define global connection pool HBA rules, while this parameter is typically used to customize HBA rules for specific connection pool clusters/instances.</p><h3 id=pg_crontab><code>pg_crontab</code></h3><p>Parameter Name: <code>pg_crontab</code>, Type: <code>string[]</code>, Level: <code>C</code></p><p>Cron job list for the PostgreSQL database superuser (dbsu, default <code>postgres</code>), default value: <code>[]</code> empty array.</p><p>Each array element is a crontab entry line, using standard user crontab format: <code>minute hour day month weekday command</code> (<strong>no need to specify username</strong>).</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_crontab</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#4e9a06>&#39;00 01 * * * /pg/bin/pg-backup full&#39;</span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># Full backup at 1 AM daily</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#4e9a06>&#39;00 13 * * * /pg/bin/pg-backup&#39;</span><span style=color:#f8f8f8>           </span><span style=color:#8f5902;font-style:italic># Incremental backup at 1 PM daily</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>This parameter writes cron jobs to the postgres user&rsquo;s personal crontab file:</p><ul><li>EL systems: <code>/var/spool/cron/postgres</code></li><li>Debian systems: <code>/var/spool/cron/crontabs/postgres</code></li></ul><blockquote><p><strong>Note</strong>: This parameter replaces the old practice of configuring postgres user tasks in <a href=/docs/node/param#node_crontab><code>node_crontab</code></a>.
Because <code>node_crontab</code> is written to <code>/etc/crontab</code> during NODE initialization, the <code>postgres</code> user may not exist yet, causing cron errors.</p></blockquote><h3 id=pg_replication_username><code>pg_replication_username</code></h3><p>Parameter Name: <code>pg_replication_username</code>, Type: <code>username</code>, Level: <code>G</code></p><p>PostgreSQL physical replication username, default is <code>replicator</code>, not recommended to change this parameter.</p><h3 id=pg_replication_password><code>pg_replication_password</code></h3><p>Parameter Name: <code>pg_replication_password</code>, Type: <code>password</code>, Level: <code>G</code></p><p>PostgreSQL physical replication user password, default value: <code>DBUser.Replicator</code>.</p><blockquote><p>Warning: Please change this password in production environments!</p></blockquote><h3 id=pg_admin_username><code>pg_admin_username</code></h3><p>Parameter Name: <code>pg_admin_username</code>, Type: <code>username</code>, Level: <code>G</code></p><p>PostgreSQL / Pgbouncer admin name, default: <code>dbuser_dba</code>.</p><p>This is the globally used database administrator with database Superuser privileges and connection pool traffic management permissions. Please control its usage scope.</p><h3 id=pg_admin_password><code>pg_admin_password</code></h3><p>Parameter Name: <code>pg_admin_password</code>, Type: <code>password</code>, Level: <code>G</code></p><p>PostgreSQL / Pgbouncer admin password, default: <code>DBUser.DBA</code>.</p><blockquote><p>Warning: Please change this password in production environments!</p></blockquote><h3 id=pg_monitor_username><code>pg_monitor_username</code></h3><p>Parameter Name: <code>pg_monitor_username</code>, Type: <code>username</code>, Level: <code>G</code></p><p>PostgreSQL/Pgbouncer monitor username, default: <code>dbuser_monitor</code>.</p><p>This is a database/connection pool user for monitoring, not recommended to change this username.</p><p>However, if your existing database uses a different monitor user, you can use this parameter to specify the monitor username when defining monitoring targets.</p><h3 id=pg_monitor_password><code>pg_monitor_password</code></h3><p>Parameter Name: <code>pg_monitor_password</code>, Type: <code>password</code>, Level: <code>G</code></p><p>Password used by PostgreSQL/Pgbouncer monitor user, default: <code>DBUser.Monitor</code>.</p><p>Try to avoid using characters like <code>@:/</code> that can be confused with URL delimiters in passwords to reduce unnecessary trouble.</p><blockquote><p>Warning: Please change this password in production environments!</p></blockquote><h3 id=pg_dbsu_password><code>pg_dbsu_password</code></h3><p>Parameter Name: <code>pg_dbsu_password</code>, Type: <code>password</code>, Level: <code>G/C</code></p><p>PostgreSQL <a href=#pg_dbsu><code>pg_dbsu</code></a> superuser password, default is empty string, meaning no password is set.</p><p>We don&rsquo;t recommend configuring password login for dbsu as it increases the attack surface. The exception is: <a href=#pg_mode><code>pg_mode</code></a> = <code>citus</code>, in which case you need to configure a password for each shard cluster&rsquo;s dbsu to allow connections within the shard cluster.</p><hr><h2 id=pg_install><code>PG_INSTALL</code></h2><p>This section is responsible for installing PostgreSQL and its extensions. If you want to install different major versions and extension plugins, just modify <a href=#pg_version><code>pg_version</code></a> and <a href=#pg_extensions><code>pg_extensions</code></a>. Note that not all extensions are available for all major versions.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_dbsu</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>postgres                </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># os dbsu name, default is postgres, better not change it</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_dbsu_uid</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>26</span><span style=color:#f8f8f8>                   </span><span style=color:#8f5902;font-style:italic># os dbsu uid and gid, default is 26, for default postgres user and group</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_dbsu_sudo</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>limit              </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># dbsu sudo privilege, none,limit,all,nopass. default is limit</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_dbsu_home</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/var/lib/pgsql     </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># postgresql home directory, default is `/var/lib/pgsql`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_dbsu_ssh_exchange</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>        </span><span style=color:#8f5902;font-style:italic># exchange postgres dbsu ssh key among same pgsql cluster</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_version</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>18</span><span style=color:#f8f8f8>                    </span><span style=color:#8f5902;font-style:italic># postgres major version to be installed, default is 18</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_bin_dir</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/usr/pgsql/bin       </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># postgres binary dir, default is `/usr/pgsql/bin`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_log_dir</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/pg/log/postgres     </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># postgres log dir, default is `/pg/log/postgres`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_packages</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>                      </span><span style=color:#8f5902;font-style:italic># pg packages to be installed, alias can be used</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>pgsql-main pgsql-common</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[]</span><span style=color:#f8f8f8>                 </span><span style=color:#8f5902;font-style:italic># pg extensions to be installed, alias can be used</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pg_dbsu><code>pg_dbsu</code></h3><p>Parameter Name: <code>pg_dbsu</code>, Type: <code>username</code>, Level: <code>C</code></p><p>OS dbsu username used by PostgreSQL, default is <code>postgres</code>, changing this username is not recommended.</p><p>However, in certain situations, you may need a username different from <code>postgres</code>, for example, when installing and configuring Greenplum / MatrixDB, you need to use <code>gpadmin</code> / <code>mxadmin</code> as the corresponding OS superuser.</p><h3 id=pg_dbsu_uid><code>pg_dbsu_uid</code></h3><p>Parameter Name: <code>pg_dbsu_uid</code>, Type: <code>int</code>, Level: <code>C</code></p><p>OS database superuser uid and gid, <code>26</code> is the default postgres user UID/GID from PGDG RPM.</p><p>For Debian/Ubuntu systems, there is no default value, and user <code>26</code> is often taken. Therefore, when Pigsty detects the installation environment is Debian-based and uid is <code>26</code>, it will automatically use the replacement <code>pg_dbsu_uid = 543</code>.</p><h3 id=pg_dbsu_sudo><code>pg_dbsu_sudo</code></h3><p>Parameter Name: <code>pg_dbsu_sudo</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>Database superuser sudo privilege, can be <code>none</code>, <code>limit</code>, <code>all</code>, or <code>nopass</code>. Default is <code>limit</code></p><ul><li><p><code>none</code>: No sudo privilege</p></li><li><p><code>limit</code>: Limited sudo privilege for executing <code>systemctl</code> commands for database-related components (default option).</p></li><li><p><code>all</code>: Full <code>sudo</code> privilege, requires password.</p></li><li><p><code>nopass</code>: Full <code>sudo</code> privilege without password (not recommended).</p></li><li><p>Default value is <code>limit</code>, only allows executing <code>sudo systemctl &lt;start|stop|reload> &lt;postgres|patroni|pgbouncer|...></code>.</p></li></ul><h3 id=pg_dbsu_home><code>pg_dbsu_home</code></h3><p>Parameter Name: <code>pg_dbsu_home</code>, Type: <code>path</code>, Level: <code>C</code></p><p>PostgreSQL home directory, default is <code>/var/lib/pgsql</code>, consistent with official pgdg RPM.</p><h3 id=pg_dbsu_ssh_exchange><code>pg_dbsu_ssh_exchange</code></h3><p>Parameter Name: <code>pg_dbsu_ssh_exchange</code>, Type: <code>bool</code>, Level: <code>C</code></p><p>Whether to exchange OS dbsu ssh keys within the same PostgreSQL cluster?</p><p>Default is <code>true</code>, meaning database superusers in the same cluster can ssh to each other.</p><h3 id=pg_version><code>pg_version</code></h3><p>Parameter Name: <code>pg_version</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>PostgreSQL major version to install, default is <code>18</code>.</p><p>Note that PostgreSQL physical streaming replication cannot cross major versions, so it&rsquo;s best not to configure this at the instance level.</p><p>You can use parameters in <a href=#pg_packages><code>pg_packages</code></a> and <a href=#pg_extensions><code>pg_extensions</code></a> to install different packages and extensions for specific PG major versions.</p><h3 id=pg_bin_dir><code>pg_bin_dir</code></h3><p>Parameter Name: <code>pg_bin_dir</code>, Type: <code>path</code>, Level: <code>C</code></p><p>PostgreSQL binary directory, default is <code>/usr/pgsql/bin</code>.</p><p>The default value is a symlink manually created during installation, pointing to the specific installed Postgres version directory.</p><p>For example <code>/usr/pgsql -> /usr/pgsql-15</code>. On Ubuntu/Debian it points to <code>/usr/lib/postgresql/15/bin</code>.</p><p>For more details, see <a href=/docs/ref/fhs#postgres-fhs>PGSQL File Structure</a>.</p><h3 id=pg_log_dir><code>pg_log_dir</code></h3><p>Parameter Name: <code>pg_log_dir</code>, Type: <code>path</code>, Level: <code>C</code></p><p>PostgreSQL log directory, default: <code>/pg/log/postgres</code>. The Vector log agent uses this variable to collect PostgreSQL logs.</p><p>Note that if the log directory <a href=#pg_log_dir><code>pg_log_dir</code></a> is prefixed with the data directory <a href=#pg_data><code>pg_data</code></a>, it won&rsquo;t be explicitly created (created automatically during data directory initialization).</p><h3 id=pg_packages><code>pg_packages</code></h3><p>Parameter Name: <code>pg_packages</code>, Type: <code>string[]</code>, Level: <code>C</code></p><p>PostgreSQL packages to install (RPM/DEB), this is an array of package names where elements can be space or comma-separated package aliases.</p><p>Pigsty v4 converges the default value to two aliases:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_packages</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>pgsql-main pgsql-common</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><ul><li><code>pgsql-main</code>: Maps to PostgreSQL kernel, client, PL languages, and core extensions like <code>pg_repack</code>, <code>wal2json</code>, <code>pgvector</code> on the current platform.</li><li><code>pgsql-common</code>: Maps to companion components required for running the database, such as Patroni, Pgbouncer, pgBackRest, pg_exporter, vip-manager, and other daemons.</li></ul><p>Alias definitions can be found in <code>pg_package_map</code> under <a href=https://github.com/pgsty/pigsty/tree/main/roles/node_id/vars><code>roles/node_id/vars/</code></a>. Pigsty first resolves aliases based on OS and architecture, then replaces <code>$v</code>/<code>${pg_version}</code> with the actual major version <a href=#pg_version><code>pg_version</code></a>, and finally installs the real packages. This shields package name differences between distributions.</p><p>If additional packages are needed (e.g., specific FDW or extensions), you can append aliases or real package names directly to <code>pg_packages</code>. But remember to keep <code>pgsql-main pgsql-common</code>, otherwise core components will be missing.</p><h3 id=pg_extensions><code>pg_extensions</code></h3><p>Parameter Name: <code>pg_extensions</code>, Type: <code>string[]</code>, Level: <code>G/C</code></p><p>PostgreSQL extension packages to install (RPM/DEB), this is an array of extension package names or aliases.</p><p>Starting from v4, the default value is an empty list <code>[]</code>. Pigsty no longer forces installation of large extensions, users can choose as needed to avoid extra disk and dependency usage.</p><p>To install extensions, fill in like this:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>postgis timescaledb pgvector</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>pgsql-fdw    </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># use alias to install common FDWs at once</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p><code>pg_package_map</code> provides many aliases to shield package name differences between distributions. Here are available extension combinations for EL9 platform for reference (pick as needed):</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pg_extensions: <span style=color:#8f5902;font-style:italic># extensions to be installed on this cluster</span>
</span></span><span style=display:flex><span>  - timescaledb periods temporal_tables emaj table_version pg_cron pg_later pg_background pg_timetable
</span></span><span style=display:flex><span>  - postgis pgrouting pointcloud pg_h3 q3c ogr_fdw geoip <span style=color:#8f5902;font-style:italic>#pg_geohash #mobilitydb</span>
</span></span><span style=display:flex><span>  - pgvector pgvectorscale pg_vectorize pg_similarity pg_tiktoken pgml <span style=color:#8f5902;font-style:italic>#smlar</span>
</span></span><span style=display:flex><span>  - pg_search pg_bigm zhparser hunspell
</span></span><span style=display:flex><span>  - hydra pg_analytics pg_lakehouse pg_duckdb duckdb_fdw pg_fkpart pg_partman plproxy <span style=color:#8f5902;font-style:italic>#pg_strom citus</span>
</span></span><span style=display:flex><span>  - pg_hint_plan age hll rum pg_graphql pg_jsonschema jsquery index_advisor hypopg imgsmlr pg_ivm pgmq pgq <span style=color:#8f5902;font-style:italic>#rdkit</span>
</span></span><span style=display:flex><span>  - pg_tle plv8 pllua plprql pldebugger plpgsql_check plprofiler plsh <span style=color:#8f5902;font-style:italic>#pljava plr pgtap faker dbt2</span>
</span></span><span style=display:flex><span>  - prefix semver pgunit md5hash asn1oid roaringbitmap pgfaceting pgsphere pg_country pg_currency pgmp numeral pg_rational pguint ip4r timestamp9 chkpass <span style=color:#8f5902;font-style:italic>#pg_uri #pgemailaddr #acl #debversion #pg_rrule</span>
</span></span><span style=display:flex><span>  - topn pg_gzip pg_http pg_net pg_html5_email_address pgsql_tweaks pg_extra_time pg_timeit count_distinct extra_window_functions first_last_agg tdigest aggs_for_arrays pg_arraymath pg_idkit pg_uuidv7 permuteseq pg_hashids
</span></span><span style=display:flex><span>  - sequential_uuids pg_math pg_random pg_base36 pg_base62 floatvec pg_financial pgjwt pg_hashlib shacrypt cryptint pg_ecdsa pgpcre icu_ext envvar url_encode <span style=color:#8f5902;font-style:italic>#pg_zstd #aggs_for_vecs #quantile #lower_quantile #pgqr #pg_protobuf</span>
</span></span><span style=display:flex><span>  - pg_repack pg_squeeze pg_dirtyread pgfincore pgdd ddlx pg_prioritize pg_checksums pg_readonly safeupdate pg_permissions pgautofailover pg_catcheck preprepare pgcozy pg_orphaned pg_crash pg_cheat_funcs pg_savior table_log pg_fio <span style=color:#8f5902;font-style:italic>#pgpool pgagent</span>
</span></span><span style=display:flex><span>  - pg_profile pg_show_plans pg_stat_kcache pg_stat_monitor pg_qualstats pg_store_plans pg_track_settings pg_wait_sampling system_stats pg_meta pgnodemx pg_sqlog bgw_replstatus pgmeminfo toastinfo pagevis powa pg_top <span style=color:#8f5902;font-style:italic>#pg_statviz #pgexporter_ext #pg_mon</span>
</span></span><span style=display:flex><span>  - passwordcheck supautils pgsodium pg_vault anonymizer pg_tde pgsmcrypto pgaudit pgauditlogtofile pg_auth_mon credcheck pgcryptokey pg_jobmon logerrors login_hook set_user pg_snakeoil pgextwlist pg_auditor noset <span style=color:#8f5902;font-style:italic>#sslutils</span>
</span></span><span style=display:flex><span>  - wrappers multicorn odbc_fdw mysql_fdw tds_fdw sqlite_fdw pgbouncer_fdw mongo_fdw redis_fdw pg_redis_pubsub kafka_fdw hdfs_fdw firebird_fdw aws_s3 log_fdw <span style=color:#8f5902;font-style:italic>#oracle_fdw #db2_fdw #jdbc_fdw</span>
</span></span><span style=display:flex><span>  - orafce pgtt session_variable pg_statement_rollback pg_dbms_metadata pg_dbms_lock pgmemcache <span style=color:#8f5902;font-style:italic>#pg_dbms_job #wiltondb</span>
</span></span><span style=display:flex><span>  - pglogical pgl_ddl_deploy pg_failover_slots wal2json wal2mongo decoderbufs decoder_raw mimeo pgcopydb pgloader pg_fact_loader pg_bulkload pg_comparator pgimportdoc pgexportdoc <span style=color:#8f5902;font-style:italic>#repmgr #slony</span>
</span></span><span style=display:flex><span>  - gis-stack rag-stack fdw-stack fts-stack etl-stack feat-stack olap-stack supa-stack stat-stack json-stack
</span></span></code></pre></div><p>For complete list, see: <a href=https://github.com/pgsty/pigsty/blob/main/roles/node_id/vars/><code>roles/node_id/vars</code></a></p><hr><h2 id=pg_bootstrap><code>PG_BOOTSTRAP</code></h2><p>Bootstrap PostgreSQL cluster with Patroni and set up 1:1 corresponding Pgbouncer connection pool.</p><p>It also initializes the database cluster with default roles, users, privileges, schemas, and extensions defined in <a href=#pg_provision><code>PG_PROVISION</code></a>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_data</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/pg/data                </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># postgres data directory, `/pg/data` by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_fs_main</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/data/postgres       </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># postgres main data directory, `/data/postgres` by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_fs_backup</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/data/backups      </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># postgres backup data directory, `/data/backups` by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_storage_type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>SSD             </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># storage type for pg main data, SSD,HDD, SSD by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_dummy_filesize</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>64MiB         </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># size of `/pg/dummy`, hold 64MB disk space for emergency use</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_listen</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;0.0.0.0&#39;</span><span style=color:#f8f8f8>              </span><span style=color:#8f5902;font-style:italic># postgres/pgbouncer listen addresses, comma separated list</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>5432</span><span style=color:#f8f8f8>                     </span><span style=color:#8f5902;font-style:italic># postgres listen port, 5432 by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_localhost</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/var/run/postgresql</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># postgres unix socket dir for localhost connection</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>patroni_enabled</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>             </span><span style=color:#8f5902;font-style:italic># if disabled, no postgres cluster will be created during init</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>patroni_mode: default             # patroni working mode</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>default,pause,remove</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_namespace</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/pg                </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># top level key namespace in etcd, used by patroni &amp; vip</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>patroni_port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>8008</span><span style=color:#f8f8f8>                </span><span style=color:#8f5902;font-style:italic># patroni listen port, 8008 by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>patroni_log_dir</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/pg/log/patroni </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># patroni log dir, `/pg/log/patroni` by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>patroni_ssl_enabled</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8>        </span><span style=color:#8f5902;font-style:italic># secure patroni RestAPI communications with SSL?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>patroni_watchdog_mode: off        # patroni watchdog mode</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>automatic,required,off. off by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>patroni_username</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>postgres       </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># patroni restapi username, `postgres` by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>patroni_password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>Patroni.API    </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># patroni restapi password, `Patroni.API` by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_etcd_password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#f8f8f8>              </span><span style=color:#8f5902;font-style:italic># etcd password for this pg cluster, &#39;&#39; to use pg_cluster</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_primary_db</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>postgres          </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># primary database name, used by citus,etc... ,postgres by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_parameters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{}<span style=color:#f8f8f8>                 </span><span style=color:#8f5902;font-style:italic># extra parameters in postgresql.auto.conf</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_files</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[]</span><span style=color:#f8f8f8>                      </span><span style=color:#8f5902;font-style:italic># extra files to be copied to postgres data directory (e.g. license)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_conf: oltp.yml                 # config template</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>oltp,olap,crit,tiny. `oltp.yml` by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_max_conn</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>auto                </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># postgres max connections, `auto` will use recommended value</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_shared_buffer_ratio</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0.25</span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># postgres shared buffers ratio, 0.25 by default, 0.1~0.4</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_io_method</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>worker             </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># io method for postgres, auto,fsync,worker,io_uring, worker by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_rto</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>30</span><span style=color:#f8f8f8>                        </span><span style=color:#8f5902;font-style:italic># recovery time objective in seconds,  `30s` by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_rpo</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1048576</span><span style=color:#f8f8f8>                   </span><span style=color:#8f5902;font-style:italic># recovery point objective in bytes, `1MiB` at most by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_libs</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;pg_stat_statements, auto_explain&#39;</span><span style=color:#f8f8f8>  </span><span style=color:#8f5902;font-style:italic># preloaded libraries, `pg_stat_statements,auto_explain` by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_delay</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8>                       </span><span style=color:#8f5902;font-style:italic># replication apply delay for standby cluster leader</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_checksum</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>                 </span><span style=color:#8f5902;font-style:italic># enable data checksum for postgres cluster?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_pwd_enc: scram-sha-256         # passwords encryption algorithm</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>fixed to scram-sha-256</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_encoding</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>UTF8                </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># database cluster encoding, `UTF8` by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_locale</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>C                     </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># database cluster local, `C` by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_lc_collate</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>C                 </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># database cluster collate, `C` by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_lc_ctype</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>C                   </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># database character type, `C` by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#pgsodium_key: &#34;&#34;                 # pgsodium key, 64 hex digit, default to sha256(pg_cluster)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#pgsodium_getkey_script: &#34;&#34;       # pgsodium getkey script path, pgsodium_getkey by default</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pg_data><code>pg_data</code></h3><p>Parameter Name: <code>pg_data</code>, Type: <code>path</code>, Level: <code>C</code></p><p>Postgres data directory, default is <code>/pg/data</code>.</p><p>This is a symlink to the underlying actual data directory, used in multiple places, please don&rsquo;t modify it. See <a href=/docs/ref/fhs>PGSQL File Structure</a> for details.</p><h3 id=pg_fs_main><code>pg_fs_main</code></h3><p>Parameter Name: <code>pg_fs_main</code>, Type: <code>path</code>, Level: <code>C</code></p><p>Mount point/file system path for PostgreSQL main data disk, default is <code>/data/postgres</code>.</p><p>Default value: <code>/data/postgres</code>, which will be used directly as the parent directory of PostgreSQL main data directory.</p><p>NVME SSD is recommended for PostgreSQL main data storage. Pigsty is optimized for SSD storage by default, but also supports HDD.</p><p>You can change <a href=#pg_storage_type><code>pg_storage_type</code></a> to <code>HDD</code> for HDD storage optimization.</p><h3 id=pg_fs_backup><code>pg_fs_backup</code></h3><p>Parameter Name: <code>pg_fs_backup</code>, Type: <code>path</code>, Level: <code>C</code></p><p>Mount point/file system path for PostgreSQL backup data disk, default is <code>/data/backups</code>.</p><p>If you&rsquo;re using the default <a href=#pgbackrest_method><code>pgbackrest_method</code></a> = <code>local</code>, it&rsquo;s recommended to use a separate disk for backup storage.</p><p>The backup disk should be large enough to hold all backups, at least sufficient for 3 base backups + 2 days of WAL archives. Usually capacity isn&rsquo;t a big issue since you can use cheap large HDDs as backup disks.</p><p>It&rsquo;s recommended to use a separate disk for backup storage, otherwise Pigsty will fall back to the main data disk and consume main data disk capacity and IO.</p><h3 id=pg_storage_type><code>pg_storage_type</code></h3><p>Parameter Name: <code>pg_storage_type</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>Type of PostgreSQL data storage media: <code>SSD</code> or <code>HDD</code>, default is <code>SSD</code>.</p><p>Default value: <code>SSD</code>, which affects some tuning parameters like <code>random_page_cost</code> and <code>effective_io_concurrency</code>.</p><h3 id=pg_dummy_filesize><code>pg_dummy_filesize</code></h3><p>Parameter Name: <code>pg_dummy_filesize</code>, Type: <code>size</code>, Level: <code>C</code></p><p>Size of <code>/pg/dummy</code>, default is <code>64MiB</code>, 64MB disk space for emergency use.</p><p>When disk is full, deleting the placeholder file can free some space for emergency use. Recommend at least <code>8GiB</code> for production.</p><h3 id=pg_listen><code>pg_listen</code></h3><p>Parameter Name: <code>pg_listen</code>, Type: <code>ip</code>, Level: <code>C</code></p><p>PostgreSQL / Pgbouncer listen address, default is <code>0.0.0.0</code> (all ipv4 addresses).</p><p>You can use placeholders in this variable, for example: <code>'${ip},${lo}'</code> or <code>'${ip},${vip},${lo}'</code>:</p><ul><li><code>${ip}</code>: Translates to <code>inventory_hostname</code>, which is the primary internal IP address defined in the inventory.</li><li><code>${vip}</code>: If <a href=#pg_vip_enabled><code>pg_vip_enabled</code></a> is enabled, will use the host part of <a href=#pg_vip_address><code>pg_vip_address</code></a>.</li><li><code>${lo}</code>: Will be replaced with <code>127.0.0.1</code></li></ul><p>For production environments with high security requirements, it&rsquo;s recommended to restrict listen IP addresses.</p><h3 id=pg_port><code>pg_port</code></h3><p>Parameter Name: <code>pg_port</code>, Type: <code>port</code>, Level: <code>C</code></p><p>Port that PostgreSQL server listens on, default is <code>5432</code>.</p><h3 id=pg_localhost><code>pg_localhost</code></h3><p>Parameter Name: <code>pg_localhost</code>, Type: <code>path</code>, Level: <code>C</code></p><p>Unix socket directory for localhost PostgreSQL connection, default is <code>/var/run/postgresql</code>.</p><p>Unix socket directory for PostgreSQL and Pgbouncer local connections. <a href=#pg_exporter><code>pg_exporter</code></a> and patroni will preferentially use Unix sockets to access PostgreSQL.</p><h3 id=pg_namespace><code>pg_namespace</code></h3><p>Parameter Name: <code>pg_namespace</code>, Type: <code>path</code>, Level: <code>C</code></p><p>Top-level namespace used in <a href=#etcd>etcd</a>, used by patroni and vip-manager, default is: <code>/pg</code>, not recommended to change.</p><h3 id=patroni_enabled><code>patroni_enabled</code></h3><p>Parameter Name: <code>patroni_enabled</code>, Type: <code>bool</code>, Level: <code>C</code></p><p>Enable Patroni? Default is: <code>true</code>.</p><p>If disabled, no Postgres cluster will be created during initialization. Pigsty will skip the task of starting patroni, which can be used when trying to add some components to existing postgres instances.</p><h3 id=patroni_mode><code>patroni_mode</code></h3><p>Parameter Name: <code>patroni_mode</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>Patroni working mode: <code>default</code>, <code>pause</code>, <code>remove</code>. Default: <code>default</code>.</p><ul><li><code>default</code>: Normal use of Patroni to bootstrap PostgreSQL cluster</li><li><code>pause</code>: Similar to <code>default</code>, but enters maintenance mode after bootstrap</li><li><code>remove</code>: Use Patroni to initialize cluster, then remove Patroni and use raw PostgreSQL.</li></ul><h3 id=patroni_port><code>patroni_port</code></h3><p>Parameter Name: <code>patroni_port</code>, Type: <code>port</code>, Level: <code>C</code></p><p>Patroni listen port, default is <code>8008</code>, not recommended to change.</p><p>Patroni API server listens on this port for health checks and API requests.</p><h3 id=patroni_log_dir><code>patroni_log_dir</code></h3><p>Parameter Name: <code>patroni_log_dir</code>, Type: <code>path</code>, Level: <code>C</code></p><p>Patroni log directory, default is <code>/pg/log/patroni</code>, collected by Vector log agent.</p><h3 id=patroni_ssl_enabled><code>patroni_ssl_enabled</code></h3><p>Parameter Name: <code>patroni_ssl_enabled</code>, Type: <code>bool</code>, Level: <code>G</code></p><p>Secure patroni RestAPI communications with SSL? Default is <code>false</code>.</p><p>This parameter is a global flag that can only be set before deployment. Because if SSL is enabled for patroni, you will have to use HTTPS instead of HTTP for health checks, fetching metrics, and calling APIs.</p><h3 id=patroni_watchdog_mode><code>patroni_watchdog_mode</code></h3><p>Parameter Name: <code>patroni_watchdog_mode</code>, Type: <code>string</code>, Level: <code>C</code></p><p>Patroni watchdog mode: <code>automatic</code>, <code>required</code>, <code>off</code>, default is <code>off</code>.</p><p>In case of primary failure, Patroni can use <a href=https://patroni.readthedocs.io/en/latest/watchdog.html>watchdog</a> to force shutdown old primary node to avoid split-brain.</p><ul><li><code>off</code>: Don&rsquo;t use <code>watchdog</code>. No fencing at all (default behavior)</li><li><code>automatic</code>: Enable <code>watchdog</code> if kernel has <code>softdog</code> module enabled and watchdog belongs to dbsu.</li><li><code>required</code>: Force enable <code>watchdog</code>, refuse to start Patroni/PostgreSQL if <code>softdog</code> unavailable.</li></ul><p>Default is <code>off</code>. You should not enable watchdog on Infra nodes. Critical systems where data consistency takes priority over availability, especially business clusters involving money, can consider enabling this option.</p><p>Note that if all your access traffic uses HAproxy health check <a href=/docs/pgsql/service/#access-service>service access</a>, there is normally no split-brain risk.</p><h3 id=patroni_username><code>patroni_username</code></h3><p>Parameter Name: <code>patroni_username</code>, Type: <code>username</code>, Level: <code>C</code></p><p>Patroni REST API username, default is <code>postgres</code>, used with <a href=#patroni_password><code>patroni_password</code></a>.</p><p>Patroni&rsquo;s dangerous REST APIs (like restarting cluster) are protected by additional username/password. See <a href=/docs/pgsql/admin#configure-cluster>Configure Cluster</a> and <a href=https://patroni.readthedocs.io/en/latest/rest_api.html>Patroni RESTAPI</a> for details.</p><h3 id=patroni_password><code>patroni_password</code></h3><p>Parameter Name: <code>patroni_password</code>, Type: <code>password</code>, Level: <code>C</code></p><p>Patroni REST API password, default is <code>Patroni.API</code>.</p><blockquote><p>Warning: Must change this parameter in production environments!</p></blockquote><h3 id=pg_primary_db><code>pg_primary_db</code></h3><p>Parameter Name: <code>pg_primary_db</code>, Type: <code>string</code>, Level: <code>C</code></p><p>Specify the primary database name in the cluster, used for citus and other business databases, default is <code>postgres</code>.</p><p>For example, when using Patroni to manage HA Citus clusters, you must choose a &ldquo;primary database&rdquo;.</p><p>Additionally, the database name specified here will be displayed in the printed connection string after PGSQL module installation is complete.</p><h3 id=pg_parameters><code>pg_parameters</code></h3><p>Parameter Name: <code>pg_parameters</code>, Type: <code>dict</code>, Level: <code>G/C/I</code></p><p>Used to specify and manage configuration parameters in <code>postgresql.auto.conf</code>.</p><p>After all cluster instances are initialized, the <code>pg_param</code> task will write the key/value pairs from this dictionary sequentially to <code>/pg/data/postgresql.auto.conf</code>.</p><blockquote><p>Note: Do not manually modify this configuration file, or modify cluster configuration parameters via <code>ALTER SYSTEM</code>, changes will be overwritten on the next configuration sync.</p></blockquote><p>This variable has higher priority than cluster configuration in Patroni / DCS (i.e., higher priority than cluster configuration edited by Patroni <code>edit-config</code>), so it can typically be used to override cluster default parameters at instance level.</p><p>When your cluster members have different specifications (not recommended!), you can use this parameter for fine-grained configuration management of each instance.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg-test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>hosts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>10.10.10.11</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_seq: 1, pg_role: primary , pg_parameters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>shared_buffers</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;5GB&#39;</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>10.10.10.12</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_seq: 2, pg_role: replica , pg_parameters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>shared_buffers</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;4GB&#39;</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>10.10.10.13</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_seq: 3, pg_role: replica , pg_parameters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>shared_buffers</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;3GB&#39;</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>Note that some <a href=https://patroni.readthedocs.io/en/latest/patroni_configuration.html#important-rules>important cluster parameters</a> (with requirements on primary/replica parameter values) are managed directly by Patroni via command line arguments, have highest priority, and cannot be overridden this way. For these parameters, you must use Patroni <code>edit-config</code> for management and configuration.</p><p>PostgreSQL parameters that must be consistent on primary and replicas (inconsistency will cause replica to fail to start!):</p><ul><li><code>wal_level</code></li><li><code>max_connections</code></li><li><code>max_locks_per_transaction</code></li><li><code>max_worker_processes</code></li><li><code>max_prepared_transactions</code></li><li><code>track_commit_timestamp</code></li></ul><p>Parameters that should preferably be consistent on primary and replicas (considering possibility of failover):</p><ul><li><code>listen_addresses</code></li><li><code>port</code></li><li><code>cluster_name</code></li><li><code>hot_standby</code></li><li><code>wal_log_hints</code></li><li><code>max_wal_senders</code></li><li><code>max_replication_slots</code></li><li><code>wal_keep_segments</code></li><li><code>wal_keep_size</code></li></ul><p>You can set non-existent parameters (e.g., GUCs from extensions, thus configuring &ldquo;not yet existing&rdquo; parameters that <code>ALTER SYSTEM</code> cannot modify), but modifying existing configuration to illegal values may cause PostgreSQL to fail to start, configure with caution!</p><h3 id=pg_files><code>pg_files</code></h3><p>Parameter Name: <code>pg_files</code>, Type: <code>path[]</code>, Level: <code>C</code></p><p>Used to specify a list of files to be copied to the PGDATA directory, default is empty array: <code>[]</code></p><p>Files specified in this parameter will be copied to the <code>{{ pg_data }}</code> directory, mainly used to distribute license files required by special commercial PostgreSQL kernels.</p><p>Currently only PolarDB (Oracle compatible) kernel requires license files. For example, you can place the <code>license.lic</code> file in the <code>files/</code> directory and specify in <code>pg_files</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_files</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span><span style=color:#000>license.lic ]</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pg_conf><code>pg_conf</code></h3><p>Parameter Name: <code>pg_conf</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>Configuration template: <code>{oltp,olap,crit,tiny}.yml</code>, default is <code>oltp.yml</code>.</p><ul><li><code>tiny.yml</code>: Optimized for small nodes, VMs, small demos (1-8 cores, 1-16GB)</li><li><code>oltp.yml</code>: Optimized for OLTP workloads and latency-sensitive applications (4C8GB+) (default template)</li><li><code>olap.yml</code>: Optimized for OLAP workloads and throughput (4C8G+)</li><li><code>crit.yml</code>: Optimized for data consistency and critical applications (4C8G+)</li></ul><p>Default is <code>oltp.yml</code>, but the <a href=/docs/setup/install#configure>configure</a> script will set this to <code>tiny.yml</code> when current node is a small node.</p><p>You can have your own templates, just place them under <code>templates/&lt;mode>.yml</code> and set this value to the template name to use.</p><h3 id=pg_max_conn><code>pg_max_conn</code></h3><p>Parameter Name: <code>pg_max_conn</code>, Type: <code>int</code>, Level: <code>C</code></p><p>PostgreSQL server max connections. You can choose a value between 50 and 5000, or use <code>auto</code> for recommended value.</p><p>Default is <code>auto</code>, which sets max connections based on <a href=#pg_conf><code>pg_conf</code></a> and <a href=#pg_default_service_dest><code>pg_default_service_dest</code></a>.</p><ul><li>tiny: 100</li><li>olap: 200</li><li>oltp: 200 (pgbouncer) / 1000 (postgres)<ul><li>pg_default_service_dest = pgbouncer : 200</li><li>pg_default_service_dest = postgres : 1000</li></ul></li><li>crit: 200 (pgbouncer) / 1000 (postgres)<ul><li>pg_default_service_dest = pgbouncer : 200</li><li>pg_default_service_dest = postgres : 1000</li></ul></li></ul><p>Not recommended to set this value above 5000, otherwise you&rsquo;ll need to manually increase haproxy service connection limits.</p><p>Pgbouncer&rsquo;s transaction pool can mitigate excessive OLTP connection issues, so setting a large connection count is not recommended by default.</p><p>For OLAP scenarios, change <a href=#pg_default_service_dest><code>pg_default_service_dest</code></a> to <code>postgres</code> to bypass connection pooling.</p><h3 id=pg_shared_buffer_ratio><code>pg_shared_buffer_ratio</code></h3><p>Parameter Name: <code>pg_shared_buffer_ratio</code>, Type: <code>float</code>, Level: <code>C</code></p><p>Postgres shared buffer memory ratio, default is <code>0.25</code>, normal range is <code>0.1</code>~<code>0.4</code>.</p><p>Default: <code>0.25</code>, meaning 25% of node memory will be used as PostgreSQL&rsquo;s shared buffer. If you want to enable huge pages for PostgreSQL, this value should be appropriately smaller than <a href=#node_hugepage_ratio><code>node_hugepage_ratio</code></a>.</p><p>Setting this value above 0.4 (40%) is usually not a good idea, but may be useful in extreme cases.</p><p>Note that shared buffers are only part of PostgreSQL&rsquo;s shared memory. To calculate total shared memory, use <code>show shared_memory_size_in_huge_pages;</code>.</p><h3 id=pg_rto><code>pg_rto</code></h3><p>Parameter Name: <code>pg_rto</code>, Type: <code>int</code>, Level: <code>C</code></p><p>Recovery Time Objective (RTO) in seconds. This is used to calculate Patroni&rsquo;s TTL value, default is <code>30</code> seconds.</p><p>If the primary instance is missing for this long, a new leader election will be triggered. This value is not the lower the better, it involves trade-offs:</p><p>Reducing this value can reduce unavailable time (unable to write) during cluster failover, but makes the cluster more sensitive to short-term network jitter, thus increasing the chance of false positives triggering failover.</p><p>You need to configure this value based on network conditions and business constraints, making a <strong>trade-off</strong> between failure probability and failure impact. Default is <code>30s</code>, which affects the following Patroni parameters:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># TTL for acquiring leader lease (in seconds). Think of it as the time before starting automatic failover. Default: 30</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>ttl</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{{<span style=color:#f8f8f8> </span><span style=color:#000>pg_rto }}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Seconds the loop will sleep. Default: 10, this is patroni check loop interval</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>loop_wait</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{{<span style=color:#f8f8f8> </span><span style=color:#000>(pg_rto / 3)|round(0, &#39;ceil&#39;)|int }}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Timeout for DCS and PostgreSQL operation retries (in seconds). DCS or network issues shorter than this won&#39;t cause Patroni to demote leader. Default: 10</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>retry_timeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{{<span style=color:#f8f8f8> </span><span style=color:#000>(pg_rto / 3)|round(0, &#39;ceil&#39;)|int }}</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Time (in seconds) allowed for primary to recover from failure before triggering failover, max RTO: 2x loop_wait + primary_start_timeout</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>primary_start_timeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{{<span style=color:#f8f8f8> </span><span style=color:#000>(pg_rto / 3)|round(0, &#39;ceil&#39;)|int }}</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pg_rpo><code>pg_rpo</code></h3><p>Parameter Name: <code>pg_rpo</code>, Type: <code>int</code>, Level: <code>C</code></p><p>Recovery Point Objective (RPO) in bytes, default: <code>1048576</code>.</p><p>Default is 1MiB, meaning up to 1MiB of data loss can be tolerated during failover.</p><p>When the primary goes down and all replicas are lagging, you must make a difficult choice, <strong>trade-off between availability and consistency</strong>:</p><ul><li>Promote a replica to become new primary and restore service ASAP, but at the cost of acceptable data loss (e.g., less than 1MB).</li><li>Wait for primary to come back online (may never happen), or manual intervention to avoid any data loss.</li></ul><p>You can use the <code>crit.yml</code> <a href=#pg_conf>conf</a> template to ensure no data loss during failover, but this sacrifices some performance.</p><h3 id=pg_libs><code>pg_libs</code></h3><p>Parameter Name: <code>pg_libs</code>, Type: <code>string</code>, Level: <code>C</code></p><p>Preloaded dynamic shared libraries, default is <code>pg_stat_statements,auto_explain</code>, two PostgreSQL built-in extensions that are strongly recommended to enable.</p><p>For existing clusters, you can directly <a href=/docs/pgsql/admin#configure-cluster>configure cluster</a> <code>shared_preload_libraries</code> parameter and apply.</p><p>If you want to use TimescaleDB or Citus extensions, you need to add <code>timescaledb</code> or <code>citus</code> to this list. <code>timescaledb</code> and <code>citus</code> should be placed at the front of this list, for example:</p><pre tabindex=0><code>citus,timescaledb,pg_stat_statements,auto_explain
</code></pre><p>Other extensions requiring dynamic loading can also be added to this list, such as <code>pg_cron</code>, <code>pgml</code>, etc. Typically <code>citus</code> and <code>timescaledb</code> have highest priority and should be added to the front of the list.</p><h3 id=pg_delay><code>pg_delay</code></h3><p>Parameter Name: <code>pg_delay</code>, Type: <code>interval</code>, Level: <code>I</code></p><p>Delayed standby replication delay, default: <code>0</code>.</p><p>If this value is set to a positive value, the standby cluster leader will be delayed by this time before applying WAL changes. Setting to <code>1h</code> means data in this cluster will always lag the original cluster by one hour.</p><p>See <a href=/docs/pgsql/config#delayed-cluster>Delayed Standby Cluster</a> for details.</p><h3 id=pg_checksum><code>pg_checksum</code></h3><p>Parameter Name: <code>pg_checksum</code>, Type: <code>bool</code>, Level: <code>C</code></p><p>Enable data checksum for PostgreSQL cluster? Default is <code>true</code>, enabled.</p><p>This parameter can only be set before PGSQL deployment (but you can enable it manually later).</p><p>Data checksums help detect disk corruption and hardware failures. This feature is enabled by default since Pigsty v3.5 to ensure data integrity.</p><h3 id=pg_pwd_enc><code>pg_pwd_enc</code></h3><p>Parameter Name: <code>pg_pwd_enc</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>Password encryption algorithm, fixed to <code>scram-sha-256</code> since Pigsty v4.</p><p>All new users will use SCRAM credentials. <code>md5</code> has been deprecated. For compatibility with old clients, upgrade to SCRAM in business connection pools or client drivers.</p><h3 id=pg_encoding><code>pg_encoding</code></h3><p>Parameter Name: <code>pg_encoding</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>Database cluster encoding, default is <code>UTF8</code>.</p><p>Using other non-<code>UTF8</code> encodings is not recommended.</p><h3 id=pg_locale><code>pg_locale</code></h3><p>Parameter Name: <code>pg_locale</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>Database cluster locale, default is <code>C</code>.</p><p>This parameter controls the database&rsquo;s default Locale setting, affecting collation, character classification, and other behaviors. Using <code>C</code> or <code>POSIX</code> provides best performance and predictable sorting behavior.</p><p>If you need specific language localization support, you can set it to the corresponding Locale, such as <code>en_US.UTF-8</code> or <code>zh_CN.UTF-8</code>. Note that Locale settings affect index sort order, so they cannot be changed after cluster initialization.</p><h3 id=pg_lc_collate><code>pg_lc_collate</code></h3><p>Parameter Name: <code>pg_lc_collate</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>Database cluster collation, default is <code>C</code>.</p><p>Unless you know what you&rsquo;re doing, modifying cluster-level collation settings is not recommended.</p><h3 id=pg_lc_ctype><code>pg_lc_ctype</code></h3><p>Parameter Name: <code>pg_lc_ctype</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>Database character set CTYPE, default is <code>C</code>.</p><p>Starting from Pigsty v3.5, to be consistent with <code>pg_lc_collate</code>, the default value changed to <code>C</code>.</p><h3 id=pg_io_method><code>pg_io_method</code></h3><p>Parameter Name: <code>pg_io_method</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>PostgreSQL IO method, default is <code>worker</code>. Available options include:</p><ul><li><code>auto</code>: Automatically select based on operating system, uses <code>io_uring</code> on Debian-based systems or EL 10+, otherwise uses <code>worker</code></li><li><code>sync</code>: Use traditional synchronous IO method</li><li><code>worker</code>: Use background worker processes to handle IO (default option)</li><li><code>io_uring</code>: Use Linux&rsquo;s io_uring asynchronous IO interface</li></ul><p>This parameter only applies to PostgreSQL 17 and above, controlling PostgreSQL&rsquo;s data block layer IO strategy.</p><ul><li>In PostgreSQL 17, <code>io_uring</code> can provide higher IO performance, but requires operating system kernel support (Linux 5.1+) and the <code>liburing</code> library installed.</li><li>In PostgreSQL 18, the default IO method changed from <code>sync</code> to <code>worker</code>, using background worker processes for asynchronous IO without additional dependencies.</li><li>If you&rsquo;re using Debian 12/Ubuntu 22+ or EL 10+ systems and want optimal IO performance, consider setting this to <code>io_uring</code>.</li></ul><p>Note that setting this value on systems that don&rsquo;t support <code>io_uring</code> may cause PostgreSQL startup to fail, so <code>auto</code> or <code>worker</code> are safer choices.</p><h3 id=pg_etcd_password><code>pg_etcd_password</code></h3><p>Parameter Name: <code>pg_etcd_password</code>, Type: <code>password</code>, Level: <code>C</code></p><p>The password used by this PostgreSQL cluster in etcd, default is empty string <code>''</code>.</p><p>If set to empty string, the <a href=#pg_cluster><code>pg_cluster</code></a> parameter value will be used as the password (for Citus clusters, the <a href=#pg_shard><code>pg_shard</code></a> parameter value is used).</p><p>This password is used for authentication when Patroni connects to etcd and when vip-manager accesses etcd.</p><h3 id=pgsodium_key><code>pgsodium_key</code></h3><p>Parameter Name: <code>pgsodium_key</code>, Type: <code>string</code>, Level: <code>C</code></p><p>The encryption master key for the pgsodium extension, consisting of 64 hexadecimal digits.</p><p>This parameter is not set by default. If not specified, Pigsty will automatically generate a deterministic key using the value of <code>sha256(pg_cluster)</code>.</p><p><a href=https://github.com/michelp/pgsodium>pgsodium</a> is a PostgreSQL extension based on libsodium that provides encryption functions and transparent column encryption capabilities.
If you need to use pgsodium&rsquo;s encryption features, it&rsquo;s recommended to explicitly specify a secure random key and keep it safe.</p><p>Example command to generate a random key:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>openssl rand -hex <span style=color:#0000cf;font-weight:700>32</span>   <span style=color:#8f5902;font-style:italic># Generate 64-digit hexadecimal key</span>
</span></span></code></pre></div><h3 id=pgsodium_getkey_script><code>pgsodium_getkey_script</code></h3><p>Parameter Name: <code>pgsodium_getkey_script</code>, Type: <code>path</code>, Level: <code>C</code></p><p>Path to the pgsodium key retrieval script, default uses the <code>pgsodium_getkey</code> script from Pigsty templates.</p><p>This script is used to retrieve pgsodium&rsquo;s master key when PostgreSQL starts. The default script reads the key from environment variables or configuration files.</p><p>If you have custom key management requirements (such as using HashiCorp Vault, AWS KMS, etc.), you can provide a custom script path.</p><h2 id=pg_provision><code>PG_PROVISION</code></h2><p>If <a href=#pg_bootstrap><code>PG_BOOTSTRAP</code></a> is about creating a new cluster, then PG_PROVISION is about creating default objects in the cluster, including:</p><ul><li><a href=/docs/concept/sec/ac/#default-roles>Default Roles</a></li><li><a href=/docs/concept/sec/ac/#default-users>Default Users</a></li><li><a href=/docs/concept/sec/ac/#default-privileges>Default Privileges</a></li><li><a href=/docs/pgsql/config/hba#default-hba>Default HBA Rules</a></li><li>Default Schemas</li><li>Default Extensions</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_provision</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>                </span><span style=color:#8f5902;font-style:italic># provision postgres cluster after bootstrap</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_init</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg-init                 </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># init script for cluster template, default is `pg-init`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_default_roles</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>                 </span><span style=color:#8f5902;font-style:italic># default roles and users in postgres cluster</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: dbrole_readonly  ,login: false ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>role for global read-only access     }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: dbrole_offline   ,login: false ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>role for restricted read-only access }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: dbrole_readwrite ,login: false ,roles: [dbrole_readonly] ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>role for global read-write access }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: dbrole_admin     ,login: false ,roles: [pg_monitor, dbrole_readwrite] ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>role for object creation }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: postgres     ,superuser: true  ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>system superuser }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: replicator ,replication: true  ,roles: [pg_monitor, dbrole_readonly] ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>system replicator }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: dbuser_dba   ,superuser: true  ,roles: [dbrole_admin]  ,pgbouncer: true ,pool_mode: session, pool_connlimit: 16 ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pgsql admin user }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: dbuser_monitor ,roles: [pg_monitor, dbrole_readonly] ,pgbouncer: true ,parameters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#204a87;font-weight:700>log_min_duration_statement: 1000 } ,pool_mode: session ,pool_connlimit: 8 ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pgsql monitor user }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_default_privileges</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>            </span><span style=color:#8f5902;font-style:italic># default privileges when admin user creates objects</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT USAGE      ON SCHEMAS   TO dbrole_readonly</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT SELECT     ON TABLES    TO dbrole_readonly</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT SELECT     ON SEQUENCES TO dbrole_readonly</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT EXECUTE    ON FUNCTIONS TO dbrole_readonly</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT USAGE      ON SCHEMAS   TO dbrole_offline</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT SELECT     ON TABLES    TO dbrole_offline</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT SELECT     ON SEQUENCES TO dbrole_offline</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT EXECUTE    ON FUNCTIONS TO dbrole_offline</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT INSERT     ON TABLES    TO dbrole_readwrite</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT UPDATE     ON TABLES    TO dbrole_readwrite</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT DELETE     ON TABLES    TO dbrole_readwrite</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT USAGE      ON SEQUENCES TO dbrole_readwrite</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT UPDATE     ON SEQUENCES TO dbrole_readwrite</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT TRUNCATE   ON TABLES    TO dbrole_admin</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT REFERENCES ON TABLES    TO dbrole_admin</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT TRIGGER    ON TABLES    TO dbrole_admin</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT CREATE     ON SCHEMAS   TO dbrole_admin</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_default_schemas</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor ]  </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># default schemas</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_default_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>            </span><span style=color:#8f5902;font-style:italic># default extensions</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pg_stat_statements ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pgstattuple        ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pg_buffercache     ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pageinspect        ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pg_prewarm         ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pg_visibility      ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pg_freespacemap    ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: postgres_fdw       ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public  }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: file_fdw           ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public  }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: btree_gist         ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public  }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: btree_gin          ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public  }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pg_trgm            ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public  }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: intagg             ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public  }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: intarray           ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public  }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_repack }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_reload</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>                   </span><span style=color:#8f5902;font-style:italic># reload config after HBA changes?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_default_hba_rules</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>             </span><span style=color:#8f5902;font-style:italic># postgres default HBA rules, ordered by `order`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${dbsu}&#39;</span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: local     ,auth: ident ,title: &#39;dbsu access via local os user ident&#39;  ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>100</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${dbsu}&#39;</span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>,db: replication ,addr: local     ,auth: ident ,title: &#39;dbsu replication from local os ident&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>150</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${repl}&#39;</span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>,db: replication ,addr: localhost ,auth: pwd   ,title: &#39;replicator replication from localhost&#39;,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>200</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${repl}&#39;</span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>,db: replication ,addr: intra     ,auth: pwd   ,title: &#39;replicator replication from intranet&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>250</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${repl}&#39;</span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>,db: postgres    ,addr: intra     ,auth: pwd   ,title: &#39;replicator postgres db from intranet&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>300</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${monitor}&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: localhost ,auth: pwd   ,title: &#39;monitor from localhost with password&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>350</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${monitor}&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: infra     ,auth: pwd   ,title: &#39;monitor from infra host with password&#39;,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>400</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${admin}&#39;</span><span style=color:#f8f8f8>   </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: infra     ,auth: ssl   ,title: &#39;admin @ infra nodes with pwd &amp; ssl&#39;   ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>450</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${admin}&#39;</span><span style=color:#f8f8f8>   </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: world     ,auth: ssl   ,title: &#39;admin @ everywhere with ssl &amp; pwd&#39;    ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>500</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user: &#39;+dbrole_readonly&#39;,db: all    ,addr: localhost ,auth: pwd   ,title: &#39;pgbouncer read/write via local socket&#39;,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>550</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user: &#39;+dbrole_readonly&#39;,db: all    ,addr: intra     ,auth: pwd   ,title: &#39;read/write biz user via password&#39;     ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>600</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user: &#39;+dbrole_offline&#39; ,db: all    ,addr: intra     ,auth: pwd   ,title: &#39;allow etl offline tasks from intranet&#39;,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>650</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgb_default_hba_rules</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>            </span><span style=color:#8f5902;font-style:italic># pgbouncer default HBA rules, ordered by `order`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${dbsu}&#39;</span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>,db: pgbouncer   ,addr: local     ,auth: peer  ,title: &#39;dbsu local admin access with os ident&#39;,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>100</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user: &#39;all&#39;        ,db: all         ,addr: localhost ,auth: pwd   ,title: &#39;allow all user local access with pwd&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>150</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${monitor}&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>,db: pgbouncer   ,addr: intra     ,auth: pwd   ,title: &#39;monitor access via intranet with pwd&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>200</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${monitor}&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: world     ,auth: deny  ,title: &#39;reject all other monitor access addr&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>250</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${admin}&#39;</span><span style=color:#f8f8f8>   </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: intra     ,auth: pwd   ,title: &#39;admin access via intranet with pwd&#39;   ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>300</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${admin}&#39;</span><span style=color:#f8f8f8>   </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: world     ,auth: deny  ,title: &#39;reject all other admin access addr&#39;   ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>350</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user: &#39;all&#39;        ,db: all         ,addr: intra     ,auth: pwd   ,title: &#39;allow all user intra access with pwd&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>400</span>}<span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pg_provision-1><code>pg_provision</code></h3><p>Parameter Name: <code>pg_provision</code>, Type: <code>bool</code>, Level: <code>C</code></p><p>Complete the PostgreSQL cluster provisioning work defined in this section after the cluster is bootstrapped. Default value is <code>true</code>.</p><p>If disabled, the PostgreSQL cluster will not be provisioned. For some special &ldquo;PostgreSQL&rdquo; clusters, such as Greenplum, you can disable this option to skip the provisioning phase.</p><h3 id=pg_init><code>pg_init</code></h3><p>Parameter Name: <code>pg_init</code>, Type: <code>string</code>, Level: <code>G/C</code></p><p>Location of the shell script for initializing database templates, default is <code>pg-init</code>. This script is copied to <code>/pg/bin/pg-init</code> and then executed.</p><p>This script is located at <a href=https://github.com/pgsty/pigsty/blob/main/roles/pgsql/templates/pg-init><code>roles/pgsql/templates/pg-init</code></a></p><p>You can add your own logic to this script, or provide a new script in the <code>templates/</code> directory and set <code>pg_init</code> to the new script name. When using a custom script, please preserve the existing initialization logic.</p><h3 id=pg_default_roles><code>pg_default_roles</code></h3><p>Parameter Name: <code>pg_default_roles</code>, Type: <code>role[]</code>, Level: <code>G/C</code></p><p>Default roles and users in Postgres cluster.</p><p>Pigsty has a built-in role system. Please check <a href=/docs/concept/sec/ac/#role-system>PGSQL Access Control: Role System</a> for details.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_default_roles</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>                 </span><span style=color:#8f5902;font-style:italic># default roles and users in postgres cluster</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: dbrole_readonly  ,login: false ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>role for global read-only access     }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: dbrole_offline   ,login: false ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>role for restricted read-only access }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: dbrole_readwrite ,login: false ,roles: [dbrole_readonly]               ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>role for global read-write access }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: dbrole_admin     ,login: false ,roles: [pg_monitor, dbrole_readwrite]  ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>role for object creation }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: postgres     ,superuser: true                                          ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>system superuser }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: replicator ,replication: true  ,roles: [pg_monitor, dbrole_readonly]   ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>system replicator }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: dbuser_dba   ,superuser: true  ,roles: [dbrole_admin]  ,pgbouncer: true ,pool_mode: session, pool_connlimit: 16 , comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pgsql admin user }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: dbuser_monitor   ,roles: [pg_monitor, dbrole_readonly] ,pgbouncer: true ,parameters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#204a87;font-weight:700>log_min_duration_statement: 1000 } ,pool_mode: session ,pool_connlimit: 8 ,comment</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pgsql monitor user }</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pg_default_privileges><code>pg_default_privileges</code></h3><p>Parameter Name: <code>pg_default_privileges</code>, Type: <code>string[]</code>, Level: <code>G/C</code></p><p>Default privileges (<code>DEFAULT PRIVILEGE</code>) settings in each database:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_default_privileges</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>            </span><span style=color:#8f5902;font-style:italic># default privileges when admin user creates objects</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT USAGE      ON SCHEMAS   TO dbrole_readonly</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT SELECT     ON TABLES    TO dbrole_readonly</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT SELECT     ON SEQUENCES TO dbrole_readonly</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT EXECUTE    ON FUNCTIONS TO dbrole_readonly</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT USAGE      ON SCHEMAS   TO dbrole_offline</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT SELECT     ON TABLES    TO dbrole_offline</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT SELECT     ON SEQUENCES TO dbrole_offline</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT EXECUTE    ON FUNCTIONS TO dbrole_offline</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT INSERT     ON TABLES    TO dbrole_readwrite</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT UPDATE     ON TABLES    TO dbrole_readwrite</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT DELETE     ON TABLES    TO dbrole_readwrite</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT USAGE      ON SEQUENCES TO dbrole_readwrite</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT UPDATE     ON SEQUENCES TO dbrole_readwrite</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT TRUNCATE   ON TABLES    TO dbrole_admin</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT REFERENCES ON TABLES    TO dbrole_admin</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT TRIGGER    ON TABLES    TO dbrole_admin</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>GRANT CREATE     ON SCHEMAS   TO dbrole_admin</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>Pigsty provides corresponding default privilege settings based on the default role system. Please check <a href=/docs/concept/sec/ac/#default-privileges>PGSQL Access Control: Privileges</a> for details.</p><h3 id=pg_default_schemas><code>pg_default_schemas</code></h3><p>Parameter Name: <code>pg_default_schemas</code>, Type: <code>string[]</code>, Level: <code>G/C</code></p><p>Default schemas to create, default value is: <code>[ monitor ]</code>. This will create a <code>monitor</code> schema on all databases for placing various monitoring extensions, tables, views, and functions.</p><h3 id=pg_default_extensions><code>pg_default_extensions</code></h3><p>Parameter Name: <code>pg_default_extensions</code>, Type: <code>extension[]</code>, Level: <code>G/C</code></p><p>List of extensions to be created and enabled by default in all databases, default value:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_default_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># default extensions to be created</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pg_stat_statements ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pgstattuple        ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pg_buffercache     ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pageinspect        ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pg_prewarm         ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pg_visibility      ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pg_freespacemap    ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: postgres_fdw       ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public  }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: file_fdw           ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public  }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: btree_gist         ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public  }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: btree_gin          ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public  }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pg_trgm            ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public  }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: intagg             ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public  }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: intarray           ,schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public  }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_repack }</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>The only third-party extension is <code>pg_repack</code>, which is important for database maintenance. All other extensions are built-in PostgreSQL Contrib extensions.</p><p>Monitoring-related extensions are installed in the <code>monitor</code> schema by default, which is created by <a href=#pg_default_schemas><code>pg_default_schemas</code></a>.</p><h3 id=pg_reload><code>pg_reload</code></h3><p>Parameter Name: <code>pg_reload</code>, Type: <code>bool</code>, Level: <code>A</code></p><p>Reload PostgreSQL after HBA changes, default value is <code>true</code>.</p><p>Set it to <code>false</code> to disable automatic configuration reload when you want to check before applying HBA changes.</p><h3 id=pg_default_hba_rules><code>pg_default_hba_rules</code></h3><p>Parameter Name: <code>pg_default_hba_rules</code>, Type: <code>hba[]</code>, Level: <code>G/C</code></p><p>PostgreSQL host-based authentication rules, global default rules definition. Default value is:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_default_hba_rules</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>             </span><span style=color:#8f5902;font-style:italic># postgres default host-based authentication rules, ordered by `order`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${dbsu}&#39;</span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: local     ,auth: ident ,title: &#39;dbsu access via local os user ident&#39;  ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>100</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${dbsu}&#39;</span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>,db: replication ,addr: local     ,auth: ident ,title: &#39;dbsu replication from local os ident&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>150</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${repl}&#39;</span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>,db: replication ,addr: localhost ,auth: pwd   ,title: &#39;replicator replication from localhost&#39;,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>200</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${repl}&#39;</span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>,db: replication ,addr: intra     ,auth: pwd   ,title: &#39;replicator replication from intranet&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>250</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${repl}&#39;</span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>,db: postgres    ,addr: intra     ,auth: pwd   ,title: &#39;replicator postgres db from intranet&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>300</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${monitor}&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: localhost ,auth: pwd   ,title: &#39;monitor from localhost with password&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>350</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${monitor}&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: infra     ,auth: pwd   ,title: &#39;monitor from infra host with password&#39;,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>400</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${admin}&#39;</span><span style=color:#f8f8f8>   </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: infra     ,auth: ssl   ,title: &#39;admin @ infra nodes with pwd &amp; ssl&#39;   ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>450</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${admin}&#39;</span><span style=color:#f8f8f8>   </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: world     ,auth: ssl   ,title: &#39;admin @ everywhere with ssl &amp; pwd&#39;    ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>500</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user: &#39;+dbrole_readonly&#39;,db: all    ,addr: localhost ,auth: pwd   ,title: &#39;pgbouncer read/write via local socket&#39;,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>550</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user: &#39;+dbrole_readonly&#39;,db: all    ,addr: intra     ,auth: pwd   ,title: &#39;read/write biz user via password&#39;     ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>600</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user: &#39;+dbrole_offline&#39; ,db: all    ,addr: intra     ,auth: pwd   ,title: &#39;allow etl offline tasks from intranet&#39;,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>650</span>}<span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>The default value provides a fair security level for common scenarios. Please check <a href=/docs/pgsql/config/hba>PGSQL Authentication</a> for details.</p><p>This parameter is an array of <a href=/docs/pgsql/config/hba#define-hba>HBA</a> rule objects, identical in format to <a href=#pg_hba_rules><code>pg_hba_rules</code></a>.
It&rsquo;s recommended to configure unified <a href=#pg_default_hba_rules><code>pg_default_hba_rules</code></a> globally, and use <a href=#pg_hba_rules><code>pg_hba_rules</code></a> for additional customization on specific clusters. Rules from both parameters are applied sequentially, with the latter having higher priority.</p><h3 id=pgb_default_hba_rules><code>pgb_default_hba_rules</code></h3><p>Parameter Name: <code>pgb_default_hba_rules</code>, Type: <code>hba[]</code>, Level: <code>G/C</code></p><p>Pgbouncer default host-based authentication rules, array of <a href=/docs/pgsql/config/hba#define-hba>HBA</a> rule objects.</p><p>Default value provides a fair security level for common scenarios. Check <a href=/docs/pgsql/config/hba>PGSQL Authentication</a> for details.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgb_default_hba_rules</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>            </span><span style=color:#8f5902;font-style:italic># pgbouncer default host-based authentication rules, ordered by `order`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${dbsu}&#39;</span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>,db: pgbouncer   ,addr: local     ,auth: peer  ,title: &#39;dbsu local admin access with os ident&#39;,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>100</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user: &#39;all&#39;        ,db: all         ,addr: localhost ,auth: pwd   ,title: &#39;allow all user local access with pwd&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>150</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${monitor}&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>,db: pgbouncer   ,addr: intra     ,auth: pwd   ,title: &#39;monitor access via intranet with pwd&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>200</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${monitor}&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: world     ,auth: deny  ,title: &#39;reject all other monitor access addr&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>250</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${admin}&#39;</span><span style=color:#f8f8f8>   </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: intra     ,auth: pwd   ,title: &#39;admin access via intranet with pwd&#39;   ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>300</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;${admin}&#39;</span><span style=color:#f8f8f8>   </span><span style=color:#204a87;font-weight:700>,db: all         ,addr: world     ,auth: deny  ,title: &#39;reject all other admin access addr&#39;   ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>350</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#204a87;font-weight:700>user: &#39;all&#39;        ,db: all         ,addr: intra     ,auth: pwd   ,title: &#39;allow all user intra access with pwd&#39; ,order</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>400</span>}<span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>The default Pgbouncer HBA rules are simple:</p><ol><li>Allow login from <strong>localhost</strong> with password</li><li>Allow login from intranet with password</li></ol><p>Users can customize according to their own needs.</p><p>This parameter is identical in format to <a href=#pgb_hba_rules><code>pgb_hba_rules</code></a>. It&rsquo;s recommended to configure unified <a href=#pgb_default_hba_rules><code>pgb_default_hba_rules</code></a> globally, and use <a href=#pgb_hba_rules><code>pgb_hba_rules</code></a> for additional customization on specific clusters. Rules from both parameters are applied sequentially, with the latter having higher priority.</p><hr><h2 id=pg_backup><code>PG_BACKUP</code></h2><p>This section defines variables for <a href=https://pgbackrest.org/>pgBackRest</a>, which is used for PGSQL Point-in-Time Recovery (PITR).</p><p>Check <a href=/docs/pgsql/backup>PGSQL Backup & PITR</a> for detailed information.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbackrest_enabled</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>          </span><span style=color:#8f5902;font-style:italic># enable pgBackRest on pgsql host?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbackrest_clean</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>            </span><span style=color:#8f5902;font-style:italic># remove pg backup data during init?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbackrest_log_dir</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/pg/log/pgbackrest</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># pgbackrest log dir, default is `/pg/log/pgbackrest`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbackrest_method: local          # pgbackrest repo method</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>local, minio, [user defined...]</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbackrest_init_backup</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># perform a full backup immediately after pgbackrest init?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbackrest_repo:                  # pgbackrest repo</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>https://pgbackrest.org/configuration.html#section-repository</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>local</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>                          </span><span style=color:#8f5902;font-style:italic># default pgbackrest repo with local posix filesystem</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/pg/backup             </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># local backup directory, default is `/pg/backup`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>retention_full_type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>count   </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># retain full backup by count</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>retention_full</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#f8f8f8>             </span><span style=color:#8f5902;font-style:italic># keep at most 3 full backups when using local filesystem repo, at least 2</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>minio</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>                          </span><span style=color:#8f5902;font-style:italic># optional minio repo for pgbackrest</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>s3                     </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio is s3-compatible, so use s3</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>s3_endpoint</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>sss.pigsty      </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio endpoint domain, default is `sss.pigsty`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>s3_region</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>us-east-1         </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio region, default is us-east-1, not effective for minio</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>s3_bucket</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pgsql             </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio bucket name, default is `pgsql`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>s3_key</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pgbackrest           </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio user access key for pgbackrest</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>s3_key_secret</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>S3User.Backup </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio user secret key for pgbackrest</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>s3_uri_style</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>path           </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># use path style uri for minio, instead of host style</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/pgbackrest            </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio backup path, default is `/pgbackrest`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>storage_port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>9000</span><span style=color:#f8f8f8>            </span><span style=color:#8f5902;font-style:italic># minio port, default is 9000</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>storage_ca_file</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/etc/pki/ca.crt </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio ca file path, default is `/etc/pki/ca.crt`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>block</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>y</span><span style=color:#f8f8f8>                      </span><span style=color:#8f5902;font-style:italic># enable block-level incremental backup (pgBackRest 2.46+)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>bundle</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>y</span><span style=color:#f8f8f8>                     </span><span style=color:#8f5902;font-style:italic># bundle small files into one file</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>bundle_limit</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>20MiB          </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># object storage file bundling threshold, default 20MiB</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>bundle_size</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>128MiB          </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># object storage file bundling target size, default 128MiB</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>cipher_type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>aes-256-cbc     </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># enable AES encryption for remote backup repo</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>cipher_pass</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pgBackRest      </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># AES encryption password, default is &#39;pgBackRest&#39;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>retention_full_type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>time    </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># retain full backup by time on minio repo</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>retention_full</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>14</span><span style=color:#f8f8f8>            </span><span style=color:#8f5902;font-style:italic># keep full backups from the past 14 days</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pgbackrest_enabled><code>pgbackrest_enabled</code></h3><p>Parameter Name: <code>pgbackrest_enabled</code>, Type: <code>bool</code>, Level: <code>C</code></p><p>Enable pgBackRest on PGSQL nodes? Default value is: <code>true</code></p><p>When using local filesystem backup repository (<code>local</code>), only the cluster primary will actually enable <code>pgbackrest</code>. Other instances will only initialize an empty repository.</p><h3 id=pgbackrest_clean><code>pgbackrest_clean</code></h3><p>Parameter Name: <code>pgbackrest_clean</code>, Type: <code>bool</code>, Level: <code>C</code></p><p>Remove PostgreSQL backup data during initialization? Default value is <code>true</code>.</p><h3 id=pgbackrest_log_dir><code>pgbackrest_log_dir</code></h3><p>Parameter Name: <code>pgbackrest_log_dir</code>, Type: <code>path</code>, Level: <code>C</code></p><p>pgBackRest log directory, default is <code>/pg/log/pgbackrest</code>. The Vector log agent references this parameter for log collection.</p><h3 id=pgbackrest_method><code>pgbackrest_method</code></h3><p>Parameter Name: <code>pgbackrest_method</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>pgBackRest repository method: default options are <code>local</code>, <code>minio</code>, or other user-defined methods, default is <code>local</code>.</p><p>This parameter determines which repository to use for pgBackRest. All available repository methods are defined in <a href=#pgbackrest_repo><code>pgbackrest_repo</code></a>.</p><p>Pigsty uses the <code>local</code> backup repository by default, which creates a backup repository in the <code>/pg/backup</code> directory on the primary instance. The underlying storage path is specified by <a href=#pg_fs_backup><code>pg_fs_backup</code></a>.</p><h3 id=pgbackrest_init_backup><code>pgbackrest_init_backup</code></h3><p>Parameter Name: <code>pgbackrest_init_backup</code>, Type: <code>bool</code>, Level: <code>C</code></p><p>Perform a full backup immediately after pgBackRest initialization completes? Default is <code>true</code>.</p><p>This operation is only executed on cluster primary and non-cascading replicas (no <a href=#pg_upstream><code>pg_upstream</code></a> defined). Enabling this parameter ensures you have a base backup immediately after cluster initialization for recovery when needed.</p><h3 id=pgbackrest_repo><code>pgbackrest_repo</code></h3><p>Parameter Name: <code>pgbackrest_repo</code>, Type: <code>dict</code>, Level: <code>G/C</code></p><p>pgBackRest repository documentation: <a href=https://pgbackrest.org/configuration.html#section-repository>https://pgbackrest.org/configuration.html#section-repository</a></p><p>Default value includes two repository methods: <code>local</code> and <code>minio</code>, defined as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbackrest_repo:                  # pgbackrest repo</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>https://pgbackrest.org/configuration.html#section-repository</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>local</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>                          </span><span style=color:#8f5902;font-style:italic># default pgbackrest repo with local posix filesystem</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/pg/backup             </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># local backup directory, default is `/pg/backup`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>retention_full_type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>count   </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># retain full backup by count</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>retention_full</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#f8f8f8>             </span><span style=color:#8f5902;font-style:italic># keep at most 3 full backups when using local filesystem repo, at least 2</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>minio</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>                          </span><span style=color:#8f5902;font-style:italic># optional minio repo for pgbackrest</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>s3                     </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio is s3-compatible, so use s3</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>s3_endpoint</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>sss.pigsty      </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio endpoint domain, default is `sss.pigsty`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>s3_region</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>us-east-1         </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio region, default is us-east-1, not effective for minio</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>s3_bucket</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pgsql             </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio bucket name, default is `pgsql`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>s3_key</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pgbackrest           </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio user access key for pgbackrest</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>s3_key_secret</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>S3User.Backup </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio user secret key for pgbackrest</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>s3_uri_style</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>path           </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># use path style uri for minio, instead of host style</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>path</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/pgbackrest            </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio backup path, default is `/pgbackrest`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>storage_port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>9000</span><span style=color:#f8f8f8>            </span><span style=color:#8f5902;font-style:italic># minio port, default is 9000</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>storage_ca_file</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/etc/pki/ca.crt </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># minio ca file path, default is `/etc/pki/ca.crt`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>block</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>y</span><span style=color:#f8f8f8>                      </span><span style=color:#8f5902;font-style:italic># enable block-level incremental backup (pgBackRest 2.46+)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>bundle</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>y</span><span style=color:#f8f8f8>                     </span><span style=color:#8f5902;font-style:italic># bundle small files into one file</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>bundle_limit</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>20MiB          </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># object storage file bundling threshold, default 20MiB</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>bundle_size</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>128MiB          </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># object storage file bundling target size, default 128MiB</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>cipher_type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>aes-256-cbc     </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># enable AES encryption for remote backup repo</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>cipher_pass</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pgBackRest      </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># AES encryption password, default is &#39;pgBackRest&#39;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>retention_full_type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>time    </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># retain full backup by time on minio repo</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>retention_full</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>14</span><span style=color:#f8f8f8>            </span><span style=color:#8f5902;font-style:italic># keep full backups from the past 14 days</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>You can define new backup repositories, such as using AWS S3, GCP, or other cloud providers&rsquo; S3-compatible storage services.</p><p><strong>Block Incremental Backup</strong>: Starting from pgBackRest 2.46, the <code>block: y</code> option enables block-level incremental backup.
This means during incremental backups, pgBackRest only backs up changed data blocks instead of entire changed files, significantly reducing backup data volume and backup time.
This feature is particularly useful for large databases, and it&rsquo;s recommended to enable this option on object storage repositories.</p><hr><h2 id=pg_access><code>PG_ACCESS</code></h2><p>This section handles database access paths, including:</p><ul><li>Deploy Pgbouncer connection pooler on each PGSQL node and set default behavior</li><li>Publish service ports through local or dedicated haproxy nodes</li><li>Bind optional L2 VIP and register DNS records</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbouncer_enabled</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>           </span><span style=color:#8f5902;font-style:italic># if disabled, pgbouncer will not be launched on pgsql host</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbouncer_port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>6432</span><span style=color:#f8f8f8>              </span><span style=color:#8f5902;font-style:italic># pgbouncer listen port, 6432 by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbouncer_log_dir</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>/pg/log/pgbouncer </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># pgbouncer log dir, `/pg/log/pgbouncer` by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbouncer_auth_query</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8>       </span><span style=color:#8f5902;font-style:italic># query postgres to retrieve unlisted business users?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbouncer_poolmode: transaction   # pooling mode</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>transaction,session,statement, transaction by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbouncer_sslmode</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>disable       </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># pgbouncer client ssl mode, disable by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbouncer_ignore_param</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span><span style=color:#000>extra_float_digits, application_name, TimeZone, DateStyle, IntervalStyle, search_path ]</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_weight</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8>          </span><span style=color:#8f5902;font-style:italic>#INSTANCE # relative load balance weight in service, 100 by default, 0-255</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_service_provider</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#f8f8f8>           </span><span style=color:#8f5902;font-style:italic># dedicate haproxy node group name, or empty string for local nodes by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_default_service_dest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pgbouncer</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># default service destination if svc.dest=&#39;default&#39;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_default_services</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>              </span><span style=color:#8f5902;font-style:italic># postgres default service definitions</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: primary ,port: 5433 ,dest: default  ,check: /primary   ,selector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[]&#34;</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: replica ,port: 5434 ,dest: default  ,check: /read-only ,selector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[]&#34;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>, backup</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[? pg_role == `primary` || pg_role == `offline` ]&#34;</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: default ,port: 5436 ,dest: postgres ,check: /primary   ,selector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[]&#34;</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: offline ,port: 5438 ,dest: postgres ,check: /replica   ,selector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[? pg_role == `offline` || pg_offline_query ]&#34;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>, backup</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[? pg_role == `replica` &amp;&amp; !pg_offline_query]&#34;</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_vip_enabled</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8>             </span><span style=color:#8f5902;font-style:italic># enable a l2 vip for pgsql primary? false by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_vip_address</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>127.0.0.1</span><span style=color:#000>/24     </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># vip address in `&lt;ipv4&gt;/&lt;mask&gt;` format, require if vip is enabled</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_vip_interface</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>eth0           </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># vip network interface to listen, eth0 by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_dns_suffix</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#f8f8f8>                 </span><span style=color:#8f5902;font-style:italic># pgsql dns suffix, &#39;&#39; by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_dns_target</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>auto              </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># auto, primary, vip, none, or ad hoc ip</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pgbouncer_enabled><code>pgbouncer_enabled</code></h3><p>Parameter Name: <code>pgbouncer_enabled</code>, Type: <code>bool</code>, Level: <code>C</code></p><p>Default value is <code>true</code>. If disabled, the Pgbouncer connection pooler will not be configured on PGSQL nodes.</p><h3 id=pgbouncer_port><code>pgbouncer_port</code></h3><p>Parameter Name: <code>pgbouncer_port</code>, Type: <code>port</code>, Level: <code>C</code></p><p>Pgbouncer listen port, default is <code>6432</code>.</p><h3 id=pgbouncer_log_dir><code>pgbouncer_log_dir</code></h3><p>Parameter Name: <code>pgbouncer_log_dir</code>, Type: <code>path</code>, Level: <code>C</code></p><p>Pgbouncer log directory, default is <code>/pg/log/pgbouncer</code>. The Vector log agent collects Pgbouncer logs based on this parameter.</p><h3 id=pgbouncer_auth_query><code>pgbouncer_auth_query</code></h3><p>Parameter Name: <code>pgbouncer_auth_query</code>, Type: <code>bool</code>, Level: <code>C</code></p><p>Allow Pgbouncer to query PostgreSQL to allow users not explicitly listed to access PostgreSQL through the connection pool? Default value is <code>false</code>.</p><p>If enabled, pgbouncer users will authenticate against the postgres database using <code>SELECT username, password FROM monitor.pgbouncer_auth($1)</code>. Otherwise, only business users with <code>pgbouncer: true</code> are allowed to connect to the Pgbouncer connection pool.</p><h3 id=pgbouncer_poolmode><code>pgbouncer_poolmode</code></h3><p>Parameter Name: <code>pgbouncer_poolmode</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>Pgbouncer connection pool pooling mode: <code>transaction</code>, <code>session</code>, <code>statement</code>, default is <code>transaction</code>.</p><ul><li><code>session</code>: Session-level pooling with best feature compatibility.</li><li><code>transaction</code>: Transaction-level pooling with better performance (many small connections), may break some session-level features like <code>NOTIFY/LISTEN</code>, etc.</li><li><code>statements</code>: Statement-level pooling for simple read-only queries.</li></ul><p>If your application has feature compatibility issues, consider changing this parameter to <code>session</code>.</p><h3 id=pgbouncer_sslmode><code>pgbouncer_sslmode</code></h3><p>Parameter Name: <code>pgbouncer_sslmode</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>Pgbouncer client SSL mode, default is <code>disable</code>.</p><p>Note that enabling SSL may have a significant performance impact on your pgbouncer.</p><ul><li><code>disable</code>: Ignore if client requests TLS (default)</li><li><code>allow</code>: Use TLS if client requests it. Use plain TCP if not. Does not verify client certificate.</li><li><code>prefer</code>: Same as allow.</li><li><code>require</code>: Client must use TLS. Reject client connection if not. Does not verify client certificate.</li><li><code>verify-ca</code>: Client must use TLS with a valid client certificate.</li><li><code>verify-full</code>: Same as verify-ca.</li></ul><h3 id=pgbouncer_ignore_param><code>pgbouncer_ignore_param</code></h3><p>Parameter Name: <code>pgbouncer_ignore_param</code>, Type: <code>string[]</code>, Level: <code>C</code></p><p>List of startup parameters ignored by PgBouncer, default value is:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span><span style=color:#000>extra_float_digits, application_name, TimeZone, DateStyle, IntervalStyle, search_path ]</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>These parameters are configured in the <code>ignore_startup_parameters</code> option in the PgBouncer configuration file. When clients set these parameters during connection, PgBouncer will not create new connections due to parameter mismatch in the connection pool.</p><p>This allows different clients to use the same connection pool even if they set different values for these parameters. This parameter was added in Pigsty v3.5.</p><hr><h3 id=pg_weight><code>pg_weight</code></h3><p>Parameter Name: <code>pg_weight</code>, Type: <code>int</code>, Level: <code>I</code></p><p>Relative load balancing weight in service, default is 100, range 0-255.</p><p>Default value: <code>100</code>. You must define it in instance variables and <a href=/docs/pgsql/admin#reload-service>reload service</a> for it to take effect.</p><h3 id=pg_service_provider><code>pg_service_provider</code></h3><p>Parameter Name: <code>pg_service_provider</code>, Type: <code>string</code>, Level: <code>G/C</code></p><p>Dedicated haproxy node group name, or empty string for local nodes by default.</p><p>If specified, PostgreSQL services will be registered to the dedicated haproxy node group instead of the current PGSQL cluster nodes.</p><p>Remember to allocate <strong>unique</strong> ports for each service on the dedicated haproxy nodes!</p><p>For example, if we define the following parameters on a 3-node <code>pg-test</code> cluster:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_service_provider</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>infra      </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># use load balancer on group `infra`</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_default_services</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>             </span><span style=color:#8f5902;font-style:italic># alloc port 10001 and 10002 for pg-test primary/replica service</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: primary ,port: 10001 ,dest: postgres  ,check: /primary   ,selector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[]&#34;</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: replica ,port: 10002 ,dest: postgres  ,check: /read-only ,selector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[]&#34;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>, backup</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[? pg_role == `primary` || pg_role == `offline` ]&#34;</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pg_default_service_dest><code>pg_default_service_dest</code></h3><p>Parameter Name: <code>pg_default_service_dest</code>, Type: <code>enum</code>, Level: <code>G/C</code></p><p>When defining a <a href=/docs/pgsql/service/#define-service>service</a>, if <code>svc.dest='default'</code>, this parameter will be used as the default value.</p><p>Default value: <code>pgbouncer</code>, meaning the 5433 primary service and 5434 replica service will route traffic to pgbouncer by default.</p><p>If you don&rsquo;t want to use pgbouncer, set it to <code>postgres</code>. Traffic will be routed directly to postgres.</p><h3 id=pg_default_services><code>pg_default_services</code></h3><p>Parameter Name: <code>pg_default_services</code>, Type: <code>service[]</code>, Level: <code>G/C</code></p><p>Postgres default service definitions.</p><p>Default value is four default service definitions, as described in <a href=/docs/pgsql/service/#service-overview>PGSQL Service</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_default_services</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>               </span><span style=color:#8f5902;font-style:italic># postgres default service definitions</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: primary ,port: 5433 ,dest: default  ,check: /primary   ,selector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[]&#34;</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: replica ,port: 5434 ,dest: default  ,check: /read-only ,selector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[]&#34;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>, backup</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[? pg_role == `primary` || pg_role == `offline` ]&#34;</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: default ,port: 5436 ,dest: postgres ,check: /primary   ,selector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[]&#34;</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: offline ,port: 5438 ,dest: postgres ,check: /replica   ,selector</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[? pg_role == `offline` || pg_offline_query ]&#34;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>, backup</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;[? pg_role == `replica` &amp;&amp; !pg_offline_query]&#34;</span>}<span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pg_vip_enabled><code>pg_vip_enabled</code></h3><p>Parameter Name: <code>pg_vip_enabled</code>, Type: <code>bool</code>, Level: <code>C</code></p><p>Enable L2 VIP for PGSQL cluster? Default value is <code>false</code>, meaning no L2 VIP will be created.</p><p>When L2 VIP is enabled, a VIP will be bound to the cluster primary instance node, managed by <code>vip-manager</code> based on data in <code>etcd</code>.</p><p>L2 VIP can only be used within the same L2 network, which may impose additional constraints on your network topology.</p><h3 id=pg_vip_address><code>pg_vip_address</code></h3><p>Parameter Name: <code>pg_vip_address</code>, Type: <code>cidr4</code>, Level: <code>C</code></p><p>VIP address in <code>&lt;ipv4>/&lt;mask></code> format is required if VIP is enabled.</p><p>Default value: <code>127.0.0.1/24</code>. This value consists of two parts: <code>ipv4</code> and <code>mask</code>, separated by <code>/</code>.</p><h3 id=pg_vip_interface><code>pg_vip_interface</code></h3><p>Parameter Name: <code>pg_vip_interface</code>, Type: <code>string</code>, Level: <code>C/I</code></p><p>VIP network interface to listen, <code>eth0</code> by default.</p><p>It should be your node&rsquo;s primary network interface name, i.e., the IP address used in your inventory.</p><p>If your nodes have multiple network interfaces with different names, you can override it in instance variables:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg-test</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>hosts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>10.10.10.11</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#204a87;font-weight:700>pg_seq: 1, pg_role: replica ,pg_vip_interface</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>eth0 }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>10.10.10.12</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#204a87;font-weight:700>pg_seq: 2, pg_role: primary ,pg_vip_interface</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>eth1 }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>10.10.10.13</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#204a87;font-weight:700>pg_seq: 3, pg_role: replica ,pg_vip_interface</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>eth2 }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>pg_vip_enabled</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>          </span><span style=color:#8f5902;font-style:italic># enable L2 VIP for this cluster, binds to primary by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>pg_vip_address: 10.10.10.3/24 # L2 network CIDR: 10.10.10.0/24, vip address</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>10.10.10.3</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># pg_vip_interface: eth1      # if your nodes have a unified interface, you can define it here</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pg_dns_suffix><code>pg_dns_suffix</code></h3><p>Parameter Name: <code>pg_dns_suffix</code>, Type: <code>string</code>, Level: <code>C</code></p><p>PostgreSQL DNS name suffix, default is empty string.</p><p>By default, the PostgreSQL cluster name is registered as a DNS domain in <code>dnsmasq</code> on Infra nodes for external resolution.</p><p>You can specify a domain suffix with this parameter, which will use <code>{{ pg_cluster }}{{ pg_dns_suffix }}</code> as the cluster DNS name.</p><p>For example, if you set <code>pg_dns_suffix</code> to <code>.db.vip.company.tld</code>, the <code>pg-test</code> cluster DNS name will be <code>pg-test.db.vip.company.tld</code>.</p><h3 id=pg_dns_target><code>pg_dns_target</code></h3><p>Parameter Name: <code>pg_dns_target</code>, Type: <code>enum</code>, Level: <code>C</code></p><p>Could be: <code>auto</code>, <code>primary</code>, <code>vip</code>, <code>none</code>, or an ad hoc IP address, which will be the target IP address of cluster DNS record.</p><p>Default value: <code>auto</code>, which will bind to <code>pg_vip_address</code> if <code>pg_vip_enabled</code>, or fallback to cluster primary instance IP address.</p><ul><li><code>vip</code>: bind to <code>pg_vip_address</code></li><li><code>primary</code>: resolve to cluster primary instance IP address</li><li><code>auto</code>: resolve to <code>pg_vip_address</code> if <code>pg_vip_enabled</code>, or fallback to cluster primary instance IP address</li><li><code>none</code>: do not bind to any IP address</li><li><code>&lt;ipv4></code>: bind to the given IP address</li></ul><hr><h2 id=pg_monitor><code>PG_MONITOR</code></h2><p>The PG_MONITOR group parameters are used to monitor the status of PostgreSQL databases, Pgbouncer connection pools, and pgBackRest backup systems.</p><p>This parameter group defines three Exporter configurations: <code>pg_exporter</code> for monitoring PostgreSQL, <code>pgbouncer_exporter</code> for monitoring connection pools, and <code>pgbackrest_exporter</code> for monitoring backup status.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_exporter_enabled</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>              </span><span style=color:#8f5902;font-style:italic># enable pg_exporter on pgsql host?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_exporter_config</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_exporter.yml   </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># pg_exporter config file name</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_exporter_cache_ttls</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;1,10,60,300&#39;</span><span style=color:#f8f8f8>  </span><span style=color:#8f5902;font-style:italic># pg_exporter collector ttl stages (seconds), default is &#39;1,10,60,300&#39;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_exporter_port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>9630</span><span style=color:#f8f8f8>                 </span><span style=color:#8f5902;font-style:italic># pg_exporter listen port, default is 9630</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_exporter_params</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;sslmode=disable&#39;</span><span style=color:#f8f8f8>  </span><span style=color:#8f5902;font-style:italic># extra url parameters for pg_exporter dsn</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_exporter_url</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#f8f8f8>                    </span><span style=color:#8f5902;font-style:italic># if specified, will override auto-generated pg dsn</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_exporter_auto_discovery</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>       </span><span style=color:#8f5902;font-style:italic># enable auto database discovery? enabled by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_exporter_exclude_database</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;template0,template1,postgres&#39;</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># csv list of databases not monitored during auto-discovery</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_exporter_include_database</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#f8f8f8>       </span><span style=color:#8f5902;font-style:italic># csv list of databases monitored during auto-discovery</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_exporter_connect_timeout</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>200</span><span style=color:#f8f8f8>       </span><span style=color:#8f5902;font-style:italic># pg_exporter connection timeout (ms), default is 200</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_exporter_options</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#f8f8f8>                </span><span style=color:#8f5902;font-style:italic># extra options to override pg_exporter</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbouncer_exporter_enabled</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>       </span><span style=color:#8f5902;font-style:italic># enable pgbouncer_exporter on pgsql host?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbouncer_exporter_port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>9631</span><span style=color:#f8f8f8>          </span><span style=color:#8f5902;font-style:italic># pgbouncer_exporter listen port, default is 9631</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbouncer_exporter_url</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#f8f8f8>             </span><span style=color:#8f5902;font-style:italic># if specified, will override auto-generated pgbouncer dsn</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbouncer_exporter_options</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#f8f8f8>         </span><span style=color:#8f5902;font-style:italic># extra options to override pgbouncer_exporter</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbackrest_exporter_enabled</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># enable pgbackrest_exporter on pgsql host?</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbackrest_exporter_port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>9854</span><span style=color:#f8f8f8>         </span><span style=color:#8f5902;font-style:italic># pgbackrest_exporter listen port, default is 9854</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pgbackrest_exporter_options</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;&#39;</span><span style=color:#f8f8f8>        </span><span style=color:#8f5902;font-style:italic># extra options to override pgbackrest_exporter</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pg_exporter_enabled><code>pg_exporter_enabled</code></h3><p>Parameter Name: <code>pg_exporter_enabled</code>, Type: <code>bool</code>, Level: <code>C</code></p><p>Enable pg_exporter on PGSQL nodes? Default value is: <code>true</code>.</p><p>PG Exporter is used to monitor PostgreSQL database instances. Set to <code>false</code> if you don&rsquo;t want to install pg_exporter.</p><h3 id=pg_exporter_config><code>pg_exporter_config</code></h3><p>Parameter Name: <code>pg_exporter_config</code>, Type: <code>string</code>, Level: <code>C</code></p><p>pg_exporter configuration file name, both PG Exporter and PGBouncer Exporter will use this configuration file. Default value: <code>pg_exporter.yml</code>.</p><p>If you want to use a custom configuration file, you can define it here. Your custom configuration file should be placed in <code>files/&lt;name>.yml</code>.</p><p>For example, when you want to monitor a remote PolarDB database instance, you can use the sample configuration: <code>files/polar_exporter.yml</code>.</p><h3 id=pg_exporter_cache_ttls><code>pg_exporter_cache_ttls</code></h3><p>Parameter Name: <code>pg_exporter_cache_ttls</code>, Type: <code>string</code>, Level: <code>C</code></p><p>pg_exporter collector TTL stages (seconds), default is &lsquo;1,10,60,300&rsquo;.</p><p>Default value: <code>1,10,60,300</code>, which will use different TTL values for different metric collectors: 1s, 10s, 60s, 300s.</p><p>PG Exporter has a built-in caching mechanism to avoid the improper impact of multiple Prometheus scrapes on the database. All metric collectors are divided into four categories by TTL:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>ttl_fast</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;{{ pg_exporter_cache_ttls.split(&#39;,&#39;)[0]|int }}&#34;</span><span style=color:#f8f8f8>         </span><span style=color:#8f5902;font-style:italic># critical queries</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>ttl_norm</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;{{ pg_exporter_cache_ttls.split(&#39;,&#39;)[1]|int }}&#34;</span><span style=color:#f8f8f8>         </span><span style=color:#8f5902;font-style:italic># common queries</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>ttl_slow</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;{{ pg_exporter_cache_ttls.split(&#39;,&#39;)[2]|int }}&#34;</span><span style=color:#f8f8f8>         </span><span style=color:#8f5902;font-style:italic># slow queries (e.g table size)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>ttl_slowest</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;{{ pg_exporter_cache_ttls.split(&#39;,&#39;)[3]|int }}&#34;</span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># ver slow queries (e.g bloat)</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>For example, with default configuration, liveness metrics are cached for at most <code>1s</code>, most common metrics are cached for <code>10s</code> (should match the monitoring scrape interval <a href=/docs/infra/param#victoria_scrape_interval><code>victoria_scrape_interval</code></a>).
A few slow-changing queries have <code>60s</code> TTL, and very few high-overhead monitoring queries have <code>300s</code> TTL.</p><h3 id=pg_exporter_port><code>pg_exporter_port</code></h3><p>Parameter Name: <code>pg_exporter_port</code>, Type: <code>port</code>, Level: <code>C</code></p><p>pg_exporter listen port, default value is: <code>9630</code></p><h3 id=pg_exporter_params><code>pg_exporter_params</code></h3><p>Parameter Name: <code>pg_exporter_params</code>, Type: <code>string</code>, Level: <code>C</code></p><p>Extra URL path parameters in the DSN used by pg_exporter.</p><p>Default value: <code>sslmode=disable</code>, which disables SSL for monitoring connections (since local unix sockets are used by default).</p><h3 id=pg_exporter_url><code>pg_exporter_url</code></h3><p>Parameter Name: <code>pg_exporter_url</code>, Type: <code>pgurl</code>, Level: <code>C</code></p><p>If specified, will override the auto-generated PostgreSQL DSN and use the specified DSN to connect to PostgreSQL. Default value is empty string.</p><p>If not specified, PG Exporter will use the following connection string to access PostgreSQL by default:</p><pre tabindex=0><code>postgres://{{ pg_monitor_username }}:{{ pg_monitor_password }}@{{ pg_host }}:{{ pg_port }}/postgres{% if pg_exporter_params != &#39;&#39; %}?{{ pg_exporter_params }}{% endif %}
</code></pre><p>Use this parameter when you want to monitor a remote PostgreSQL instance, or need to use different monitoring user/password or configuration options.</p><h3 id=pg_exporter_auto_discovery><code>pg_exporter_auto_discovery</code></h3><p>Parameter Name: <code>pg_exporter_auto_discovery</code>, Type: <code>bool</code>, Level: <code>C</code></p><p>Enable auto database discovery? Enabled by default: <code>true</code>.</p><p>By default, PG Exporter connects to the database specified in the DSN (default is the admin database <code>postgres</code>) to collect global metrics. If you want to collect metrics from all business databases, enable this option.
PG Exporter will automatically discover all databases in the target PostgreSQL instance and collect <strong>database-level monitoring metrics</strong> from these databases.</p><h3 id=pg_exporter_exclude_database><code>pg_exporter_exclude_database</code></h3><p>Parameter Name: <code>pg_exporter_exclude_database</code>, Type: <code>string</code>, Level: <code>C</code></p><p>If database auto-discovery is enabled (enabled by default), databases in this parameter&rsquo;s list will not be monitored.
Default value is: <code>template0,template1,postgres</code>, meaning the admin database <code>postgres</code> and template databases are excluded from auto-monitoring.</p><p>As an exception, the database specified in the DSN is not affected by this parameter. For example, if PG Exporter connects to the <code>postgres</code> database, it will be monitored even if <code>postgres</code> is in this list.</p><h3 id=pg_exporter_include_database><code>pg_exporter_include_database</code></h3><p>Parameter Name: <code>pg_exporter_include_database</code>, Type: <code>string</code>, Level: <code>C</code></p><p>If database auto-discovery is enabled (enabled by default), only databases in this parameter&rsquo;s list will be monitored. Default value is empty string, meaning this feature is not enabled.</p><p>The parameter format is a comma-separated list of database names, e.g., <code>db1,db2,db3</code>.</p><p>This parameter has higher priority than <a href=#pg_exporter_exclude_database><code>pg_exporter_exclude_database</code></a>, acting as a whitelist mode. Use this parameter if you only want to monitor specific databases.</p><h3 id=pg_exporter_connect_timeout><code>pg_exporter_connect_timeout</code></h3><p>Parameter Name: <code>pg_exporter_connect_timeout</code>, Type: <code>int</code>, Level: <code>C</code></p><p>pg_exporter connection timeout (milliseconds), default is <code>200</code> (in milliseconds).</p><p>How long will PG Exporter wait when trying to connect to a PostgreSQL database? Beyond this time, PG Exporter will give up the connection and report an error.</p><p>The default value of 200ms is sufficient for most scenarios (e.g., same availability zone monitoring), but if your monitored remote PostgreSQL is on another continent, you may need to increase this value to avoid connection timeouts.</p><h3 id=pg_exporter_options><code>pg_exporter_options</code></h3><p>Parameter Name: <code>pg_exporter_options</code>, Type: <code>arg</code>, Level: <code>C</code></p><p>Command line arguments passed to PG Exporter, default value is: <code>""</code> empty string.</p><p>When using empty string, the default command arguments will be used:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>{</span>% <span style=color:#204a87;font-weight:700>if</span> pg_exporter_port !<span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;&#39;</span> %<span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000>PG_EXPORTER_OPTS</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;--web.listen-address=:{{ pg_exporter_port }} {{ pg_exporter_options }}&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>{</span>% <span style=color:#204a87;font-weight:700>else</span> %<span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000>PG_EXPORTER_OPTS</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;--web.listen-address=:{{ pg_exporter_port }} --log.level=info&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>{</span>% endif %<span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div><p>Note: Do not override the <a href=#pg_exporter_port><code>pg_exporter_port</code></a> port configuration in this parameter.</p><h3 id=pgbouncer_exporter_enabled><code>pgbouncer_exporter_enabled</code></h3><p>Parameter Name: <code>pgbouncer_exporter_enabled</code>, Type: <code>bool</code>, Level: <code>C</code></p><p>Enable pgbouncer_exporter on PGSQL nodes? Default value is: <code>true</code>.</p><h3 id=pgbouncer_exporter_port><code>pgbouncer_exporter_port</code></h3><p>Parameter Name: <code>pgbouncer_exporter_port</code>, Type: <code>port</code>, Level: <code>C</code></p><p>pgbouncer_exporter listen port, default value is: <code>9631</code></p><h3 id=pgbouncer_exporter_url><code>pgbouncer_exporter_url</code></h3><p>Parameter Name: <code>pgbouncer_exporter_url</code>, Type: <code>pgurl</code>, Level: <code>C</code></p><p>If specified, will override the auto-generated pgbouncer DSN and use the specified DSN to connect to pgbouncer. Default value is empty string.</p><p>If not specified, Pgbouncer Exporter will use the following connection string to access Pgbouncer by default:</p><pre tabindex=0><code>postgres://{{ pg_monitor_username }}:{{ pg_monitor_password }}@:{{ pgbouncer_port }}/pgbouncer?host={{ pg_localhost }}&amp;sslmode=disable
</code></pre><p>Use this parameter when you want to monitor a remote Pgbouncer instance, or need to use different monitoring user/password or configuration options.</p><h3 id=pgbouncer_exporter_options><code>pgbouncer_exporter_options</code></h3><p>Parameter Name: <code>pgbouncer_exporter_options</code>, Type: <code>arg</code>, Level: <code>C</code></p><p>Command line arguments passed to Pgbouncer Exporter, default value is: <code>""</code> empty string.</p><p>When using empty string, the default command arguments will be used:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>{</span>% <span style=color:#204a87;font-weight:700>if</span> pgbouncer_exporter_options !<span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#39;&#39;</span> %<span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000>PG_EXPORTER_OPTS</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;--web.listen-address=:{{ pgbouncer_exporter_port }} {{ pgbouncer_exporter_options }}&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>{</span>% <span style=color:#204a87;font-weight:700>else</span> %<span style=color:#ce5c00;font-weight:700>}</span>
</span></span><span style=display:flex><span><span style=color:#000>PG_EXPORTER_OPTS</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;--web.listen-address=:{{ pgbouncer_exporter_port }} --log.level=info&#39;</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>{</span>% endif %<span style=color:#ce5c00;font-weight:700>}</span>
</span></span></code></pre></div><p>Note: Do not override the <a href=#pgbouncer_exporter_port><code>pgbouncer_exporter_port</code></a> port configuration in this parameter.</p><h3 id=pgbackrest_exporter_enabled><code>pgbackrest_exporter_enabled</code></h3><p>Parameter Name: <code>pgbackrest_exporter_enabled</code>, Type: <code>bool</code>, Level: <code>C</code></p><p>Enable pgbackrest_exporter on PGSQL nodes? Default value is: <code>true</code>.</p><p>pgbackrest_exporter is used to monitor the status of the pgBackRest backup system, including key metrics such as backup size, time, type, and duration.</p><h3 id=pgbackrest_exporter_port><code>pgbackrest_exporter_port</code></h3><p>Parameter Name: <code>pgbackrest_exporter_port</code>, Type: <code>port</code>, Level: <code>C</code></p><p>pgbackrest_exporter listen port, default value is: <code>9854</code>.</p><p>This port needs to be referenced in the Prometheus service discovery configuration to scrape backup-related monitoring metrics.</p><h3 id=pgbackrest_exporter_options><code>pgbackrest_exporter_options</code></h3><p>Parameter Name: <code>pgbackrest_exporter_options</code>, Type: <code>arg</code>, Level: <code>C</code></p><p>Command line arguments passed to pgbackrest_exporter, default value is: <code>""</code> empty string.</p><p>When using empty string, the default command argument configuration will be used. You can specify additional parameter options here to adjust the exporter&rsquo;s behavior.</p><hr><h2 id=pg_remove><code>PG_REMOVE</code></h2><p><a href=/docs/pgsql/playbook#pgsql-rmyml><code>pgsql-rm.yml</code></a> invokes the <code>pg_remove</code> role to safely remove PostgreSQL instances. This section&rsquo;s parameters control cleanup behavior to avoid accidental deletion.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_rm_data</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>                  </span><span style=color:#8f5902;font-style:italic># remove postgres data during remove? true by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_rm_backup</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>                </span><span style=color:#8f5902;font-style:italic># remove pgbackrest backup during primary remove? true by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_rm_pkg</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>                   </span><span style=color:#8f5902;font-style:italic># uninstall postgres packages during remove? true by default</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_safeguard</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8>               </span><span style=color:#8f5902;font-style:italic># stop pg_remove running if pg_safeguard is enabled, false by default</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=pg_rm_data><code>pg_rm_data</code></h3><p>Parameter Name: <code>pg_rm_data</code>, Type: <code>bool</code>, Level: <code>G/C/A</code></p><p>Whether to clean up <a href=#pg_data><code>pg_data</code></a> and symlinks when removing PGSQL instances, default is <code>true</code>.</p><p>This switch affects both <code>pgsql-rm.yml</code> and other scenarios that trigger <code>pg_remove</code>. Set to <code>false</code> to preserve the data directory for manual inspection or remounting.</p><h3 id=pg_rm_backup><code>pg_rm_backup</code></h3><p>Parameter Name: <code>pg_rm_backup</code>, Type: <code>bool</code>, Level: <code>G/C/A</code></p><p>Whether to also clean up the pgBackRest repository and configuration when removing the primary, default is <code>true</code>.</p><p>This parameter only applies to primary instances with <code>pg_role=primary</code>: <code>pg_remove</code> will first stop pgBackRest, delete the current cluster&rsquo;s stanza, and remove data in <a href=#pg_fs_backup><code>pg_fs_backup</code></a> when <code>pgbackrest_method == 'local'</code>. Standby clusters or upstream backups are not affected.</p><h3 id=pg_rm_pkg><code>pg_rm_pkg</code></h3><p>Parameter Name: <code>pg_rm_pkg</code>, Type: <code>bool</code>, Level: <code>G/C/A</code></p><p>Whether to uninstall all packages installed by <a href=#pg_packages><code>pg_packages</code></a> when cleaning up PGSQL instances, default is <code>true</code>.</p><p>If you only want to temporarily stop and preserve binaries, set it to <code>false</code>. Otherwise, <code>pg_remove</code> will call the system package manager to completely uninstall PostgreSQL-related components.</p><h3 id=pg_safeguard><code>pg_safeguard</code></h3><p>Parameter Name: <code>pg_safeguard</code>, Type: <code>bool</code>, Level: <code>G/C/A</code></p><p>Accidental deletion protection, default is <code>false</code>. When explicitly set to <code>true</code>, <code>pg_remove</code> will immediately terminate with a prompt, and will only continue after using <code>-e pg_safeguard=false</code> or disabling it in variables.</p><p>It&rsquo;s recommended to enable this switch before batch cleanup in production environments, verify the commands and target nodes are correct, then disable it to avoid accidental deletion of instances.</p><div class=section-index></div><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Thanks for the feedback! Please <a href=https://github.com/pgsty/pigsty/issues/new>let us know how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/pgsty/pigsty/issues/new>let us know how we can improve</a>.</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=e=>{if(typeof gtag!="function")return;gtag("event","page_helpful",{event_category:"Helpful",event_label:window.location.pathname,value:e})};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(100)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br><div class=td-page-meta__lastmod>Last Modified 2026-01-15: <a data-proofer-ignore href=https://github.com/pgsty/pigsty.io/commit/2f1fa2b99d94ad7b6a01bd08dd9269b8687852ee>update docs: admin, config, param, tutorials (2f1fa2b)</a></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="Email - Vonng" aria-label="Email - Vonng"><a target=_blank rel=noopener href=mailto:rh@vonng.com aria-label="Email - Vonng"><i class="fa fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="GitHub - Vonng" aria-label="GitHub - Vonng"><a target=_blank rel=noopener href=https://github.com/Vonng aria-label="GitHub - Vonng"><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="X - Vonng" aria-label="X - Vonng"><a target=_blank rel=noopener href=https://x.com/RonVonng aria-label="X - Vonng"><i class="fab fa-x-twitter"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="X - Pigsty" aria-label="X - Pigsty"><a target=_blank rel=noopener href=https://x.com/PlGSTY aria-label="X - Pigsty"><i class="fab fa-twitter"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="LinkedIn - Vonng" aria-label="LinkedIn - Vonng"><a target=_blank rel=noopener href=https://www.linkedin.com/in/vonng/ aria-label="LinkedIn - Vonng"><i class="fab fa-linkedin"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Discord aria-label=Discord><a target=_blank rel=noopener href=https://discord.gg/wDzt5VyWEz aria-label=Discord><i class="fab fa-discord"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Telegram aria-label=Telegram><a target=_blank rel=noopener href=https://t.me/joinchat/gV9zfZraNPM3YjFh aria-label=Telegram><i class="fab fa-telegram"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=WeChat aria-label=WeChat><a target=_blank rel=noopener href=/img/pigsty/pigsty-cc.jpg aria-label=WeChat><i class="fab fa-weixin"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Discussion aria-label=Discussion><a target=_blank rel=noopener href=https://github.com/orgs/pgsty/discussions aria-label=Discussion><i class="fab fa-discourse"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Repo aria-label=Repo><a target=_blank rel=noopener href=https://github.com/pgsty/pigsty aria-label=Repo><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2018&ndash;2026
<span class=td-footer__authors>Ruohang Feng</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=/docs/about/privacy target=_blank rel=noopener>Privacy Policy</a></span></div></div></div></footer></div><script src=/js/main.min.d20e761d6aa4d2ace0488e45da0e775a8b17300a8430f32fbcfa016e6c9e6eb6.js integrity="sha256-0g52HWqk0qzgSI5F2g53WosXMAqEMPMvvPoBbmyebrY=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>