<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js data-theme-init><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=color-scheme content="light dark"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#000000"><style>html{background:Canvas;color:CanvasText}@media(prefers-color-scheme:dark){html{background:#0b0d12;color:#e6e6e6}}html[data-theme-init] *{transition:none!important}</style><script>(function(){const t="td-color-theme",n=localStorage.getItem(t);let e=n||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");e==="auto"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-bs-theme",e)})()</script><link rel=canonical type=text/html href=https://pigsty.io/docs/pgsql/ext/><link rel=alternate type=application/rss+xml href=https://pigsty.io/docs/pgsql/ext/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Extensions | PIGSTY</title><meta name=description content="Harness the synergistic power of PostgreSQL extensions"><meta property="og:url" content="https://pigsty.io/docs/pgsql/ext/"><meta property="og:site_name" content="PIGSTY"><meta property="og:title" content="Extensions"><meta property="og:description" content="Harness the synergistic power of PostgreSQL extensions"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Extensions"><meta itemprop=description content="Harness the synergistic power of PostgreSQL extensions"><meta itemprop=dateModified content="2026-01-08T18:48:49+08:00"><meta itemprop=wordCount content="85"><meta itemprop=keywords content="Extension"><meta name=twitter:card content="summary"><meta name=twitter:title content="Extensions"><meta name=twitter:description content="Harness the synergistic power of PostgreSQL extensions"><link rel=preload href=/scss/main.min.f6da858eb22dc48110abb983f095554930a5a614c30190b4e32ee7b08a496331.css as=style integrity="sha256-9tqFjrItxIEQq7mD8JVVSTClphTDAZC04y7nsIpJYzE=" crossorigin=anonymous><link href=/scss/main.min.f6da858eb22dc48110abb983f095554930a5a614c30190b4e32ee7b08a496331.css rel=stylesheet integrity="sha256-9tqFjrItxIEQq7mD8JVVSTClphTDAZC04y7nsIpJYzE=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-LG1V9WTKGE"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LG1V9WTKGE")}</script></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="td-navbar-container container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg viewBox="0 0 24 24" width="24" height="24"><defs/><g id="32" fill="none" stroke-dasharray="none" fill-opacity="1" stroke-opacity="1" stroke="none"><title>32</title><g id="32_图层_2"><title>图层 2</title><g id="Group_17"><g id="Graphic_16"/><g id="Graphic_15"><path d="M7.666187 11.971335l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" fill="#bbb" fill-opacity=".9526367"/><path d="M7.666187 11.971335l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_14"><path d="M7.666187 19.474806l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" fill="#de372c" fill-opacity=".8545852"/><path d="M7.666187 19.474806l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_13"><path d="M14.161476 15.751202l2.165064-3.75h4.33013l2.165064 3.75-2.165064 3.75H16.32654z" fill="#424242" fill-opacity=".9016462"/><path d="M14.161476 15.751202l2.165064-3.75h4.33013l2.165064 3.75-2.165064 3.75H16.32654z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_12"><path d="M14.161476 8.226008 16.32654 4.4760076h4.33013L22.821734 8.226008l-2.165064 3.75H16.32654z" fill="#ffa269" fill-opacity=".8975772"/><path d="M14.161476 8.226008 16.32654 4.4760076h4.33013L22.821734 8.226008l-2.165064 3.75H16.32654z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_11"><path d="M7.666187 4.5 9.831251.75H14.16138L16.326445 4.5 14.16138 8.25H9.831251z" fill="#419edb" fill-opacity=".8979957"/><path d="M7.666187 4.5 9.831251.75H14.16138L16.326445 4.5 14.16138 8.25H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_10"><path d="M1.1491742 8.226008 3.3142388 4.4760076H7.644368L9.809432 8.226008l-2.165064 3.75H3.3142388z" fill="#2f6793" fill-opacity=".9002511"/><path d="M1.1491742 8.226008 3.3142388 4.4760076H7.644368L9.809432 8.226008l-2.165064 3.75H3.3142388z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_9"><path d="M1.182071 15.741036l2.1650645-3.75h4.330129l2.1650645 3.75-2.1650645 3.75H3.3471355z" fill="#53ac79" fill-opacity=".9"/><path d="M1.182071 15.741036l2.1650645-3.75h4.330129l2.1650645 3.75-2.1650645 3.75H3.3471355z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g></g></g></g></svg></span><span class=navbar-brand__name>PIGSTY</span></a><div class="td-navbar-nav-scroll td-navbar-nav-scroll--indicator" id=main_navbar><div class="scroll-indicator scroll-left"></div><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/docs/><i class='fa-solid fa-book'></i><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=/blog/><i class="fas fa-blog"></i><span>Blog</span></a></li><li class="nav-item dropdown d-none d-lg-block td-navbar__version-menu"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>Ver</a><ul class=dropdown-menu><li><a class=dropdown-item href=https://pigsty.cc>Pigsty 中文网站</a></li><li><a class=dropdown-item href=https://doc.pgsty.com>Pigsty v3.7 Doc</a></li><li><a class=dropdown-item href=https://v34.pigsty.cc>Pigsty v3.4 Doc</a></li><li><a class=dropdown-item href=https://v27.pigsty.cc>Pigsty v2.7 Doc</a></li><li><a class=dropdown-item href=https://v15.pigsty.cc/docs>Pigsty v1.5 Doc</a></li></ul></div></li><li class="nav-item td-navbar__light-dark-menu"><div class="td-light-dark-menu dropdown"><svg class="d-none"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5.0 010 .708l-7 7a.5.5.0 01-.708.0l-3.5-3.5a.5.5.0 11.708-.708L6.5 10.293l6.646-6.647a.5.5.0 01.708.0z"/></symbol><symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></symbol><symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></symbol><symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></symbol></svg>
<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id=bd-theme type=button aria-expanded=false data-bs-toggle=dropdown aria-label="Toggle theme (auto)">
<svg class="bi my-1 theme-icon-active"><use href="#circle-half"/></svg></button><ul class=dropdown-menu aria-labelledby=bd-theme><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#sun-fill"/></svg>
Light
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"/></svg>
Dark
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center active" data-bs-theme-value=auto aria-pressed=true>
<svg class="bi me-2 opacity-50"><use href="#circle-half"/></svg>
Auto
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li></ul></div></li><li class=nav-item><a class=nav-link href=# onclick="return switchLang(),!1" title="Switch Language / 切换语言"><i class="fas fa-language"></i></a></li></ul><div class="scroll-indicator scroll-right"></div></div><div class="d-none d-lg-block td-navbar__search"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.d757e151050fd40088751a74721d74f6.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav><script>function switchLang(){var t=window.location.host,e=window.location.pathname+window.location.search+window.location.hash;t.indexOf("pigsty.io")!==-1?window.location.href="https://pigsty.cc"+e:t.indexOf("pigsty.cc")!==-1?window.location.href="https://pigsty.io"+e:window.location.href="https://pigsty.cc"+e}</script></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/pgsql/ext/>Return to the regular view of this page</a>.</p></div><h1 class=title>Extensions</h1><div class=lead>Harness the synergistic power of PostgreSQL extensions</div><ul><li>1: <a href=#pg-cb575384aee4c018fb0db527378640fd>Quick Start</a></li><li>2: <a href=#pg-37c08dbc246cb158947abfb17f172ecc>Introduction</a></li><li>3: <a href=#pg-6c21bc6ef6cf2173aeb9948071de953f>Packages</a></li><li>4: <a href=#pg-96a6a67c2f3d2429fabeed6f98b76c7f>Download</a></li><li>5: <a href=#pg-128bcfdba2d6b955af1661f0a806fd9e>Install</a></li><li>6: <a href=#pg-8c405665bb423ccc536997bd9c3a64ca>Config</a></li><li>7: <a href=#pg-5b462599a5e29b51a35ede5bb5e310a8>Create</a></li><li>8: <a href=#pg-aeb68b34de12844024f2519dd13df6f0>Update</a></li><li>9: <a href=#pg-13869765de25ae294c556ad54ac4ee27>Remove</a></li><li>10: <a href=#pg-cd40e09e16b398209123543c21e68960>Default Extensions</a></li><li>11: <a href=#pg-fef9a9d4af92d185f18fab30d92a530d>Repository</a></li></ul><div class=content><p>Pigsty provides <a href=https://pgext.cloud/list><strong>440+</strong> extensions</a>, covering 16 major categories including time-series, geospatial, vector, full-text search, analytics, and feature enhancements, ready to use out-of-the-box.</p><p>Using extensions in Pigsty involves four core steps: <a href=download><strong>Download</strong></a>, <a href=install><strong>Install</strong></a>, <a href=config><strong>Config/Load</strong></a>, and <a href=create><strong>Create</strong></a>.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg-meta</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>hosts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>10.10.10.10</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_seq: 1, pg_role</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>primary } }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_cluster</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg-meta</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_databases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>meta</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>extensions: [ postgis, timescaledb, vector ]   # Create</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>Create extensions in database</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_libs: &#39;timescaledb, pg_stat_statements, auto_explain&#39; # Config</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>Preload extension libraries</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_extensions: [ postgis, timescaledb, pgvector ]  # Install</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>Install extension packages</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p><img src=/img/pigsty/ecosystem.gif alt></p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-cb575384aee4c018fb0db527378640fd>1 - Quick Start</h1><div class=lead>Four-step process overview for using extensions</div><p>Using extensions in Pigsty requires four steps: <strong>Download</strong>, <strong>Install</strong>, <strong>Config</strong>, and <strong>Create</strong>.</p><ol><li><strong>Download</strong>: Download extension packages to the local repository (Pigsty has already downloaded mainstream extensions by default)</li><li><strong>Install</strong>: Install extension packages on cluster nodes</li><li><strong>Config</strong>: Some extensions need to be preloaded or configured with parameters</li><li><strong>Create</strong>: Execute <code>CREATE EXTENSION</code> in the database to create the extension</li></ol><hr><h2 id=declarative-configuration>Declarative Configuration</h2><p>Declare extensions in the Pigsty configuration manifest, and they will be automatically installed and created during cluster initialization:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg-meta</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>hosts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>10.10.10.10</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_seq: 1, pg_role</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>primary } }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_cluster</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg-meta</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_databases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>meta</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span><span style=color:#000>postgis, timescaledb, vector ]  </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Create extensions in database</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_libs</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;timescaledb, pg_stat_statements, auto_explain&#39;</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Preload extension libraries</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span><span style=color:#000>postgis, timescaledb, pgvector ] </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Install extension packages</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>After executing <code>./pgsql.yml</code> to initialize the cluster, the three extensions <code>postgis</code>, <code>timescaledb</code>, and <code>vector</code> will be available in the <code>meta</code> database.</p><hr><h2 id=imperative-operations>Imperative Operations</h2><p>For existing clusters, you can add extensions using command-line methods:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 1. Install extension packages</span>
</span></span><span style=display:flex><span>./pgsql.yml -l pg-meta -t pg_extension -e <span style=color:#4e9a06>&#39;{&#34;pg_extensions&#34;:[&#34;pgvector&#34;]}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 2. Preload extension (if needed, requires restart after modification)</span>
</span></span><span style=display:flex><span>pg edit-config pg-meta --force -p <span style=color:#000>shared_preload_libraries</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;timescaledb, pg_stat_statements, auto_explain&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 3. Create extension in database</span>
</span></span><span style=display:flex><span>psql -d meta -c <span style=color:#4e9a06>&#39;CREATE EXTENSION vector;&#39;</span>
</span></span></code></pre></div><p>You can also use the <a href=https://pgext.cloud/pig>pig</a> package manager to install directly:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pig install pgvector        <span style=color:#8f5902;font-style:italic># Install extension package</span>
</span></span><span style=display:flex><span>pig extension create vector  <span style=color:#8f5902;font-style:italic># Create extension in database</span>
</span></span></code></pre></div><hr><h2 id=process-quick-reference>Process Quick Reference</h2><table><thead><tr><th style=text-align:center>Step</th><th style=text-align:left>Parameter/Command</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:center>Download</td><td style=text-align:left><a href=/docs/infra/param#repo_extra_packages><code>repo_extra_packages</code></a></td><td style=text-align:left>Specify extension packages to download to local repository</td></tr><tr><td style=text-align:center>Install</td><td style=text-align:left><a href=/docs/pgsql/param#pg_extensions><code>pg_extensions</code></a></td><td style=text-align:left>Specify extension packages to install on cluster</td></tr><tr><td style=text-align:center>Config</td><td style=text-align:left><a href=/docs/pgsql/param#pg_libs><code>pg_libs</code></a></td><td style=text-align:left>Preload extensions to <code>shared_preload_libraries</code></td></tr><tr><td style=text-align:center>Create</td><td style=text-align:left><a href=/docs/pgsql/config/db><code>pg_databases.extensions</code></a></td><td style=text-align:left>Automatically execute <code>CREATE EXTENSION</code> in database</td></tr></tbody></table><blockquote><p>For detailed instructions, please refer to each subsection: <a href=download>Download</a>, <a href=install>Install</a>, <a href=config>Config</a>, <a href=create>Create</a></p></blockquote></div><div class=td-content style=page-break-before:always><h1 id=pg-37c08dbc246cb158947abfb17f172ecc>2 - Introduction</h1><div class=lead>Core concepts of PostgreSQL extensions and the Pigsty extension ecosystem</div><p>Extensions are the soul of PostgreSQL. Pigsty includes 440+ pre-compiled, out-of-the-box extension plugins, fully unleashing PostgreSQL&rsquo;s potential.</p><hr><h2 id=what-are-extensions>What are Extensions</h2><p>PostgreSQL extensions are a modular mechanism that allows enhancing database functionality without modifying the core code.
An extension typically consists of three parts:</p><ul><li><strong>Control file</strong> (<code>.control</code>): Required, contains extension metadata</li><li><strong>SQL scripts</strong> (<code>.sql</code>): Optional, defines functions, types, operators, and other database objects</li><li><strong>Dynamic library</strong> (<code>.so</code>): Optional, provides high-performance functionality implemented in C</li></ul><p>Extensions can add to PostgreSQL: new data types, index methods, functions and operators, foreign data access, procedural languages, performance monitoring, security auditing, and more.</p><hr><h2 id=core-extensions>Core Extensions</h2><p>Among the extensions included in Pigsty, the following are most representative:</p><table><thead><tr><th style=text-align:left>Extension</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><a href=https://postgis.net/><strong>PostGIS</strong></a></td><td style=text-align:left>Geospatial data types and indexes, de facto GIS standard</td></tr><tr><td style=text-align:left><a href=https://www.timescale.com/><strong>TimescaleDB</strong></a></td><td style=text-align:left>Time-series database with continuous aggregates, columnar storage, auto-compression</td></tr><tr><td style=text-align:left><a href=https://github.com/pgvector/pgvector><strong>PGVector</strong></a></td><td style=text-align:left>Vector data type with HNSW/IVFFlat indexes, essential for AI applications</td></tr><tr><td style=text-align:left><a href=https://www.citusdata.com/><strong>Citus</strong></a></td><td style=text-align:left>Distributed database with horizontal sharding capabilities</td></tr><tr><td style=text-align:left><a href=https://github.com/duckdb/pg_duckdb><strong>pg_duckdb</strong></a></td><td style=text-align:left>Embedded DuckDB analytical engine for OLAP acceleration</td></tr><tr><td style=text-align:left><a href=https://www.paradedb.com/><strong>ParadeDB</strong></a></td><td style=text-align:left>ElasticSearch-level full-text search capabilities</td></tr><tr><td style=text-align:left><a href=https://age.apache.org/><strong>Apache AGE</strong></a></td><td style=text-align:left>Graph database supporting OpenCypher query language</td></tr><tr><td style=text-align:left><a href=https://github.com/supabase/pg_graphql><strong>pg_graphql</strong></a></td><td style=text-align:left>Native GraphQL query support</td></tr></tbody></table><p>Most extensions can coexist and even be combined, creating synergistic effects far greater than the sum of their parts.</p><hr><h2 id=extension-categories>Extension Categories</h2><p>Pigsty organizes extensions into 16 categories:</p><table><thead><tr><th style=text-align:center>Category</th><th style=text-align:left>Alias</th><th style=text-align:left>Description</th><th style=text-align:left>Typical Extensions</th></tr></thead><tbody><tr><td style=text-align:center>Time-series</td><td style=text-align:left><code>time</code></td><td style=text-align:left>Time-series data processing</td><td style=text-align:left>timescaledb, pg_cron, periods</td></tr><tr><td style=text-align:center>Geospatial</td><td style=text-align:left><code>gis</code></td><td style=text-align:left>Geospatial data</td><td style=text-align:left>postgis, h3, pgrouting</td></tr><tr><td style=text-align:center>Vector</td><td style=text-align:left><code>rag</code></td><td style=text-align:left>Vector retrieval and AI</td><td style=text-align:left>pgvector, vchord, pg_vectorize</td></tr><tr><td style=text-align:center>Search</td><td style=text-align:left><code>fts</code></td><td style=text-align:left>Full-text search</td><td style=text-align:left>pgroonga, zhparser, pg_bigm</td></tr><tr><td style=text-align:center>Analytics</td><td style=text-align:left><code>olap</code></td><td style=text-align:left>OLAP and analytics</td><td style=text-align:left>pg_duckdb, pg_mooncake, citus</td></tr><tr><td style=text-align:center>Feature</td><td style=text-align:left><code>feat</code></td><td style=text-align:left>Feature enhancements</td><td style=text-align:left>age, pg_graphql, hll, rum</td></tr><tr><td style=text-align:center>Language</td><td style=text-align:left><code>lang</code></td><td style=text-align:left>Procedural languages</td><td style=text-align:left>plpython3u, pljava, plv8</td></tr><tr><td style=text-align:center>Type</td><td style=text-align:left><code>type</code></td><td style=text-align:left>Data types</td><td style=text-align:left>hstore, ltree, ip4r</td></tr><tr><td style=text-align:center>Utility</td><td style=text-align:left><code>util</code></td><td style=text-align:left>Utility tools</td><td style=text-align:left>http, pg_net, pgjwt</td></tr><tr><td style=text-align:center>Function</td><td style=text-align:left><code>func</code></td><td style=text-align:left>Function libraries</td><td style=text-align:left>pg_uuidv7, topn, tdigest</td></tr><tr><td style=text-align:center>Admin</td><td style=text-align:left><code>admin</code></td><td style=text-align:left>Operations management</td><td style=text-align:left>pg_repack, pg_squeeze, pgagent</td></tr><tr><td style=text-align:center>Stat</td><td style=text-align:left><code>stat</code></td><td style=text-align:left>Monitoring statistics</td><td style=text-align:left>pg_stat_statements, pg_qualstats, auto_explain</td></tr><tr><td style=text-align:center>Security</td><td style=text-align:left><code>sec</code></td><td style=text-align:left>Security auditing</td><td style=text-align:left>pgaudit, pgsodium, pg_tde</td></tr><tr><td style=text-align:center>FDW</td><td style=text-align:left><code>fdw</code></td><td style=text-align:left>Foreign data access</td><td style=text-align:left>postgres_fdw, mysql_fdw, oracle_fdw</td></tr><tr><td style=text-align:center>Compatibility</td><td style=text-align:left><code>sim</code></td><td style=text-align:left>Database compatibility</td><td style=text-align:left>orafce, babelfish</td></tr><tr><td style=text-align:center>ETL</td><td style=text-align:left><code>etl</code></td><td style=text-align:left>Data synchronization</td><td style=text-align:left>pglogical, wal2json, decoderbufs</td></tr></tbody></table><p>You can batch install an entire category of extensions using category aliases, for example: <code>pg_extensions: [ pgsql-gis, pgsql-rag ]</code>.</p><hr><h2 id=predefined-extension-stacks>Predefined Extension Stacks</h2><p>Pigsty provides several predefined extension stacks for convenient scenario-based selection:</p><table><thead><tr><th style=text-align:left>Stack</th><th style=text-align:left>Included Extensions</th></tr></thead><tbody><tr><td style=text-align:left><code>gis-stack</code></td><td style=text-align:left>postgis, pgrouting, pointcloud, h3, q3c, ogr_fdw</td></tr><tr><td style=text-align:left><code>rag-stack</code></td><td style=text-align:left>pgvector, vchord, pgvectorscale, pg_similarity, pg_tiktoken</td></tr><tr><td style=text-align:left><code>fts-stack</code></td><td style=text-align:left>pgroonga, pg_bigm, zhparser, hunspell</td></tr><tr><td style=text-align:left><code>olap-stack</code></td><td style=text-align:left>pg_duckdb, pg_mooncake, timescaledb, pg_partman, plproxy</td></tr><tr><td style=text-align:left><code>feat-stack</code></td><td style=text-align:left>age, hll, rum, pg_graphql, pg_jsonschema, jsquery</td></tr><tr><td style=text-align:left><code>stat-stack</code></td><td style=text-align:left>pg_show_plans, pg_stat_kcache, pg_qualstats, pg_wait_sampling</td></tr><tr><td style=text-align:left><code>supa-stack</code></td><td style=text-align:left>pg_graphql, pg_jsonschema, wrappers, pgvector, pgsodium, vault</td></tr></tbody></table><p>Simply use these names in <code>pg_extensions</code> to install the entire stack.</p><hr><h2 id=extension-resources>Extension Resources</h2><ul><li><a href=https://pgext.cloud/list><strong>Extension Catalog</strong></a>: Browse detailed information about all available extensions</li><li><a href=https://pgext.cloud/repo/><strong>Extension Repository</strong></a>: Pigsty extension software repository</li><li><a href=https://pgext.cloud/pig><strong>pig Package Manager</strong></a>: Command-line extension management tool</li><li><a href=https://github.com/pgsty/pigsty><strong>GitHub Pigsty</strong></a>: Pigsty source code repository</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-6c21bc6ef6cf2173aeb9948071de953f>3 - Packages</h1><div class=lead>Extension package aliases and category naming conventions</div><p>Pigsty uses a <strong>package alias</strong> mechanism to simplify extension installation and management.</p><hr><h2 id=package-alias-mechanism>Package Alias Mechanism</h2><p>Managing extensions involves multiple layers of name mapping:</p><table><thead><tr><th style=text-align:left>Layer</th><th style=text-align:left>Example <code>pgvector</code></th><th style=text-align:left>Example <code>postgis</code></th></tr></thead><tbody><tr><td style=text-align:left>Extension Name</td><td style=text-align:left><code>vector</code></td><td style=text-align:left><code>postgis</code>, <code>postgis_topology</code>, &mldr;</td></tr><tr><td style=text-align:left>Package Alias</td><td style=text-align:left><code>pgvector</code></td><td style=text-align:left><code>postgis</code></td></tr><tr><td style=text-align:left>RPM Package Name</td><td style=text-align:left><code>pgvector_18</code></td><td style=text-align:left><code>postgis36_18*</code></td></tr><tr><td style=text-align:left>DEB Package Name</td><td style=text-align:left><code>postgresql-18-pgvector</code></td><td style=text-align:left><code>postgresql-18-postgis-3*</code></td></tr></tbody></table><p>Pigsty provides a <strong>package alias</strong> abstraction layer, so users don&rsquo;t need to worry about specific RPM/DEB package names:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span><span style=color:#000>pgvector, postgis, timescaledb ] </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Use package aliases</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>Pigsty automatically translates to the correct package names based on the operating system and PostgreSQL version.</p><blockquote><p>Note: When using <code>CREATE EXTENSION</code>, you use the <strong>extension name</strong> (e.g., <code>vector</code>), not the package alias (<code>pgvector</code>).</p></blockquote><hr><h2 id=category-aliases>Category Aliases</h2><p>All extensions are organized into 16 categories, which can be batch installed using category aliases:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Use generic category aliases (auto-adapt to current PG version)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span><span style=color:#000>pgsql-gis, pgsql-rag, pgsql-fts ]</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Or use version-specific category aliases</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span><span style=color:#000>pg18-gis, pg18-rag, pg18-fts ]</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>Except for the <code>olap</code> category, all category extensions can be installed simultaneously. Within the <code>olap</code> category, there are conflicts: <code>pg_duckdb</code> and <code>pg_mooncake</code> are mutually exclusive.</p><hr><h2 id=category-list>Category List</h2><table><thead><tr><th style=text-align:center>Category</th><th style=text-align:left>Description</th><th style=text-align:left>Typical Extensions</th></tr></thead><tbody><tr><td style=text-align:center><code>time</code></td><td style=text-align:left>Time-series</td><td style=text-align:left>timescaledb, pg_cron, periods</td></tr><tr><td style=text-align:center><code>gis</code></td><td style=text-align:left>Geospatial</td><td style=text-align:left>postgis, h3, pgrouting</td></tr><tr><td style=text-align:center><code>rag</code></td><td style=text-align:left>Vector/RAG</td><td style=text-align:left>pgvector, pgml, vchord</td></tr><tr><td style=text-align:center><code>fts</code></td><td style=text-align:left>Full-text Search</td><td style=text-align:left>pg_trgm, zhparser, pgroonga</td></tr><tr><td style=text-align:center><code>olap</code></td><td style=text-align:left>Analytics</td><td style=text-align:left>citus, pg_duckdb, pg_analytics</td></tr><tr><td style=text-align:center><code>feat</code></td><td style=text-align:left>Feature</td><td style=text-align:left>age, pg_graphql, rum</td></tr><tr><td style=text-align:center><code>lang</code></td><td style=text-align:left>Language</td><td style=text-align:left>plpython3u, pljava, plv8</td></tr><tr><td style=text-align:center><code>type</code></td><td style=text-align:left>Data Type</td><td style=text-align:left>hstore, ltree, citext</td></tr><tr><td style=text-align:center><code>util</code></td><td style=text-align:left>Utility</td><td style=text-align:left>http, pg_net, pgjwt</td></tr><tr><td style=text-align:center><code>func</code></td><td style=text-align:left>Function</td><td style=text-align:left>pgcrypto, uuid-ossp, pg_uuidv7</td></tr><tr><td style=text-align:center><code>admin</code></td><td style=text-align:left>Admin</td><td style=text-align:left>pg_repack, pgagent, pg_squeeze</td></tr><tr><td style=text-align:center><code>stat</code></td><td style=text-align:left>Statistics</td><td style=text-align:left>pg_stat_statements, pg_qualstats, auto_explain</td></tr><tr><td style=text-align:center><code>sec</code></td><td style=text-align:left>Security</td><td style=text-align:left>pgaudit, pgcrypto, pgsodium</td></tr><tr><td style=text-align:center><code>fdw</code></td><td style=text-align:left>Foreign Data Wrapper</td><td style=text-align:left>postgres_fdw, mysql_fdw, oracle_fdw</td></tr><tr><td style=text-align:center><code>sim</code></td><td style=text-align:left>Compatibility</td><td style=text-align:left>orafce, babelfishpg_tds</td></tr><tr><td style=text-align:center><code>etl</code></td><td style=text-align:left>Data/ETL</td><td style=text-align:left>pglogical, wal2json, decoderbufs</td></tr></tbody></table><hr><h2 id=browse-extension-catalog>Browse Extension Catalog</h2><p>You can browse detailed information about all available extensions on the <a href=https://pgext.cloud/list>Pigsty Extension Catalog</a> website, including:</p><ul><li>Extension name, description, version</li><li>Supported PostgreSQL versions</li><li>Supported OS distributions</li><li>Installation methods, preloading requirements</li><li>License, source repository</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-96a6a67c2f3d2429fabeed6f98b76c7f>4 - Download</h1><div class=lead>Download extension packages from software repositories to local</div><p>Before installing extensions, ensure that extension packages are downloaded to the local repository or available from upstream.</p><hr><h2 id=default-behavior>Default Behavior</h2><p>Pigsty automatically downloads mainstream extensions available for the default PostgreSQL version to the local software repository during installation.</p><p>Benefits of using a local repository:</p><ul><li>Accelerated installation, avoiding repeated downloads</li><li>Reduced network traffic consumption</li><li>Improved delivery reliability</li><li>Ensured version consistency</li></ul><hr><h2 id=download-new-extensions>Download New Extensions</h2><p>To download additional extensions, add them to <a href=/docs/infra/param#repo_extra_packages><code>repo_extra_packages</code></a> and rebuild the repository:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>all</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>repo_extra_packages</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span><span style=color:#000>pgvector, postgis, timescaledb, pg_duckdb ]</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Re-download packages to local repository</span>
</span></span><span style=display:flex><span>./infra.yml -t repo_build
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Refresh package source cache on all nodes</span>
</span></span><span style=display:flex><span>./node.yml -t node_repo
</span></span></code></pre></div><hr><h2 id=using-upstream-repositories>Using Upstream Repositories</h2><p>You can also install directly from internet upstream repositories without pre-downloading:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Add upstream software sources on nodes</span>
</span></span><span style=display:flex><span>./node.yml -t node_repo -e <span style=color:#000>node_repo_modules</span><span style=color:#ce5c00;font-weight:700>=</span>node,pgsql
</span></span></code></pre></div><p>This approach is suitable for:</p><ul><li>Quick testing of latest versions</li><li>Installing rare extensions</li><li>Environments with good network conditions</li></ul><p>But may face:</p><ul><li>Network instability affecting installation</li><li>Version inconsistency risks</li></ul><hr><h2 id=extension-sources>Extension Sources</h2><p>Extension packages come from two main sources:</p><table><thead><tr><th style=text-align:left>Repository</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><strong>PGDG</strong></td><td style=text-align:left>PostgreSQL official repository, providing core extensions</td></tr><tr><td style=text-align:left><strong>Pigsty</strong></td><td style=text-align:left>Pigsty supplementary repository, providing additional extensions</td></tr></tbody></table><p>The Pigsty repository only includes extensions not present in the PGDG repository. Once an extension enters the PGDG repository, the Pigsty repository will remove it or keep it consistent.</p><p>Repository URLs:</p><ul><li>PGDG YUM: <a href=https://download.postgresql.org/pub/repos/yum/>https://download.postgresql.org/pub/repos/yum/</a></li><li>PGDG APT: <a href=https://apt.postgresql.org/pub/repos/apt/>https://apt.postgresql.org/pub/repos/apt/</a></li><li>Pigsty YUM: <a href=https://repo.pigsty.io/yum/>https://repo.pigsty.io/yum/</a></li><li>Pigsty APT: <a href=https://repo.pigsty.io/apt/>https://repo.pigsty.io/apt/</a></li></ul><p>For detailed repository configuration, see <a href=repo>Extension Repository</a>.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-128bcfdba2d6b955af1661f0a806fd9e>5 - Install</h1><div class=lead>Install extension packages on cluster nodes</div><p>Pigsty uses the operating system&rsquo;s package manager (yum/apt) to install extension packages.</p><hr><h2 id=related-parameters>Related Parameters</h2><p>Two parameters are used to specify extensions to install:</p><table><thead><tr><th style=text-align:left>Parameter</th><th style=text-align:left>Purpose</th><th style=text-align:left>Default Behavior</th></tr></thead><tbody><tr><td style=text-align:left><a href=/docs/pgsql/param#pg_packages><code>pg_packages</code></a></td><td style=text-align:left>Global common packages</td><td style=text-align:left>Ensure present (no upgrade)</td></tr><tr><td style=text-align:left><a href=/docs/pgsql/param#pg_extensions><code>pg_extensions</code></a></td><td style=text-align:left>Cluster-specific extensions</td><td style=text-align:left>Install latest version</td></tr></tbody></table><p><code>pg_packages</code> is typically used to specify base components needed by all clusters (PostgreSQL kernel, Patroni, pgBouncer, etc.) and essential extensions.</p><p><code>pg_extensions</code> is used to specify extensions needed by specific clusters.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_packages</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>                           </span><span style=color:#8f5902;font-style:italic># Global base packages</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>pgsql-main pgsql-common</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>                         </span><span style=color:#8f5902;font-style:italic># Cluster extensions</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>postgis timescaledb pgvector</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><hr><h2 id=install-during-cluster-initialization>Install During Cluster Initialization</h2><p>Declare extensions in cluster configuration, and they will be automatically installed during initialization:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg-meta</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>hosts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>10.10.10.10</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_seq: 1, pg_role</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>primary } }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_cluster</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg-meta</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span><span style=color:#000>postgis, timescaledb, pgvector, pg_duckdb ]</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>When executing <code>./pgsql.yml</code> to initialize the cluster, extensions will be automatically installed.</p><hr><h2 id=install-extensions-on-existing-cluster>Install Extensions on Existing Cluster</h2><p>For initialized clusters, there are multiple ways to install extensions:</p><h3 id=using-pigsty-playbook>Using Pigsty Playbook</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Install using playbook after modifying configuration</span>
</span></span><span style=display:flex><span>./pgsql.yml -l pg-meta -t pg_extension
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Or specify extensions directly on command line</span>
</span></span><span style=display:flex><span>./pgsql.yml -l pg-meta -t pg_extension -e <span style=color:#4e9a06>&#39;{&#34;pg_extensions&#34;:[&#34;pg_duckdb&#34;]}&#39;</span>
</span></span></code></pre></div><h3 id=using-pig-package-manager>Using pig Package Manager</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Install extension using pig</span>
</span></span><span style=display:flex><span>pig install pg_duckdb
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Batch install</span>
</span></span><span style=display:flex><span>ansible pg-meta -b -a <span style=color:#4e9a06>&#39;pig install pg_duckdb pgvector&#39;</span>
</span></span></code></pre></div><h3 id=using-package-manager-directly>Using Package Manager Directly</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># EL systems</span>
</span></span><span style=display:flex><span>sudo yum install -y pg_duckdb_18*
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Debian/Ubuntu systems</span>
</span></span><span style=display:flex><span>sudo apt install -y postgresql-18-pg-duckdb
</span></span></code></pre></div><hr><h2 id=using-package-aliases>Using Package Aliases</h2><p>Pigsty supports using standardized package aliases, automatically translating to package names for the corresponding PG version:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>pgvector          </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Auto-translates to pgvector_18* (EL) or postgresql-18-pgvector (Debian)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>postgis           </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Auto-translates to postgis36_18* (EL) or postgresql-18-postgis-3* (Debian)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>pgsql-gis         </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Category alias, installs entire GIS category of extensions</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>You can also use raw package names directly:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>pgvector_18*                   </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># EL system raw package name</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span>- <span style=color:#000>postgresql-18-pgvector         </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Debian system raw package name</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>For package alias definitions, see:</p><ul><li><a href=https://github.com/pgsty/pigsty/blob/main/roles/node_id/vars/el8.x86_64.yml>EL8 Extension List</a></li><li><a href=https://github.com/pgsty/pigsty/blob/main/roles/node_id/vars/el9.x86_64.yml>EL9 Extension List</a></li><li><a href=https://github.com/pgsty/pigsty/blob/main/roles/node_id/vars/d12.x86_64.yml>D12 Extension List</a></li><li><a href=https://github.com/pgsty/pigsty/blob/main/roles/node_id/vars/u22.x86_64.yml>U22 Extension List</a></li><li><a href=https://github.com/pgsty/pigsty/blob/main/roles/node_id/vars/u24.x86_64.yml>U24 Extension List</a></li></ul><hr><h2 id=verify-installation>Verify Installation</h2><p>After installation, verify in the database:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Check installed extensions
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_available_extensions</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>name</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;vector&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Check if extension files exist
</span></span></span><span style=display:flex><span><span style=color:#a40000>\</span><span style=color:#000>dx</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-8c405665bb423ccc536997bd9c3a64ca>6 - Config</h1><div class=lead>Preload extension libraries and configure extension parameters</div><p>Some extensions require preloading dynamic libraries or configuring parameters before use. This section describes how to configure extensions.</p><hr><h2 id=preload-extensions>Preload Extensions</h2><p>Most extensions can be enabled directly with <code>CREATE EXTENSION</code> after installation, but some extensions using PostgreSQL&rsquo;s Hook mechanism require <strong>preloading</strong>.</p><p>Preloading is specified via the <code>shared_preload_libraries</code> parameter and requires a <strong>database restart</strong> to take effect.</p><h3 id=extensions-requiring-preload>Extensions Requiring Preload</h3><p>Common extensions that require preloading:</p><table><thead><tr><th style=text-align:left>Extension</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>timescaledb</code></td><td style=text-align:left>Time-series database extension, must be placed first</td></tr><tr><td style=text-align:left><code>citus</code></td><td style=text-align:left>Distributed database extension, must be placed first</td></tr><tr><td style=text-align:left><code>pg_stat_statements</code></td><td style=text-align:left>SQL statement statistics, enabled by default in Pigsty</td></tr><tr><td style=text-align:left><code>auto_explain</code></td><td style=text-align:left>Automatically log slow query execution plans, enabled by default in Pigsty</td></tr><tr><td style=text-align:left><code>pg_cron</code></td><td style=text-align:left>Scheduled task scheduling</td></tr><tr><td style=text-align:left><code>pg_net</code></td><td style=text-align:left>Asynchronous HTTP requests</td></tr><tr><td style=text-align:left><code>pg_tle</code></td><td style=text-align:left>Trusted language extensions</td></tr><tr><td style=text-align:left><code>pgaudit</code></td><td style=text-align:left>Audit logging</td></tr><tr><td style=text-align:left><code>pg_stat_kcache</code></td><td style=text-align:left>Kernel statistics</td></tr><tr><td style=text-align:left><code>pg_squeeze</code></td><td style=text-align:left>Online table space reclamation</td></tr><tr><td style=text-align:left><code>pgml</code></td><td style=text-align:left>PostgresML machine learning</td></tr></tbody></table><p>For the complete list, see the <a href=https://pgext.cloud/list>Extension Catalog</a> (marked with <code>LOAD</code>).</p><h3 id=preload-order>Preload Order</h3><p>The loading order of extensions in <code>shared_preload_libraries</code> is important:</p><ul><li><code>timescaledb</code> and <code>citus</code> must be placed <strong>first</strong></li><li>If using both, <code>citus</code> should come before <code>timescaledb</code></li><li>Statistics extensions should come after <code>pg_stat_statements</code> to use the same query_id</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg_libs</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;citus, timescaledb, pg_stat_statements, auto_explain&#39;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><hr><h2 id=configure-during-cluster-initialization>Configure During Cluster Initialization</h2><p>When creating a new cluster, use the <a href=/docs/pgsql/param#pg_libs><code>pg_libs</code></a> parameter to specify preloaded extensions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg-meta</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>hosts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>10.10.10.10</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_seq: 1, pg_role</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>primary } }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_cluster</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg-meta</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_libs</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;timescaledb, pg_stat_statements, auto_explain&#39;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span><span style=color:#000>timescaledb, postgis, pgvector ]</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>The value of <code>pg_libs</code> will be written to <code>shared_preload_libraries</code> during cluster initialization.</p><h3 id=default-value>Default Value</h3><p>The default value of <a href=/docs/pgsql/param#pg_libs><code>pg_libs</code></a> is <code>pg_stat_statements, auto_explain</code>. These two Contrib extensions provide basic observability:</p><ul><li><code>pg_stat_statements</code>: Track execution statistics of all SQL statements</li><li><code>auto_explain</code>: Automatically log execution plans for slow queries</li></ul><hr><h2 id=modify-configuration-on-existing-cluster>Modify Configuration on Existing Cluster</h2><p>For initialized clusters, use <code>patronictl</code> to modify <code>shared_preload_libraries</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Add timescaledb to preload libraries</span>
</span></span><span style=display:flex><span>pg edit-config pg-meta --force -p <span style=color:#000>shared_preload_libraries</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;timescaledb, pg_stat_statements, auto_explain&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Restart cluster to apply configuration</span>
</span></span><span style=display:flex><span>pg restart pg-meta
</span></span></code></pre></div><p>You can also directly modify <code>postgresql.conf</code> or use <code>ALTER SYSTEM</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#204a87;font-weight:700>ALTER</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SYSTEM</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SET</span><span style=color:#f8f8f8> </span><span style=color:#000>shared_preload_libraries</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;timescaledb, pg_stat_statements, auto_explain&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>A PostgreSQL service restart is required after modification.</p><hr><h2 id=extension-parameter-configuration>Extension Parameter Configuration</h2><p>Many extensions have configurable parameters that can be set in the following locations:</p><h3 id=during-cluster-initialization>During Cluster Initialization</h3><p>Use the <a href=/docs/pgsql/param#pg_parameters><code>pg_parameters</code></a> parameter to specify:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg-meta</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_cluster</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg-meta</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_libs</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;pg_cron, pg_stat_statements, auto_explain&#39;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_parameters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>cron.database_name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>postgres          </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Database used by pg_cron</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>pg_stat_statements.track</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>all         </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Track all statements</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>auto_explain.log_min_duration</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1000</span><span style=color:#f8f8f8>    </span><span style=color:#8f5902;font-style:italic># Log queries exceeding 1 second</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=runtime-modification>Runtime Modification</h3><p>Use <code>ALTER SYSTEM</code> or <code>patronictl</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Modify parameter
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>ALTER</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SYSTEM</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SET</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_stat_statements</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>track</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;all&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Reload configuration
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_reload_conf</span><span style=color:#000;font-weight:700>();</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Modify using patronictl</span>
</span></span><span style=display:flex><span>pg edit-config pg-meta --force -p <span style=color:#4e9a06>&#39;pg_stat_statements.track=all&#39;</span>
</span></span></code></pre></div><hr><h2 id=important-notes>Important Notes</h2><ol><li><p><strong>Preload errors prevent startup</strong>: If an extension in <code>shared_preload_libraries</code> doesn&rsquo;t exist or fails to load, PostgreSQL will not start. Ensure extensions are properly installed before adding to preload.</p></li><li><p><strong>Modification requires restart</strong>: Changes to <code>shared_preload_libraries</code> require restarting the PostgreSQL service to take effect.</p></li><li><p><strong>Partial functionality available</strong>: Some extensions can be partially used without preloading, but full functionality requires preloading.</p></li><li><p><strong>View current configuration</strong>: Use the following command to view current preload libraries:</p></li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#204a87;font-weight:700>SHOW</span><span style=color:#f8f8f8> </span><span style=color:#000>shared_preload_libraries</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-5b462599a5e29b51a35ede5bb5e310a8>7 - Create</h1><div class=lead>Create and enable extensions in databases</div><p>After installing extension packages, you need to execute <code>CREATE EXTENSION</code> in the database to use extension features.</p><hr><h2 id=view-available-extensions>View Available Extensions</h2><p>After installing extension packages, you can view available extensions:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- View all available extensions
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_available_extensions</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- View specific extension
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_available_extensions</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>name</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;vector&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- View enabled extensions
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_extension</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><hr><h2 id=create-extensions>Create Extensions</h2><p>Use <code>CREATE EXTENSION</code> to enable extensions in the database:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Create extension
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#000>EXTENSION</span><span style=color:#f8f8f8> </span><span style=color:#000>vector</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Create extension in specific schema
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#000>EXTENSION</span><span style=color:#f8f8f8> </span><span style=color:#000>postgis</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SCHEMA</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>public</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Automatically install dependent extensions
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#000>EXTENSION</span><span style=color:#f8f8f8> </span><span style=color:#000>postgis_topology</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASCADE</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Create if not exists
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#000>EXTENSION</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IF</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NOT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>EXISTS</span><span style=color:#f8f8f8> </span><span style=color:#000>vector</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><blockquote><p>Note: <code>CREATE EXTENSION</code> uses the <strong>extension name</strong> (e.g., <code>vector</code>), not the package alias (<code>pgvector</code>).</p></blockquote><hr><h2 id=create-during-cluster-initialization>Create During Cluster Initialization</h2><p>Declare extensions in <a href=/docs/pgsql/param#pg_databases><code>pg_databases</code></a>, and they will be automatically created during cluster initialization:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg-meta</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_cluster</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg-meta</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_databases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>meta</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>vector }                        </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Use default schema</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: postgis, schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>public }       </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Specify schema</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pg_stat_statements, schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>Pigsty will automatically execute <code>CREATE EXTENSION</code> after database creation.</p><hr><h2 id=extensions-requiring-preload>Extensions Requiring Preload</h2><p>Some extensions must be added to <code>shared_preload_libraries</code> and restarted before creation:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>pg-meta</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_cluster</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg-meta</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_libs</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;timescaledb, pg_stat_statements, auto_explain&#39;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_databases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span>- <span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>meta</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>          </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>timescaledb } </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Requires preload</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>If you try to create without preloading, you will receive an error message.</p><p>Common extensions requiring preload: <code>timescaledb</code>, <code>citus</code>, <code>pg_cron</code>, <code>pg_net</code>, <code>pgaudit</code>, etc. See <a href=config>Configure Extensions</a>.</p><hr><h2 id=extension-dependencies>Extension Dependencies</h2><p>Some extensions depend on other extensions and need to be created in order:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- postgis_topology depends on postgis
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#000>EXTENSION</span><span style=color:#f8f8f8> </span><span style=color:#000>postgis</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#000>EXTENSION</span><span style=color:#f8f8f8> </span><span style=color:#000>postgis_topology</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Or use CASCADE to automatically install dependencies
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#000>EXTENSION</span><span style=color:#f8f8f8> </span><span style=color:#000>postgis_topology</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASCADE</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><hr><h2 id=extensions-not-requiring-creation>Extensions Not Requiring Creation</h2><p>A few extensions don&rsquo;t provide SQL interfaces and don&rsquo;t need <code>CREATE EXTENSION</code>:</p><table><thead><tr><th style=text-align:left>Extension</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>wal2json</code></td><td style=text-align:left>Logical decoding plugin, used directly in replication slots</td></tr><tr><td style=text-align:left><code>decoderbufs</code></td><td style=text-align:left>Logical decoding plugin</td></tr><tr><td style=text-align:left><code>decoder_raw</code></td><td style=text-align:left>Logical decoding plugin</td></tr></tbody></table><p>These extensions can be used immediately after installation, for example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Create logical replication slot using wal2json
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_create_logical_replication_slot</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;test_slot&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;wal2json&#39;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><hr><h2 id=view-extension-information>View Extension Information</h2><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- View extension details
</span></span></span><span style=display:flex><span><span style=color:#a40000>\</span><span style=color:#000>dx</span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#000>vector</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- View objects contained in extension
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_extension_config_dump</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;vector&#39;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- View extension version
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>extversion</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_extension</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>extname</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;vector&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-aeb68b34de12844024f2519dd13df6f0>8 - Update</h1><div class=lead>Upgrade PostgreSQL extension versions</div><p>Extension updates involve two levels: <strong>package updates</strong> (operating system level) and <strong>extension object updates</strong> (database level).</p><hr><h2 id=update-packages>Update Packages</h2><p>Use package managers to update extension packages:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># EL systems</span>
</span></span><span style=display:flex><span>sudo yum update pgvector_18*
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Debian/Ubuntu systems</span>
</span></span><span style=display:flex><span>sudo apt update <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> sudo apt upgrade postgresql-18-pgvector
</span></span></code></pre></div><p>Batch update using Pigsty:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Update extension packages for specified cluster</span>
</span></span><span style=display:flex><span>./pgsql.yml -l pg-meta -t pg_extension -e <span style=color:#4e9a06>&#39;{&#34;pg_extensions&#34;:[&#34;pgvector&#34;]}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Using pig package manager</span>
</span></span><span style=display:flex><span>pig update pgvector
</span></span></code></pre></div><hr><h2 id=update-extension-objects>Update Extension Objects</h2><p>After package updates, extension objects in the database may need to be synchronized.</p><h3 id=view-updatable-extensions>View Updatable Extensions</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- View installed extensions and their versions
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>default_version</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>installed_version</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_available_extensions</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>installed_version</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IS</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NOT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NULL</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- View upgradable extensions
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>installed_version</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>default_version</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_available_extensions</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>installed_version</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IS</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NOT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NULL</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>AND</span><span style=color:#f8f8f8> </span><span style=color:#000>installed_version</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&lt;&gt;</span><span style=color:#f8f8f8> </span><span style=color:#000>default_version</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=execute-extension-update>Execute Extension Update</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Update to latest version
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>ALTER</span><span style=color:#f8f8f8> </span><span style=color:#000>EXTENSION</span><span style=color:#f8f8f8> </span><span style=color:#000>pgvector</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>UPDATE</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Update to specific version
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>ALTER</span><span style=color:#f8f8f8> </span><span style=color:#000>EXTENSION</span><span style=color:#f8f8f8> </span><span style=color:#000>pgvector</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>UPDATE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>TO</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;0.8.0&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=view-update-paths>View Update Paths</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- View available upgrade paths for extension
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_extension_update_paths</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;pgvector&#39;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><hr><h2 id=important-notes>Important Notes</h2><ol><li><p><strong>Backup first</strong>: Backup the database before updating extensions, especially for extensions involving data type changes.</p></li><li><p><strong>Check compatibility</strong>: Some extension major version upgrades may be incompatible. Consult the extension&rsquo;s upgrade documentation.</p></li><li><p><strong>Preloaded extensions</strong>: If updating a preloaded extension (like <code>timescaledb</code>), a database restart may be required after the update.</p></li><li><p><strong>Dependencies</strong>: If other extensions depend on the updated extension, update them in dependency order.</p></li><li><p><strong>Replication environments</strong>: In master-slave replication environments, test updates on slaves first, then update the master after confirmation.</p></li></ol><hr><h2 id=common-issues>Common Issues</h2><h3 id=update-failure>Update Failure</h3><p>If <code>ALTER EXTENSION UPDATE</code> fails, it may be because:</p><ul><li>No available upgrade path</li><li>Extension is in use</li><li>Insufficient permissions</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- View extension dependencies
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_depend</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>refobjid</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>oid</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_extension</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>extname</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;pgvector&#39;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><h3 id=rollback-update>Rollback Update</h3><p>PostgreSQL extensions typically don&rsquo;t support direct rollback. To rollback:</p><ol><li>Restore from backup</li><li>Or: Uninstall new version extension, install old version package, recreate extension</li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-13869765de25ae294c556ad54ac4ee27>9 - Remove</h1><div class=lead>Uninstall PostgreSQL extensions</div><p>Removing extensions involves two levels: <strong>dropping extension objects</strong> (database level) and <strong>uninstalling packages</strong> (operating system level).</p><hr><h2 id=drop-extension-objects>Drop Extension Objects</h2><p>Use <code>DROP EXTENSION</code> to remove extensions from the database:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Drop extension
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>DROP</span><span style=color:#f8f8f8> </span><span style=color:#000>EXTENSION</span><span style=color:#f8f8f8> </span><span style=color:#000>pgvector</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- If there are dependent objects, cascade delete is required
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>DROP</span><span style=color:#f8f8f8> </span><span style=color:#000>EXTENSION</span><span style=color:#f8f8f8> </span><span style=color:#000>pgvector</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASCADE</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><blockquote><p><strong>Warning</strong>: <code>CASCADE</code> will drop all objects that depend on this extension (tables, functions, views, etc.). Use with caution.</p></blockquote><h3 id=check-extension-dependencies>Check Extension Dependencies</h3><p>It&rsquo;s recommended to check dependencies before dropping:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- View objects that depend on an extension
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>classid</span><span style=color:#000;font-weight:700>::</span><span style=color:#000>regclass</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>objid</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>deptype</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_depend</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>refobjid</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>oid</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_extension</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>extname</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;pgvector&#39;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- View tables using extension types
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relname</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>table_name</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>a</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attname</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>column_name</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>typname</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>type_name</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_attribute</span><span style=color:#f8f8f8> </span><span style=color:#000>a</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>JOIN</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_class</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>c</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>a</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attrelid</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>c</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>oid</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>JOIN</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_type</span><span style=color:#f8f8f8> </span><span style=color:#000>t</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>a</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>atttypid</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>oid</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>t</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>typname</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;vector&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><hr><h2 id=remove-preload>Remove Preload</h2><p>If the extension is in <code>shared_preload_libraries</code>, it must be removed from the preload list after dropping:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Modify shared_preload_libraries, remove extension</span>
</span></span><span style=display:flex><span>pg edit-config pg-meta --force -p <span style=color:#000>shared_preload_libraries</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;pg_stat_statements, auto_explain&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Restart to apply configuration</span>
</span></span><span style=display:flex><span>pg restart pg-meta
</span></span></code></pre></div><hr><h2 id=uninstall-packages>Uninstall Packages</h2><p>After dropping the extension from the database, you can optionally uninstall the package:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># EL systems</span>
</span></span><span style=display:flex><span>sudo yum remove pgvector_18*
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Debian/Ubuntu systems</span>
</span></span><span style=display:flex><span>sudo apt remove postgresql-18-pgvector
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Using pig package manager</span>
</span></span><span style=display:flex><span>pig remove pgvector
</span></span></code></pre></div><blockquote><p>Typically keeping the package doesn&rsquo;t cause issues. Only uninstall when you need to free disk space or resolve conflicts.</p></blockquote><hr><h2 id=important-notes>Important Notes</h2><ol><li><p><strong>Data loss risk</strong>: Using <code>CASCADE</code> will drop dependent objects, potentially causing data loss.</p></li><li><p><strong>Application compatibility</strong>: Ensure applications no longer use the extension&rsquo;s functionality before dropping.</p></li><li><p><strong>Preload order</strong>: If dropping a preloaded extension, be sure to also remove it from <code>shared_preload_libraries</code>, otherwise the database may fail to start.</p></li><li><p><strong>Master-slave environments</strong>: In replication environments, <code>DROP EXTENSION</code> automatically replicates to slaves.</p></li></ol><hr><h2 id=operation-sequence>Operation Sequence</h2><p>Complete extension removal workflow:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 1. Check dependencies</span>
</span></span><span style=display:flex><span>psql -d mydb -c <span style=color:#4e9a06>&#34;SELECT * FROM pg_depend WHERE refobjid = (SELECT oid FROM pg_extension WHERE extname = &#39;pgvector&#39;);&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 2. Drop extension from database</span>
</span></span><span style=display:flex><span>psql -d mydb -c <span style=color:#4e9a06>&#34;DROP EXTENSION pgvector;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 3. If it&#39;s a preloaded extension, remove from shared_preload_libraries</span>
</span></span><span style=display:flex><span>pg edit-config pg-meta --force -p <span style=color:#000>shared_preload_libraries</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;pg_stat_statements, auto_explain&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 4. Restart database (if preload configuration was modified)</span>
</span></span><span style=display:flex><span>pg restart pg-meta
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 5. Optional: Uninstall package</span>
</span></span><span style=display:flex><span>sudo yum remove pgvector_18*
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-cd40e09e16b398209123543c21e68960>10 - Default Extensions</h1><div class=lead>PostgreSQL extensions installed by default in Pigsty</div><p>Pigsty installs and enables some core extensions by default when initializing PostgreSQL clusters.</p><hr><h2 id=default-installed-extensions>Default Installed Extensions</h2><p>Extensions installed by default via <a href=/docs/pgsql/param#pg_packages><code>pg_packages</code></a>:</p><table><thead><tr><th style=text-align:left>Extension</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>pg_repack</code></td><td style=text-align:left>Handle table bloat online, important maintenance tool</td></tr><tr><td style=text-align:left><code>wal2json</code></td><td style=text-align:left>Logical decoding outputs JSON format changes, commonly used in CDC scenarios</td></tr></tbody></table><p>Extensions optionally installed via <a href=/docs/pgsql/param#pg_extensions><code>pg_extensions</code></a> (commented by default):</p><table><thead><tr><th style=text-align:left>Extension</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>postgis</code></td><td style=text-align:left>Geospatial database extension</td></tr><tr><td style=text-align:left><code>timescaledb</code></td><td style=text-align:left>Time-series database extension</td></tr><tr><td style=text-align:left><code>pgvector</code></td><td style=text-align:left>Vector data type and indexes</td></tr></tbody></table><hr><h2 id=default-enabled-extensions>Default Enabled Extensions</h2><p>Extensions enabled by default in all databases via <a href=/docs/pgsql/param#pg_default_extensions><code>pg_default_extensions</code></a>:</p><table><thead><tr><th style=text-align:left>Extension</th><th style=text-align:left>Schema</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>pg_stat_statements</code></td><td style=text-align:left>monitor</td><td style=text-align:left>SQL statement execution statistics</td></tr><tr><td style=text-align:left><code>pgstattuple</code></td><td style=text-align:left>monitor</td><td style=text-align:left>Tuple-level statistics</td></tr><tr><td style=text-align:left><code>pg_buffercache</code></td><td style=text-align:left>monitor</td><td style=text-align:left>Buffer cache inspection</td></tr><tr><td style=text-align:left><code>pageinspect</code></td><td style=text-align:left>monitor</td><td style=text-align:left>Page-level inspection</td></tr><tr><td style=text-align:left><code>pg_prewarm</code></td><td style=text-align:left>monitor</td><td style=text-align:left>Relation prewarming</td></tr><tr><td style=text-align:left><code>pg_visibility</code></td><td style=text-align:left>monitor</td><td style=text-align:left>Visibility map inspection</td></tr><tr><td style=text-align:left><code>pg_freespacemap</code></td><td style=text-align:left>monitor</td><td style=text-align:left>Free space map inspection</td></tr><tr><td style=text-align:left><code>postgres_fdw</code></td><td style=text-align:left>public</td><td style=text-align:left>PostgreSQL foreign data wrapper</td></tr><tr><td style=text-align:left><code>file_fdw</code></td><td style=text-align:left>public</td><td style=text-align:left>File foreign data wrapper</td></tr><tr><td style=text-align:left><code>btree_gist</code></td><td style=text-align:left>public</td><td style=text-align:left>B-tree GiST operator classes</td></tr><tr><td style=text-align:left><code>btree_gin</code></td><td style=text-align:left>public</td><td style=text-align:left>B-tree GIN operator classes</td></tr><tr><td style=text-align:left><code>pg_trgm</code></td><td style=text-align:left>public</td><td style=text-align:left>Trigram matching</td></tr><tr><td style=text-align:left><code>intagg</code></td><td style=text-align:left>public</td><td style=text-align:left>Integer aggregator</td></tr><tr><td style=text-align:left><code>intarray</code></td><td style=text-align:left>public</td><td style=text-align:left>Integer array functions</td></tr><tr><td style=text-align:left><code>pg_repack</code></td><td style=text-align:left>-</td><td style=text-align:left>Online table reorganization</td></tr></tbody></table><p>These extensions provide basic monitoring, operations, and feature enhancement capabilities.</p><hr><h2 id=default-preloaded-extensions>Default Preloaded Extensions</h2><p>Extensions preloaded by default into <code>shared_preload_libraries</code> via <a href=/docs/pgsql/param#pg_libs><code>pg_libs</code></a>:</p><table><thead><tr><th style=text-align:left>Extension</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>pg_stat_statements</code></td><td style=text-align:left>Track execution statistics of all SQL statements</td></tr><tr><td style=text-align:left><code>auto_explain</code></td><td style=text-align:left>Automatically log execution plans for slow queries</td></tr></tbody></table><p>These two extensions provide basic observability and are strongly recommended to keep.</p><hr><h2 id=customize-default-extensions>Customize Default Extensions</h2><p>You can customize default installed and enabled extensions by modifying configuration parameters:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>all</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#8f5902;font-style:italic># Modify default extension packages</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_packages</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span>- <span style=color:#000>pgsql-main pgsql-common</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span>- <span style=color:#000>pg_repack_$v* wal2json_$v*</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#8f5902;font-style:italic># Modify default installed extensions</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span><span style=color:#000>postgis, timescaledb, pgvector ]</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#8f5902;font-style:italic># Modify default preloaded extensions</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_libs</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;timescaledb, pg_stat_statements, auto_explain&#39;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#8f5902;font-style:italic># Modify default enabled extensions</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_default_extensions</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name: pg_stat_statements, schema</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span>- {<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_repack }</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># ... add more</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>For detailed extension usage, please refer to:</p><ul><li><a href=start>Quick Start</a>: Overview of the extension usage process</li><li><a href=intro>Extension Introduction</a>: Core concepts of extensions</li><li><a href=install>Install Extensions</a>: How to install extensions</li><li><a href=config>Configure Extensions</a>: Preloading and parameter configuration</li><li><a href=create>Create Extensions</a>: Creating extensions in databases</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-fef9a9d4af92d185f18fab30d92a530d>11 - Repository</h1><div class=lead>Pigsty extension software repository configuration</div><p>Pigsty provides supplementary extension repositories, offering additional extension packages on top of the PGDG official repository.</p><hr><h2 id=yum-repository>YUM Repository</h2><p>Applicable to EL 7/8/9/10 and compatible systems (RHEL, Rocky, AlmaLinux, CentOS, etc.).</p><h3 id=add-repository>Add Repository</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Add GPG public key</span>
</span></span><span style=display:flex><span>curl -fsSL https://repo.pigsty.io/key <span style=color:#000;font-weight:700>|</span> sudo tee /etc/pki/rpm-gpg/RPM-GPG-KEY-pigsty &gt;/dev/null
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Add repository configuration</span>
</span></span><span style=display:flex><span>curl -fsSL https://repo.pigsty.io/yum/repo <span style=color:#000;font-weight:700>|</span> sudo tee /etc/yum.repos.d/pigsty.repo &gt;/dev/null
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Refresh cache</span>
</span></span><span style=display:flex><span>sudo yum makecache
</span></span></code></pre></div><h3 id=china-mainland-mirror>China Mainland Mirror</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -fsSL https://repo.pigsty.cc/key <span style=color:#000;font-weight:700>|</span> sudo tee /etc/pki/rpm-gpg/RPM-GPG-KEY-pigsty &gt;/dev/null
</span></span><span style=display:flex><span>curl -fsSL https://repo.pigsty.cc/yum/repo <span style=color:#000;font-weight:700>|</span> sudo tee /etc/yum.repos.d/pigsty.repo &gt;/dev/null
</span></span></code></pre></div><h3 id=repository-urls>Repository URLs</h3><ul><li>International: <a href=https://repo.pigsty.io/yum/>https://repo.pigsty.io/yum/</a></li><li>China: <a href=https://repo.pigsty.cc/yum/>https://repo.pigsty.cc/yum/</a></li></ul><hr><h2 id=apt-repository>APT Repository</h2><p>Applicable to Debian 11/12/13 and Ubuntu 22.04/24.04 and compatible systems.</p><h3 id=add-repository-1>Add Repository</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Add GPG public key</span>
</span></span><span style=display:flex><span>curl -fsSL https://repo.pigsty.io/key <span style=color:#000;font-weight:700>|</span> sudo gpg --dearmor -o /etc/apt/keyrings/pigsty.gpg
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Get distribution codename and add repository</span>
</span></span><span style=display:flex><span><span style=color:#000>distro_codename</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>lsb_release -cs<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span>sudo tee /etc/apt/sources.list.d/pigsty.list &gt; /dev/null <span style=color:#4e9a06>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>deb [signed-by=/etc/apt/keyrings/pigsty.gpg] https://repo.pigsty.io/apt/infra generic main
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>deb [signed-by=/etc/apt/keyrings/pigsty.gpg] https://repo.pigsty.io/apt/pgsql ${distro_codename} main
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Refresh cache</span>
</span></span><span style=display:flex><span>sudo apt update
</span></span></code></pre></div><h3 id=china-mainland-mirror-1>China Mainland Mirror</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -fsSL https://repo.pigsty.cc/key <span style=color:#000;font-weight:700>|</span> sudo gpg --dearmor -o /etc/apt/keyrings/pigsty.gpg
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#000>distro_codename</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>lsb_release -cs<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span>sudo tee /etc/apt/sources.list.d/pigsty.list &gt; /dev/null <span style=color:#4e9a06>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>deb [signed-by=/etc/apt/keyrings/pigsty.gpg] https://repo.pigsty.cc/apt/infra generic main
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>deb [signed-by=/etc/apt/keyrings/pigsty.gpg] https://repo.pigsty.cc/apt/pgsql/${distro_codename} ${distro_codename} main
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>EOF</span>
</span></span></code></pre></div><h3 id=repository-urls-1>Repository URLs</h3><ul><li>International: <a href=https://repo.pigsty.io/apt/>https://repo.pigsty.io/apt/</a></li><li>China Mirror: <a href=https://repo.pigsty.cc/apt/>https://repo.pigsty.cc/apt/</a></li></ul><hr><h2 id=gpg-signature>GPG Signature</h2><p>All packages are signed with GPG:</p><ul><li>Fingerprint: <code>9592A7BC7A682E7333376E09E7935D8DB9BD8B20</code></li><li>Short ID: <code>B9BD8B20</code></li></ul><hr><h2 id=repository-policy>Repository Policy</h2><p>The Pigsty repository follows these principles:</p><ol><li><strong>Supplementary</strong>: Only includes extensions not present in the PGDG repository</li><li><strong>Consistency</strong>: Once an extension enters the PGDG repository, the Pigsty repository will remove it or keep it consistent</li><li><strong>Compatibility</strong>: Supports multiple major versions of PostgreSQL 13-18</li><li><strong>Multi-platform</strong>: Supports x86_64 and aarch64 architectures</li></ol><hr><h2 id=related-resources>Related Resources</h2><ul><li><a href=https://pgext.cloud/list>Pigsty Extension Catalog</a>: Browse all available extensions</li><li><a href=https://download.postgresql.org/pub/repos/yum/>PGDG YUM Repository</a></li><li><a href=https://apt.postgresql.org/pub/repos/apt/>PGDG APT Repository</a></li></ul></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="Email - Vonng" aria-label="Email - Vonng"><a target=_blank rel=noopener href=mailto:rh@vonng.com aria-label="Email - Vonng"><i class="fa fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="GitHub - Vonng" aria-label="GitHub - Vonng"><a target=_blank rel=noopener href=https://github.com/Vonng aria-label="GitHub - Vonng"><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="X - Vonng" aria-label="X - Vonng"><a target=_blank rel=noopener href=https://x.com/RonVonng aria-label="X - Vonng"><i class="fab fa-x-twitter"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="X - Pigsty" aria-label="X - Pigsty"><a target=_blank rel=noopener href=https://x.com/PlGSTY aria-label="X - Pigsty"><i class="fab fa-twitter"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="LinkedIn - Vonng" aria-label="LinkedIn - Vonng"><a target=_blank rel=noopener href=https://www.linkedin.com/in/vonng/ aria-label="LinkedIn - Vonng"><i class="fab fa-linkedin"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Discord aria-label=Discord><a target=_blank rel=noopener href=https://discord.gg/wDzt5VyWEz aria-label=Discord><i class="fab fa-discord"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Telegram aria-label=Telegram><a target=_blank rel=noopener href=https://t.me/joinchat/gV9zfZraNPM3YjFh aria-label=Telegram><i class="fab fa-telegram"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=WeChat aria-label=WeChat><a target=_blank rel=noopener href=/img/pigsty/pigsty-cc.jpg aria-label=WeChat><i class="fab fa-weixin"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Discussion aria-label=Discussion><a target=_blank rel=noopener href=https://github.com/orgs/pgsty/discussions aria-label=Discussion><i class="fab fa-discourse"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Repo aria-label=Repo><a target=_blank rel=noopener href=https://github.com/pgsty/pigsty aria-label=Repo><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2018&ndash;2026
<span class=td-footer__authors>Ruohang Feng</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=/docs/about/privacy target=_blank rel=noopener>Privacy Policy</a></span></div></div></div></footer></div><script src=/js/main.min.d20e761d6aa4d2ace0488e45da0e775a8b17300a8430f32fbcfa016e6c9e6eb6.js integrity="sha256-0g52HWqk0qzgSI5F2g53WosXMAqEMPMvvPoBbmyebrY=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>