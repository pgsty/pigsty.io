<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js data-theme-init><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=color-scheme content="light dark"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#000000"><style>html{background:Canvas;color:CanvasText}@media(prefers-color-scheme:dark){html{background:#0b0d12;color:#e6e6e6}}html[data-theme-init] *{transition:none!important}</style><script>(function(){const t="td-color-theme",n=localStorage.getItem(t);let e=n||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");e==="auto"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-bs-theme",e)})()</script><link rel=canonical type=text/html href=https://pigsty.io/docs/pgsql/monitor/><link rel=alternate type=application/rss+xml href=https://pigsty.io/docs/pgsql/monitor/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Monitoring | PIGSTY</title><meta name=description content="Overview of Pigsty's monitoring system architecture and how to monitor existing PostgreSQL instances"><meta property="og:url" content="https://pigsty.io/docs/pgsql/monitor/"><meta property="og:site_name" content="PIGSTY"><meta property="og:title" content="Monitoring"><meta property="og:description" content="Overview of Pigsty's monitoring system architecture and how to monitor existing PostgreSQL instances"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Monitoring"><meta itemprop=description content="Overview of Pigsty's monitoring system architecture and how to monitor existing PostgreSQL instances"><meta itemprop=dateModified content="2026-01-08T21:14:36+08:00"><meta itemprop=wordCount content="3718"><meta itemprop=keywords content="Reference,PGSQL"><meta name=twitter:card content="summary"><meta name=twitter:title content="Monitoring"><meta name=twitter:description content="Overview of Pigsty's monitoring system architecture and how to monitor existing PostgreSQL instances"><link rel=preload href=/scss/main.min.f6da858eb22dc48110abb983f095554930a5a614c30190b4e32ee7b08a496331.css as=style integrity="sha256-9tqFjrItxIEQq7mD8JVVSTClphTDAZC04y7nsIpJYzE=" crossorigin=anonymous><link href=/scss/main.min.f6da858eb22dc48110abb983f095554930a5a614c30190b4e32ee7b08a496331.css rel=stylesheet integrity="sha256-9tqFjrItxIEQq7mD8JVVSTClphTDAZC04y7nsIpJYzE=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-LG1V9WTKGE"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LG1V9WTKGE")}</script></head><body class=td-section><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="td-navbar-container container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"><svg viewBox="0 0 24 24" width="24" height="24"><defs/><g id="32" fill="none" stroke-dasharray="none" fill-opacity="1" stroke-opacity="1" stroke="none"><title>32</title><g id="32_图层_2"><title>图层 2</title><g id="Group_17"><g id="Graphic_16"/><g id="Graphic_15"><path d="M7.666187 11.971335l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" fill="#bbb" fill-opacity=".9526367"/><path d="M7.666187 11.971335l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_14"><path d="M7.666187 19.474806l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" fill="#de372c" fill-opacity=".8545852"/><path d="M7.666187 19.474806l2.165064-3.75H14.16138l2.165065 3.75-2.165065 3.75H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_13"><path d="M14.161476 15.751202l2.165064-3.75h4.33013l2.165064 3.75-2.165064 3.75H16.32654z" fill="#424242" fill-opacity=".9016462"/><path d="M14.161476 15.751202l2.165064-3.75h4.33013l2.165064 3.75-2.165064 3.75H16.32654z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_12"><path d="M14.161476 8.226008 16.32654 4.4760076h4.33013L22.821734 8.226008l-2.165064 3.75H16.32654z" fill="#ffa269" fill-opacity=".8975772"/><path d="M14.161476 8.226008 16.32654 4.4760076h4.33013L22.821734 8.226008l-2.165064 3.75H16.32654z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_11"><path d="M7.666187 4.5 9.831251.75H14.16138L16.326445 4.5 14.16138 8.25H9.831251z" fill="#419edb" fill-opacity=".8979957"/><path d="M7.666187 4.5 9.831251.75H14.16138L16.326445 4.5 14.16138 8.25H9.831251z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_10"><path d="M1.1491742 8.226008 3.3142388 4.4760076H7.644368L9.809432 8.226008l-2.165064 3.75H3.3142388z" fill="#2f6793" fill-opacity=".9002511"/><path d="M1.1491742 8.226008 3.3142388 4.4760076H7.644368L9.809432 8.226008l-2.165064 3.75H3.3142388z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g><g id="Graphic_9"><path d="M1.182071 15.741036l2.1650645-3.75h4.330129l2.1650645 3.75-2.1650645 3.75H3.3471355z" fill="#53ac79" fill-opacity=".9"/><path d="M1.182071 15.741036l2.1650645-3.75h4.330129l2.1650645 3.75-2.1650645 3.75H3.3471355z" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width=".6730434"/></g></g></g></g></svg></span><span class=navbar-brand__name>PIGSTY</span></a><div class="td-navbar-nav-scroll td-navbar-nav-scroll--indicator" id=main_navbar><div class="scroll-indicator scroll-left"></div><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/docs/><i class='fa-solid fa-book'></i><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=/blog/><i class="fas fa-blog"></i><span>Blog</span></a></li><li class="nav-item dropdown d-none d-lg-block td-navbar__version-menu"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>Ver</a><ul class=dropdown-menu><li><a class=dropdown-item href=https://pigsty.cc>Pigsty 中文网站</a></li><li><a class=dropdown-item href=https://doc.pgsty.com>Pigsty v3.7 Doc</a></li><li><a class=dropdown-item href=https://v34.pigsty.cc>Pigsty v3.4 Doc</a></li><li><a class=dropdown-item href=https://v27.pigsty.cc>Pigsty v2.7 Doc</a></li><li><a class=dropdown-item href=https://v15.pigsty.cc/docs>Pigsty v1.5 Doc</a></li></ul></div></li><li class="nav-item td-navbar__light-dark-menu"><div class="td-light-dark-menu dropdown"><svg class="d-none"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5.0 010 .708l-7 7a.5.5.0 01-.708.0l-3.5-3.5a.5.5.0 11.708-.708L6.5 10.293l6.646-6.647a.5.5.0 01.708.0z"/></symbol><symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></symbol><symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></symbol><symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></symbol></svg>
<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id=bd-theme type=button aria-expanded=false data-bs-toggle=dropdown aria-label="Toggle theme (auto)">
<svg class="bi my-1 theme-icon-active"><use href="#circle-half"/></svg></button><ul class=dropdown-menu aria-labelledby=bd-theme><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#sun-fill"/></svg>
Light
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"/></svg>
Dark
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center active" data-bs-theme-value=auto aria-pressed=true>
<svg class="bi me-2 opacity-50"><use href="#circle-half"/></svg>
Auto
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li></ul></div></li><li class=nav-item><a class=nav-link href=# onclick="return switchLang(),!1" title="Switch Language / 切换语言"><i class="fas fa-language"></i></a></li></ul><div class="scroll-indicator scroll-right"></div></div><div class="d-none d-lg-block td-navbar__search"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.d757e151050fd40088751a74721d74f6.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav><script>function switchLang(){var t=window.location.host,e=window.location.pathname+window.location.search+window.location.hash;t.indexOf("pigsty.io")!==-1?window.location.href="https://pigsty.cc"+e:t.indexOf("pigsty.cc")!==-1?window.location.href="https://pigsty.io"+e:window.location.href="https://pigsty.cc"+e}</script></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/docs/pgsql/monitor/>Return to the regular view of this page</a>.</p></div><h1 class=title>Monitoring</h1><div class=lead>Overview of Pigsty&rsquo;s monitoring system architecture and how to monitor existing PostgreSQL instances</div><ul><li>1: <a href=#pg-536f1aee2f7b6fc9206c282f35fe3283>Dashboards</a></li><li>2: <a href=#pg-1a2bfc805794d27d84ef5f1f8f01644b>Metrics List</a></li></ul><div class=content><p>This document introduces Pigsty&rsquo;s monitoring system architecture, including metrics, logs, and target management. It also covers how to <a href=#monitor-existing-cluster>monitor existing PG clusters</a> and remote <a href=#monitor-rds>RDS services</a>.</p><hr><h2 id=monitoring-overview>Monitoring Overview</h2><p>Pigsty uses a modern observability stack for PostgreSQL monitoring:</p><ul><li>Grafana for metrics visualization and PostgreSQL datasource</li><li>VictoriaMetrics for collecting metrics from PostgreSQL / Pgbouncer / Patroni / HAProxy / Node</li><li>VictoriaLogs for logging PostgreSQL / Pgbouncer / Patroni / pgBackRest and host component logs</li><li>Battery-included Grafana <a href=/docs/pgsql/monitor/dashboard>dashboards</a> showcasing all aspects of PostgreSQL</li></ul><p><strong>Metrics</strong></p><p>PostgreSQL monitoring metrics are fully defined by the pg_exporter configuration file: <a href=https://github.com/pgsty/pigsty/blob/main/roles/pgsql/templates/pg_exporter.yml><code>pg_exporter.yml</code></a>
They are further processed by Prometheus recording rules and alert rules: <a href=https://github.com/pgsty/pigsty/blob/main/files/prometheus/rules/pgsql.yml><code>files/prometheus/rules/pgsql.yml</code></a>.</p><p>Pigsty uses three identity labels: <code>cls</code>, <code>ins</code>, <code>ip</code>, which are attached to all metrics and logs. Additionally, metrics from Pgbouncer, host nodes (NODE), and load balancers are also used by Pigsty, with the same labels used whenever possible for correlation analysis.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>cls: pg-meta, ins: pg-meta-1, ip</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>10.10.10.10</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>cls: pg-meta, ins: pg-test-1, ip</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>10.10.10.11</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>cls: pg-meta, ins: pg-test-2, ip</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>10.10.10.12</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>cls: pg-meta, ins: pg-test-3, ip</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>10.10.10.13</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span></code></pre></div><p><strong>Logs</strong></p><p>PostgreSQL-related logs are collected by Vector and sent to the VictoriaLogs log storage/query service on infra nodes.</p><ul><li><a href=/docs/pgsql/param#pg_log_dir><code>pg_log_dir</code></a>: postgres log directory, defaults to <code>/pg/log/postgres</code></li><li><a href=/docs/pgsql/param#pgbouncer_log_dir><code>pgbouncer_log_dir</code></a>: pgbouncer log directory, defaults to <code>/pg/log/pgbouncer</code></li><li><a href=/docs/pgsql/param#patroni_log_dir><code>patroni_log_dir</code></a>: patroni log directory, defaults to <code>/pg/log/patroni</code></li><li><a href=/docs/pgsql/param#pgbackrest_log_dir><code>pgbackrest_log_dir</code></a>: pgbackrest log directory, defaults to <code>/pg/log/pgbackrest</code></li></ul><p><strong>Target Management</strong></p><p>Prometheus monitoring targets are defined in static files under <code>/etc/prometheus/targets/pgsql/</code>, with each instance having a corresponding file. Taking <code>pg-meta-1</code> as an example:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#8f5902;font-style:italic># pg-meta-1 [primary] @ 10.10.10.10</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span>- <span style=color:#204a87;font-weight:700>labels</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>cls: pg-meta, ins: pg-meta-1, ip</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>10.10.10.10</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>targets</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span>- <span style=color:#0000cf;font-weight:700>10.10.10.10</span><span style=color:#000;font-weight:700>:</span><span style=color:#0000cf;font-weight:700>9630</span><span style=color:#f8f8f8>    </span><span style=color:#8f5902;font-style:italic># &lt;--- pg_exporter for PostgreSQL metrics</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span>- <span style=color:#0000cf;font-weight:700>10.10.10.10</span><span style=color:#000;font-weight:700>:</span><span style=color:#0000cf;font-weight:700>9631</span><span style=color:#f8f8f8>    </span><span style=color:#8f5902;font-style:italic># &lt;--- pg_exporter for pgbouncer metrics</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span>- <span style=color:#0000cf;font-weight:700>10.10.10.10</span><span style=color:#000;font-weight:700>:</span><span style=color:#0000cf;font-weight:700>8008</span><span style=color:#f8f8f8>    </span><span style=color:#8f5902;font-style:italic># &lt;--- patroni metrics (when API SSL is not enabled)</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>When the global flag <a href=/docs/pgsql/param#patroni_ssl_enabled><code>patroni_ssl_enabled</code></a> is set, patroni targets will be moved to a separate file <code>/etc/prometheus/targets/patroni/&lt;ins>.yml</code>, as it uses the https scrape endpoint. When <a href=#monitor-rds>monitoring RDS</a> instances, monitoring targets are placed separately in the <code>/etc/prometheus/targets/pgrds/</code> directory and managed by <strong>cluster</strong>.</p><p>When removing a cluster using <code>bin/pgsql-rm</code> or <code>pgsql-rm.yml</code>, the Prometheus monitoring targets will be removed. You can also remove them manually or use subtasks from the playbook:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bin/pgmon-rm &lt;cls<span style=color:#000;font-weight:700>|</span>ins&gt;    <span style=color:#8f5902;font-style:italic># Remove prometheus monitoring targets from all infra nodes</span>
</span></span></code></pre></div><p>Remote RDS monitoring targets are placed in <code>/etc/prometheus/targets/pgrds/&lt;cls>.yml</code>, created by the <a href=/docs/pgsql/playbook#pgsql-monitor><code>pgsql-monitor.yml</code></a> playbook or <code>bin/pgmon-add</code> script.</p><hr><h2 id=monitoring-modes>Monitoring Modes</h2><p>Pigsty provides three monitoring modes to suit different monitoring needs.</p><table><thead><tr><th style=text-align:center>Item \ Level</th><th style=text-align:center>L1</th><th style=text-align:center>L2</th><th style=text-align:center>L3</th></tr></thead><tbody><tr><td style=text-align:center>Name</td><td style=text-align:center><a href=#monitor-rds>Basic</a></td><td style=text-align:center><a href=#monitor-existing-cluster>Managed</a></td><td style=text-align:center><strong>Standard</strong></td></tr><tr><td style=text-align:center>Abbr</td><td style=text-align:center><strong>RDS</strong></td><td style=text-align:center><strong>MANAGED</strong></td><td style=text-align:center><strong>FULL</strong></td></tr><tr><td style=text-align:center>Scenario</td><td style=text-align:center>Connection string only, e.g., RDS</td><td style=text-align:center>Existing DB, nodes manageable</td><td style=text-align:center>Instances created by Pigsty</td></tr><tr><td style=text-align:center>PGCAT Features</td><td style=text-align:center>✅ Fully Available</td><td style=text-align:center>✅ Fully Available</td><td style=text-align:center>✅ Fully Available</td></tr><tr><td style=text-align:center>PGSQL Features</td><td style=text-align:center>✅ PG metrics only</td><td style=text-align:center>✅ PG & node metrics only</td><td style=text-align:center>✅ Full Features</td></tr><tr><td style=text-align:center>Connection Pool Metrics</td><td style=text-align:center>❌ Not Available</td><td style=text-align:center>⚠️ Optional</td><td style=text-align:center>✅ Pre-installed</td></tr><tr><td style=text-align:center>Load Balancer Metrics</td><td style=text-align:center>❌ Not Available</td><td style=text-align:center>⚠️ Optional</td><td style=text-align:center>✅ Pre-installed</td></tr><tr><td style=text-align:center>PGLOG Features</td><td style=text-align:center>❌ Not Available</td><td style=text-align:center>⚠️ Optional</td><td style=text-align:center>✅ Pre-installed</td></tr><tr><td style=text-align:center>PG Exporter</td><td style=text-align:center>⚠️ On infra nodes</td><td style=text-align:center>✅ On DB nodes</td><td style=text-align:center>✅ On DB nodes</td></tr><tr><td style=text-align:center>Node Exporter</td><td style=text-align:center>❌ Not deployed</td><td style=text-align:center>✅ On DB nodes</td><td style=text-align:center>✅ On DB nodes</td></tr><tr><td style=text-align:center>Intrusiveness</td><td style=text-align:center>✅ Non-intrusive</td><td style=text-align:center>⚠️ Install Exporter</td><td style=text-align:center>⚠️ Fully managed by Pigsty</td></tr><tr><td style=text-align:center>Monitor Existing Instances</td><td style=text-align:center>✅ Supported</td><td style=text-align:center>✅ Supported</td><td style=text-align:center>❌ For Pigsty-managed only</td></tr><tr><td style=text-align:center>Monitoring Users & Views</td><td style=text-align:center>Manual setup</td><td style=text-align:center>Manual setup</td><td style=text-align:center>Auto-created by Pigsty</td></tr><tr><td style=text-align:center>Deployment Playbook</td><td style=text-align:center><code>bin/pgmon-add &lt;cls></code></td><td style=text-align:center>Partial <code>pgsql.yml</code>/<code>node.yml</code></td><td style=text-align:center><code>pgsql.yml</code></td></tr><tr><td style=text-align:center>Required Permissions</td><td style=text-align:center>Connectable PGURL from infra</td><td style=text-align:center>SSH & sudo on DB nodes</td><td style=text-align:center>SSH & sudo on DB nodes</td></tr><tr><td style=text-align:center>Feature Summary</td><td style=text-align:center>PGCAT + PGRDS</td><td style=text-align:center>Most features</td><td style=text-align:center>Full features</td></tr></tbody></table><p>Databases fully managed by Pigsty are automatically monitored with the best support and typically require no configuration. For existing PostgreSQL clusters or RDS services, if the target DB nodes <strong>can be managed by Pigsty</strong> (ssh accessible, sudo available), you can consider <a href=#monitor-existing-cluster>managed deployment</a> for a monitoring experience similar to native Pigsty. If you <strong>can only access the target database via PGURL</strong> (database connection string), such as remote RDS services, you can use <a href=#monitor-rds>basic mode</a> to monitor the target database.</p><hr><h2 id=monitor-existing-cluster>Monitor Existing Cluster</h2><p><strong>If the target DB nodes can be managed by Pigsty</strong> (<code>ssh</code> accessible and <code>sudo</code> available), you can use the <code>pg_exporter</code> task in the <a href=/docs/pgsql/playbook#pgsqlyml><code>pgsql.yml</code></a> playbook to deploy monitoring components (PG Exporter) on target nodes in the same way as standard deployments. You can also use the <code>pgbouncer</code> and <code>pgbouncer_exporter</code> tasks from that playbook to deploy connection pools and their monitoring on existing instance nodes. Additionally, you can use <code>node_exporter</code>, <code>haproxy</code>, and <code>vector</code> from <a href=/docs/node/playbook#nodeyml><strong><code>node.yml</code></strong></a> to deploy host monitoring, load balancing, and log collection components, achieving an experience identical to native Pigsty database instances.</p><p>The definition method for existing clusters is exactly the same as for clusters managed by Pigsty. You selectively execute partial tasks from the <code>pgsql.yml</code> playbook instead of running the entire playbook.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./node.yml  -l &lt;cls&gt; -t node_repo,node_pkg           <span style=color:#8f5902;font-style:italic># Add YUM repos from INFRA nodes and install packages on host nodes</span>
</span></span><span style=display:flex><span>./node.yml  -l &lt;cls&gt; -t node_exporter,node_register  <span style=color:#8f5902;font-style:italic># Configure host monitoring and add to VictoriaMetrics</span>
</span></span><span style=display:flex><span>./node.yml  -l &lt;cls&gt; -t vector                       <span style=color:#8f5902;font-style:italic># Configure host log collection and send to VictoriaLogs</span>
</span></span><span style=display:flex><span>./pgsql.yml -l &lt;cls&gt; -t pg_exporter,pg_register      <span style=color:#8f5902;font-style:italic># Configure PostgreSQL monitoring and register with VictoriaMetrics/Grafana</span>
</span></span></code></pre></div><p>Since the target database cluster already exists, you need to manually <a href=#monitor-setup>create monitoring users, schemas, and extensions</a> on the target database cluster.</p><hr><h2 id=monitor-rds>Monitor RDS</h2><p>If you <strong>can only access the target database via PGURL</strong> (database connection string), you can configure according to the instructions here. In this mode, Pigsty deploys corresponding PG Exporters on <a href=/docs/concept/arch/node#infra-node><strong>INFRA nodes</strong></a> to scrape remote database metrics, as shown below:</p><pre tabindex=0><code>------ infra ------
|                 |
|   prometheus    |            v---- pg-foo-1 ----v
|       ^         |  metrics   |         ^        |
|   pg_exporter &lt;-|------------|----  postgres    |
|   (port: 20001) |            | 10.10.10.10:5432 |
|       ^         |            ^------------------^
|       ^         |                      ^
|       ^         |            v---- pg-foo-2 ----v
|       ^         |  metrics   |         ^        |
|   pg_exporter &lt;-|------------|----  postgres    |
|   (port: 20002) |            | 10.10.10.11:5433 |
-------------------            ^------------------^
</code></pre><p>In this mode, the monitoring system will not have metrics from hosts, connection pools, load balancers, or high availability components, but the database itself and real-time status information from the data catalog are still available. Pigsty provides two dedicated monitoring dashboards focused on PostgreSQL metrics: <a href=https://demo.pigsty.io/d/pgrds-cluster>PGRDS Cluster</a> and <a href=https://demo.pigsty.io/d/pgrds-instance>PGRDS Instance</a>, while overview and database-level monitoring reuses existing dashboards. Since Pigsty cannot manage your RDS, users need to <a href=#monitor-setup>configure monitoring objects</a> on the target database in advance.</p><div class="alert alert-secondary" role=alert><div class="h4 alert-heading" role=heading>Limitations when monitoring external Postgres instances</div><ul><li>pgBouncer connection pool metrics are not available</li><li>Patroni high availability component metrics are not available</li><li>Host node monitoring metrics are not available, including node HAProxy and Keepalived metrics</li><li>Log collection and log-derived metrics are not available</li></ul></div><p>Here we use the sandbox environment as an example: suppose the <code>pg-meta</code> cluster is an RDS instance <code>pg-foo-1</code> to be monitored, and the <code>pg-test</code> cluster is an RDS cluster <code>pg-bar</code> to be monitored:</p><ol><li><p>Create monitoring schemas, users, and permissions on the target. Refer to <a href=#monitor-setup>Monitor Setup</a> for details</p></li><li><p>Declare the cluster in the configuration inventory. For example, if we want to monitor &ldquo;remote&rdquo; <code>pg-meta</code> & <code>pg-test</code> clusters:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>infra</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>            </span><span style=color:#8f5902;font-style:italic># Infra cluster for proxies, monitoring, alerts, etc.</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>hosts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>10.10.10.10</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>infra_seq</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>           </span><span style=color:#8f5902;font-style:italic># Install pg_exporter on group &#39;infra&#39; for remote postgres RDS</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_exporters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># List all remote instances here, assign a unique unused local port for k</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>20001</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_cluster: pg-foo, pg_seq: 1, pg_host: 10.10.10.10 , pg_databases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>meta }] }</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Register meta database as Grafana datasource</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>20002</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_cluster: pg-bar, pg_seq: 1, pg_host: 10.10.10.11 , pg_port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>5432</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Different connection string methods</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>20003</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_cluster: pg-bar, pg_seq: 2, pg_host: 10.10.10.12 , pg_exporter_url</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;postgres://dbuser_monitor:DBUser.Monitor@10.10.10.12:5432/postgres?sslmode=disable&#39;</span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>20004</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>pg_cluster: pg-bar, pg_seq: 3, pg_host: 10.10.10.13 , pg_monitor_username: dbuser_monitor, pg_monitor_password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>DBUser.Monitor }</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>Databases listed in the <code>pg_databases</code> field will be registered in Grafana as PostgreSQL datasources, providing data support for PGCAT monitoring dashboards. If you don&rsquo;t want to use PGCAT and register databases in Grafana, simply set <code>pg_databases</code> to an empty array or leave it blank.</p><p><img src=/img/pigsty/monitor.jpg alt=pigsty-monitor.jpg></p></li><li><p>Execute the add monitoring command: <code>bin/pgmon-add &lt;clsname></code></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bin/pgmon-add pg-foo  <span style=color:#8f5902;font-style:italic># Bring pg-foo cluster into monitoring</span>
</span></span><span style=display:flex><span>bin/pgmon-add pg-bar  <span style=color:#8f5902;font-style:italic># Bring pg-bar cluster into monitoring</span>
</span></span></code></pre></div></li><li><p>To remove remote cluster monitoring targets, use <code>bin/pgmon-rm &lt;clsname></code></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bin/pgmon-rm pg-foo  <span style=color:#8f5902;font-style:italic># Remove pg-foo from Pigsty monitoring</span>
</span></span><span style=display:flex><span>bin/pgmon-rm pg-bar  <span style=color:#8f5902;font-style:italic># Remove pg-bar from Pigsty monitoring</span>
</span></span></code></pre></div></li></ol><p>You can use more parameters to override default <code>pg_exporter</code> options. Here&rsquo;s an example configuration for monitoring Aliyun RDS for PostgreSQL and PolarDB with Pigsty:</p><details><summary>Example: Monitoring Aliyun RDS for PostgreSQL and PolarDB</summary><p>For details, refer to: <a href=https://github.com/pgsty/pigsty/blob/main/conf/demo/remote.yml>remote.yml</a></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#204a87;font-weight:700>infra</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>            </span><span style=color:#8f5902;font-style:italic># Infra cluster for proxies, monitoring, alerts, etc.</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>hosts</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>10.10.10.10</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>infra_seq</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8> </span>}<span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>vars</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>pg_exporters</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>   </span><span style=color:#8f5902;font-style:italic># List all remote RDS PG instances to be monitored here</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>20001</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>        </span><span style=color:#8f5902;font-style:italic># Assign a unique unused local port for local monitoring agent, this is a PolarDB primary</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_cluster</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg-polar                 </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># RDS cluster name (identity parameter, manually assigned name in monitoring system)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_seq</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8>                             </span><span style=color:#8f5902;font-style:italic># RDS instance number (identity parameter, manually assigned name in monitoring system)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pc-2ze379wb1d4irc18x.polardbpg.rds.aliyuncs.com</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># RDS host address</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1921</span><span style=color:#f8f8f8>                         </span><span style=color:#8f5902;font-style:italic># RDS port (from console connection info)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_exporter_auto_discovery</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># Disable new database auto-discovery feature</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_exporter_include_database</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;test&#39;</span><span style=color:#f8f8f8>  </span><span style=color:#8f5902;font-style:italic># Only monitor databases in this list (comma-separated)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_monitor_username</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_monitor  </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Monitoring username, overrides global config</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_monitor_password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>DBUser_Monitor  </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Monitoring password, overrides global config</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_databases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>test }]       </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># List of databases to enable PGCAT for, only name field needed, set register_datasource to false to not register</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>20002</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>       </span><span style=color:#8f5902;font-style:italic># This is a PolarDB standby</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_cluster</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg-polar                 </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># RDS cluster name (identity parameter, manually assigned name in monitoring system)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_seq</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#f8f8f8>                             </span><span style=color:#8f5902;font-style:italic># RDS instance number (identity parameter, manually assigned name in monitoring system)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pe-2ze7tg620e317ufj4.polarpgmxs.rds.aliyuncs.com</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># RDS host address</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1521</span><span style=color:#f8f8f8>                         </span><span style=color:#8f5902;font-style:italic># RDS port (from console connection info)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_exporter_auto_discovery</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># Disable new database auto-discovery feature</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_exporter_include_database</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;test,postgres&#39;</span><span style=color:#f8f8f8>  </span><span style=color:#8f5902;font-style:italic># Only monitor databases in this list (comma-separated)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_monitor_username</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_monitor  </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Monitoring username</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_monitor_password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>DBUser_Monitor  </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Monitoring password</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_databases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>test } ]       </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># List of databases to enable PGCAT for, only name field needed, set register_datasource to false to not register</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>20004</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># This is a basic single-node RDS for PostgreSQL instance</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_cluster</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg-rds                   </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># RDS cluster name (identity parameter, manually assigned name in monitoring system)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_seq</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8>                             </span><span style=color:#8f5902;font-style:italic># RDS instance number (identity parameter, manually assigned name in monitoring system)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pgm-2zern3d323fe9ewk.pg.rds.aliyuncs.com </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># RDS host address</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>5432</span><span style=color:#f8f8f8>                         </span><span style=color:#8f5902;font-style:italic># RDS port (from console connection info)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_exporter_auto_discovery</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>true</span><span style=color:#f8f8f8>      </span><span style=color:#8f5902;font-style:italic># Disable new database auto-discovery feature</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_exporter_include_database</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;rds&#39;</span><span style=color:#f8f8f8>   </span><span style=color:#8f5902;font-style:italic># Only monitor databases in this list (comma-separated)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_monitor_username</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_monitor  </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Monitoring username</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_monitor_password</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>DBUser_Monitor  </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Monitoring password</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_databases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>rds } ]      </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># List of databases to enable PGCAT for, only name field needed, set register_datasource to false to not register</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>20005</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># This is a high-availability RDS for PostgreSQL cluster primary</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_cluster</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg-rdsha                 </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># RDS cluster name (identity parameter, manually assigned name in monitoring system)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_seq</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8>                             </span><span style=color:#8f5902;font-style:italic># RDS instance number (identity parameter, manually assigned name in monitoring system)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pgm-2ze3d35d27bq08wu.pg.rds.aliyuncs.com </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># RDS host address</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>5432</span><span style=color:#f8f8f8>                         </span><span style=color:#8f5902;font-style:italic># RDS port (from console connection info)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_exporter_include_database</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;rds&#39;</span><span style=color:#f8f8f8>   </span><span style=color:#8f5902;font-style:italic># Only monitor databases in this list (comma-separated)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_databases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>rds }, {name : test} ] </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Include these two databases in PGCAT management, register as Grafana datasources</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>20006</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># This is a high-availability RDS for PostgreSQL cluster read-only instance (standby)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_cluster</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pg-rdsha                 </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># RDS cluster name (identity parameter, manually assigned name in monitoring system)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_seq</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#f8f8f8>                             </span><span style=color:#8f5902;font-style:italic># RDS instance number (identity parameter, manually assigned name in monitoring system)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_host</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>pgr-2zexqxalk7d37edt.pg.rds.aliyuncs.com </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># RDS host address</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_port</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>5432</span><span style=color:#f8f8f8>                         </span><span style=color:#8f5902;font-style:italic># RDS port (from console connection info)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_exporter_include_database</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;rds&#39;</span><span style=color:#f8f8f8>   </span><span style=color:#8f5902;font-style:italic># Only monitor databases in this list (comma-separated)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>pg_databases</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>[</span><span style=color:#f8f8f8> </span>{<span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>name</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>rds }, {name : test} ] </span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic># Include these two databases in PGCAT management, register as Grafana datasources</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div></details><hr><h2 id=monitor-setup>Monitor Setup</h2><p>When you want to monitor existing instances, whether RDS or self-built PostgreSQL instances, you need to configure the target database so that Pigsty can access them.</p><p>To monitor an external existing PostgreSQL instance, you need a connection string that can access that instance/cluster. Any accessible connection string (business user, superuser) can be used, but we recommend using a dedicated monitoring user to avoid permission leaks.</p><ul><li><input disabled type=checkbox> <a href=#monitor-user>Monitor User</a>: The default username is <code>dbuser_monitor</code>, which should belong to the <code>pg_monitor</code> role group or have access to relevant views</li><li><input disabled type=checkbox> <a href=#monitor-authentication>Monitor Authentication</a>: Default password authentication is used; ensure HBA policies allow the monitoring user to access databases from the admin node or DB node locally</li><li><input disabled type=checkbox> <a href=#monitor-schema>Monitor Schema</a>: Fixed schema name <code>monitor</code> is used for installing additional <strong>monitoring views</strong> and extension plugins; optional but recommended</li><li><input disabled type=checkbox> <a href=#monitor-extension>Monitor Extension</a>: <strong>Strongly recommended</strong> to enable the built-in monitoring extension <code>pg_stat_statements</code></li><li><input disabled type=checkbox> <a href=#monitor-views>Monitor Views</a>: Monitoring views are optional but can provide additional metric support</li></ul><h3 id=monitor-user>Monitor User</h3><p>Using the default monitoring user <code>dbuser_monitor</code> as an example, create the following user on the target database cluster.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>USER</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_monitor</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>                                       </span><span style=color:#8f5902;font-style:italic>-- Create monitoring user
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>COMMENT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ROLE</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_monitor</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IS</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;system monitor user&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>          </span><span style=color:#8f5902;font-style:italic>-- Comment on monitoring user
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>GRANT</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_monitor</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>TO</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_monitor</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>                               </span><span style=color:#8f5902;font-style:italic>-- Grant pg_monitor privilege to monitoring user, otherwise some metrics cannot be collected
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>ALTER</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>USER</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_monitor</span><span style=color:#f8f8f8> </span><span style=color:#000>PASSWORD</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;DBUser.Monitor&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>              </span><span style=color:#8f5902;font-style:italic>-- Modify monitoring user password as needed (strongly recommended! but keep consistent with Pigsty config)
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>ALTER</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>USER</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_monitor</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SET</span><span style=color:#f8f8f8> </span><span style=color:#000>log_min_duration_statement</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1000</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>  </span><span style=color:#8f5902;font-style:italic>-- Recommended to avoid logs filling up with monitoring slow queries
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>ALTER</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>USER</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_monitor</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SET</span><span style=color:#f8f8f8> </span><span style=color:#000>search_path</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>,</span><span style=color:#204a87;font-weight:700>public</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>       </span><span style=color:#8f5902;font-style:italic>-- Recommended to ensure pg_stat_statements extension works properly
</span></span></span></code></pre></div><p>Please note that the monitoring user and password created here should be consistent with <a href=/docs/pgsql/param#pg_monitor_username><code>pg_monitor_username</code></a> and <a href=/docs/pgsql/param#pg_monitor_password><code>pg_monitor_password</code></a>.</p><hr><h3 id=monitor-authentication>Monitor Authentication</h3><p>Configure the database <code>pg_hba.conf</code> file, adding the following rules to allow the monitoring user to access all databases from localhost and the admin machine using password authentication.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:#8f5902;font-style:italic># allow local role monitor with password</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>local   all  dbuser_monitor                    md5</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>host    all  dbuser_monitor  127.0.0.1/32      md5</span>
</span></span><span style=display:flex><span><span style=color:#c4a000>host    all  dbuser_monitor  &lt;admin_machine_IP&gt;/32 md5</span>
</span></span></code></pre></div><p>If your RDS doesn&rsquo;t support defining HBA, simply whitelist the internal IP address of the machine running Pigsty.</p><hr><h3 id=monitor-schema>Monitor Schema</h3><p>The monitoring schema is <strong>optional</strong>; even without it, the main functionality of Pigsty&rsquo;s monitoring system can work properly, but we strongly recommend creating this schema.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SCHEMA</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IF</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NOT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>EXISTS</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>               </span><span style=color:#8f5902;font-style:italic>-- Create dedicated monitoring schema
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>GRANT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>USAGE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SCHEMA</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>TO</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_monitor</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>   </span><span style=color:#8f5902;font-style:italic>-- Allow monitoring user to use it
</span></span></span></code></pre></div><hr><h3 id=monitor-extension>Monitor Extension</h3><p>The monitoring extension is optional, but we strongly recommend enabling the <code>pg_stat_statements</code> extension, which provides important data about query performance.</p><p>Note: This extension must be listed in the database parameter <code>shared_preload_libraries</code> to take effect, and modifying that parameter requires a database restart.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#000>EXTENSION</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IF</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NOT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>EXISTS</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;pg_stat_statements&#34;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WITH</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SCHEMA</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;monitor&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><p>Please note that you should install this extension in the default admin database <code>postgres</code>. Sometimes RDS doesn&rsquo;t allow you to create a monitoring schema in the <code>postgres</code> database. In such cases, you can install the <code>pg_stat_statements</code> plugin in the default <code>public</code> schema, as long as you ensure the monitoring user&rsquo;s search_path is configured as above so it can find the <code>pg_stat_statements</code> view.</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#000>EXTENSION</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IF</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NOT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>EXISTS</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;pg_stat_statements&#34;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>ALTER</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>USER</span><span style=color:#f8f8f8> </span><span style=color:#000>dbuser_monitor</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SET</span><span style=color:#f8f8f8> </span><span style=color:#000>search_path</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>,</span><span style=color:#204a87;font-weight:700>public</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8> </span><span style=color:#8f5902;font-style:italic>-- Recommended to ensure pg_stat_statements extension works properly
</span></span></span></code></pre></div><hr><h3 id=monitor-views>Monitor Views</h3><p>Monitoring views provide several commonly used pre-processed results and encapsulate permissions for monitoring metrics that require high privileges (such as shared memory allocation), making them convenient for querying and use. Strongly recommended to create in all databases requiring monitoring.</p><details><summary>Monitoring schema and monitoring view definitions</summary><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#8f5902;font-style:italic>----------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Table bloat estimate : monitor.pg_table_bloat
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>----------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>DROP</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IF</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>EXISTS</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_table_bloat</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASCADE</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>OR</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>REPLACE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_table_bloat</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>CURRENT_CATALOG</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>datname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>nspname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>relname</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>tblid</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>bs</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#000>tblpages</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>size</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#000>tblpages</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8> </span><span style=color:#000>est_tblpages_ff</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tblpages</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8> </span><span style=color:#000>est_tblpages_ff</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000>tblpages</span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>FLOAT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>ratio</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>ceil</span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8> </span><span style=color:#000>reltuples</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bs</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>page_hdr</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>fillfactor</span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tpl_size</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#000>ceil</span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8> </span><span style=color:#000>toasttuples</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>est_tblpages_ff</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#000>tblpages</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>fillfactor</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>bs</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>tblid</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>nspname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>relname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>is_na</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                  </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                      </span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#000>tpl_hdr_size</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#000>tpl_data_size</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                          </span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#000>tpl_hdr_size</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>%</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#000>tpl_hdr_size</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>%</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                          </span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#000>ceil</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tpl_data_size</span><span style=color:#000;font-weight:700>)::</span><span style=color:#204a87>INT</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>%</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#000>ceil</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tpl_data_size</span><span style=color:#000;font-weight:700>)::</span><span style=color:#204a87>INT</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>%</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                          </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tpl_size</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>heappages</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#000>toastpages</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tblpages</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>heappages</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                      </span><span style=color:#000>toastpages</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>reltuples</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>toasttuples</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>bs</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>page_hdr</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>tblid</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>nspname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>relname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>fillfactor</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>is_na</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                  </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                           </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                               </span><span style=color:#000>tbl</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>oid</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tblid</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>ns</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>nspname</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>reltuples</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                               </span><span style=color:#000>tbl</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relpages</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>heappages</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>toast</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relpages</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>toastpages</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                               </span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>toast</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>reltuples</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>toasttuples</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                               </span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>substring</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>array_to_string</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tbl</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>reloptions</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39; &#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;fillfactor=([0-9]+)&#39;</span><span style=color:#000;font-weight:700>)::</span><span style=color:#204a87>smallint</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>fillfactor</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                               </span><span style=color:#000>current_setting</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;block_size&#39;</span><span style=color:#000;font-weight:700>)::</span><span style=color:#204a87>numeric</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>bs</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                               </span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>version</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>~</span><span style=color:#4e9a06>&#39;mingw32&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>OR</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>version</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>~</span><span style=color:#4e9a06>&#39;64-bit|x86_64|ppc64|ia64|amd64&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                               </span><span style=color:#0000cf;font-weight:700>24</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>page_hdr</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                               </span><span style=color:#0000cf;font-weight:700>23</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>MAX</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>s</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>null_frac</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>7</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>count</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>s</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attname</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>int</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                                   </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#000>bool_or</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>att</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attname</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;oid&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>and</span><span style=color:#f8f8f8> </span><span style=color:#000>att</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attnum</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tpl_hdr_size</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                               </span><span style=color:#204a87;font-weight:700>sum</span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>s</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>null_frac</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>s</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>avg_width</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tpl_data_size</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                               </span><span style=color:#000>bool_or</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>att</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>atttypid</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;pg_catalog.name&#39;</span><span style=color:#000;font-weight:700>::</span><span style=color:#000>regtype</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                                   </span><span style=color:#204a87;font-weight:700>OR</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>sum</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#000>att</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attnum</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&lt;&gt;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>count</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>s</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attname</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>is_na</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                           </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_attribute</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>att</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                                    </span><span style=color:#204a87;font-weight:700>JOIN</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_class</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>att</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attrelid</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>oid</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                                    </span><span style=color:#204a87;font-weight:700>JOIN</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_namespace</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>ns</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>ns</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>oid</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relnamespace</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                                    </span><span style=color:#204a87;font-weight:700>LEFT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>JOIN</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_stats</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>s</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>s</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>schemaname</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>ns</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>nspname</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AND</span><span style=color:#f8f8f8> </span><span style=color:#000>s</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>tablename</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relname</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AND</span><span style=color:#f8f8f8> </span><span style=color:#000>s</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>inherited</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>false</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AND</span><span style=color:#f8f8f8> </span><span style=color:#000>s</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attname</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>att</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attname</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                                    </span><span style=color:#204a87;font-weight:700>LEFT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>JOIN</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_class</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>toast</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>reltoastrelid</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>toast</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>oid</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                           </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NOT</span><span style=color:#f8f8f8> </span><span style=color:#000>att</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attisdropped</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AND</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relkind</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;r&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AND</span><span style=color:#f8f8f8> </span><span style=color:#000>nspname</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NOT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IN</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;pg_catalog&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#4e9a06>&#39;information_schema&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                           </span><span style=color:#204a87;font-weight:700>GROUP</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>BY</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>7</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>9</span><span style=color:#000;font-weight:700>,</span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                       </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>s</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>              </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>s2</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>     </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>s3</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NOT</span><span style=color:#f8f8f8> </span><span style=color:#000>is_na</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>COMMENT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_table_bloat</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IS</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;postgres table bloat estimate&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>GRANT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_table_bloat</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>TO</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_monitor</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>----------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Index bloat estimate : monitor.pg_index_bloat
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>----------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>DROP</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IF</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>EXISTS</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_index_bloat</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASCADE</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>OR</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>REPLACE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_index_bloat</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>CURRENT_CATALOG</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>datname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>nspname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>idxname</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>relname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>tblid</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>idxid</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>relpages</span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>BIGINT</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#000>bs</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>size</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>COALESCE</span><span style=color:#000;font-weight:700>((</span><span style=color:#000>relpages</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8> </span><span style=color:#000>reltuples</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>6</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#000>index_tuple_hdr</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>%</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#000>index_tuple_hdr</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>%</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                                               </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#000>nulldatawidth</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#000>nulldatawidth</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>%</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#000>nulldatawidth</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>%</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                                  </span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>bs</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8> </span><span style=color:#000>pagehdr</span><span style=color:#000;font-weight:700>)::</span><span style=color:#204a87>FLOAT</span><span style=color:#f8f8f8>  </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>)),</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#f8f8f8> </span><span style=color:#000>relpages</span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>FLOAT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>ratio</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>nspname</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>idxname</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>indrelid</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tblid</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>indexrelid</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idxid</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#000>reltuples</span><span style=color:#000;font-weight:700>,</span><span style=color:#000>relpages</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#000>current_setting</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;block_size&#39;</span><span style=color:#000;font-weight:700>)::</span><span style=color:#204a87>INTEGER</span><span style=color:#f8f8f8>                                                               </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>bs</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>version</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>~</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;mingw32&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>OR</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>version</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>~</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;64-bit|x86_64|ppc64|ia64|amd64&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>8</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>ma</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#0000cf;font-weight:700>24</span><span style=color:#f8f8f8>                                                                                                   </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>pagehdr</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>max</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>COALESCE</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>pg_stats</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>null_frac</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>6</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>                               </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>index_tuple_hdr</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#204a87;font-weight:700>sum</span><span style=color:#000;font-weight:700>((</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>.</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8> </span><span style=color:#000>COALESCE</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>pg_stats</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>null_frac</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>.</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                    </span><span style=color:#000>COALESCE</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>pg_stats</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>avg_width</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1024</span><span style=color:#000;font-weight:700>))::</span><span style=color:#204a87>INTEGER</span><span style=color:#f8f8f8>                                                     </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>nulldatawidth</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_attribute</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                  </span><span style=color:#204a87;font-weight:700>JOIN</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>             </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_namespace</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>nspname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                    </span><span style=color:#000>ic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relname</span><span style=color:#f8f8f8>                                                   </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idxname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                    </span><span style=color:#000>ic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>reltuples</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                    </span><span style=color:#000>ic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relpages</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                    </span><span style=color:#000>pg_index</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>indrelid</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                    </span><span style=color:#000>pg_index</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>indexrelid</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                    </span><span style=color:#000>tc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relname</span><span style=color:#f8f8f8>                                                   </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tablename</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                    </span><span style=color:#000>regexp_split_to_table</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>pg_index</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>indkey</span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>TEXT</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39; &#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>::</span><span style=color:#f8f8f8> </span><span style=color:#204a87>INTEGER</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>attnum</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                    </span><span style=color:#000>pg_index</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>indexrelid</span><span style=color:#f8f8f8>                                          </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>index_oid</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>             </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_index</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                      </span><span style=color:#204a87;font-weight:700>JOIN</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_class</span><span style=color:#f8f8f8> </span><span style=color:#000>ic</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_index</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>indexrelid</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>ic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>oid</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                      </span><span style=color:#204a87;font-weight:700>JOIN</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_class</span><span style=color:#f8f8f8> </span><span style=color:#000>tc</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_index</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>indrelid</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>tc</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>oid</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                      </span><span style=color:#204a87;font-weight:700>JOIN</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_namespace</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_namespace</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>oid</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>ic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relnamespace</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                      </span><span style=color:#204a87;font-weight:700>JOIN</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_am</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>ic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relam</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_am</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>oid</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>             </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_am</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>amname</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;btree&#39;</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AND</span><span style=color:#f8f8f8> </span><span style=color:#000>ic</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relpages</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AND</span><span style=color:#f8f8f8> </span><span style=color:#000>nspname</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NOT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IN</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;pg_catalog&#39;</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;information_schema&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>         </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000>ind_atts</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_attribute</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attrelid</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>ind_atts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>indexrelid</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AND</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_attribute</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attnum</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>ind_atts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attnum</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                  </span><span style=color:#204a87;font-weight:700>JOIN</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_stats</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_stats</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>schemaname</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>ind_atts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>nspname</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>             </span><span style=color:#204a87;font-weight:700>AND</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>((</span><span style=color:#000>pg_stats</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>tablename</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>ind_atts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>tablename</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AND</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_stats</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attname</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_get_indexdef</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>pg_attribute</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attrelid</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_attribute</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attnum</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>TRUE</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                 </span><span style=color:#204a87;font-weight:700>OR</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>pg_stats</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>tablename</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>ind_atts</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>idxname</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AND</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_stats</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attname</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_attribute</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attname</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_attribute</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>attnum</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>GROUP</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>BY</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>4</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>6</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>     </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000>est</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>COMMENT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_index_bloat</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IS</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;postgres index bloat estimate (btree-only)&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>GRANT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_index_bloat</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>TO</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_monitor</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>----------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Relation Bloat : monitor.pg_bloat
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>----------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>DROP</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IF</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>EXISTS</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_bloat</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASCADE</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>OR</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>REPLACE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_bloat</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>datname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>tb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>datname</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>                                                   </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>datname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>nspname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>tb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>nspname</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>                                                   </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>nspname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>tblid</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>tb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>tblid</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>                                                       </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tblid</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>nspname</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>||</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;.&#39;</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>||</span><span style=color:#f8f8f8> </span><span style=color:#000>tb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>nspname</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>||</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;.&#39;</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>||</span><span style=color:#f8f8f8> </span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>tblid</span><span style=color:#000;font-weight:700>::</span><span style=color:#000>RegClass</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tblname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>tb</span><span style=color:#000;font-weight:700>.</span><span style=color:#204a87;font-weight:700>size</span><span style=color:#f8f8f8>                                                                            </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl_size</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#000>tb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ratio</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#000>round</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ratio</span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>NUMERIC</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>6</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#f8f8f8>                 </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl_ratio</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tb</span><span style=color:#000;font-weight:700>.</span><span style=color:#204a87;font-weight:700>size</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#000>tb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ratio</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#000>tb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ratio</span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>NUMERIC</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>BIGINT</span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl_wasted</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>idxid</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>nspname</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>||</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;.&#39;</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>||</span><span style=color:#f8f8f8> </span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>relname</span><span style=color:#f8f8f8>                                                    </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idxname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#204a87;font-weight:700>size</span><span style=color:#f8f8f8>                                                                            </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idx_size</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ratio</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#000>round</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ratio</span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>NUMERIC</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>5</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#f8f8f8>                 </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idx_ratio</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#204a87;font-weight:700>size</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>CASE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHEN</span><span style=color:#f8f8f8> </span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ratio</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>THEN</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ELSE</span><span style=color:#f8f8f8> </span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>ratio</span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>NUMERIC</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>END</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>BIGINT</span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idx_wasted</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_index_bloat</span><span style=color:#f8f8f8> </span><span style=color:#000>ib</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>FULL</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>OUTER</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>JOIN</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_table_bloat</span><span style=color:#f8f8f8> </span><span style=color:#000>tb</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>ib</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>tblid</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#000>tb</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>tblid</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>COMMENT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_bloat</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IS</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;postgres relation bloat detail&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>GRANT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_bloat</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>TO</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_monitor</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>----------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- monitor.pg_index_bloat_human
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>----------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>DROP</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IF</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>EXISTS</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_index_bloat_human</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASCADE</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>OR</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>REPLACE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_index_bloat_human</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>idxname</span><span style=color:#f8f8f8>                            </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>tblname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>idx_wasted</span><span style=color:#f8f8f8>                         </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>wasted</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>pg_size_pretty</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>idx_size</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>           </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idx_size</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>round</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#000>idx_ratio</span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>NUMERIC</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idx_ratio</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>pg_size_pretty</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>idx_wasted</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idx_wasted</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>pg_size_pretty</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tbl_size</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>           </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl_size</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>round</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl_ratio</span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>NUMERIC</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl_ratio</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>pg_size_pretty</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tbl_wasted</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl_wasted</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_bloat</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>idxname</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IS</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NOT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NULL</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>COMMENT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_index_bloat_human</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IS</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;postgres index bloat info in human-readable format&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>GRANT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_index_bloat_human</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>TO</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_monitor</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>----------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- monitor.pg_table_bloat_human
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>----------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>DROP</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IF</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>EXISTS</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_table_bloat_human</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASCADE</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>OR</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>REPLACE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_table_bloat_human</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>tblname</span><span style=color:#f8f8f8>                                          </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>name</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>idx_wasted</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl_wasted</span><span style=color:#f8f8f8>                          </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>wasted</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>pg_size_pretty</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>idx_wasted</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl_wasted</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>          </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>all_wasted</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>pg_size_pretty</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tbl_wasted</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>                       </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl_wasted</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>pg_size_pretty</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tbl_size</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>                         </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl_size</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>tbl_ratio</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>pg_size_pretty</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>idx_wasted</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>                       </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idx_wasted</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>pg_size_pretty</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>idx_size</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>                         </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idx_size</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>round</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>idx_wasted</span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>NUMERIC</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#000;font-weight:700>.</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#f8f8f8> </span><span style=color:#000>idx_size</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idx_ratio</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>datname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>             </span><span style=color:#000>nspname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>             </span><span style=color:#000>tblname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>             </span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>max</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tbl_wasted</span><span style=color:#000;font-weight:700>),</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>                         </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl_wasted</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>             </span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>max</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tbl_size</span><span style=color:#000;font-weight:700>),</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>                           </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl_size</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>             </span><span style=color:#000>round</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>max</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tbl_ratio</span><span style=color:#000;font-weight:700>),</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)::</span><span style=color:#204a87>NUMERIC</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tbl_ratio</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>             </span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>sum</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>idx_wasted</span><span style=color:#000;font-weight:700>),</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>                         </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idx_wasted</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>             </span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>sum</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>idx_size</span><span style=color:#000;font-weight:700>),</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>                           </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idx_size</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_bloat</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>tblname</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IS</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NOT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>NULL</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>GROUP</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>BY</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>     </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000>d</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>COMMENT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_table_bloat_human</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IS</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;postgres table bloat info in human-readable format&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>GRANT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_table_bloat_human</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>TO</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_monitor</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>----------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Activity Overview: monitor.pg_session
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>----------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>DROP</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IF</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>EXISTS</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_session</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASCADE</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>OR</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>REPLACE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_session</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>coalesce</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>datname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;all&#39;</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>datname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>numbackends</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>active</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>idle</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>ixact</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>max_duration</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>max_tx_duration</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8> </span><span style=color:#000>max_conn_duration</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>datname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#204a87;font-weight:700>count</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>                                         </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>numbackends</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#204a87;font-weight:700>count</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000>FILTER</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>state</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;active&#39;</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>       </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>active</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#204a87;font-weight:700>count</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000>FILTER</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>state</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;idle&#39;</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>idle</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#204a87;font-weight:700>count</span><span style=color:#000;font-weight:700>(</span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000>FILTER</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>state</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;idle in transaction&#39;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                    </span><span style=color:#204a87;font-weight:700>OR</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>state</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;idle in transaction (aborted)&#39;</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>ixact</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#204a87;font-weight:700>max</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>extract</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>epoch</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>from</span><span style=color:#f8f8f8> </span><span style=color:#000>now</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8> </span><span style=color:#000>state_change</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#000>FILTER</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>state</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;active&#39;</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>                </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>max_duration</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#204a87;font-weight:700>max</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>extract</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>epoch</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>from</span><span style=color:#f8f8f8> </span><span style=color:#000>now</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8> </span><span style=color:#000>xact_start</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>max_tx_duration</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>                </span><span style=color:#204a87;font-weight:700>max</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87;font-weight:700>extract</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>epoch</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>from</span><span style=color:#f8f8f8> </span><span style=color:#000>now</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>-</span><span style=color:#f8f8f8> </span><span style=color:#000>backend_start</span><span style=color:#000;font-weight:700>))</span><span style=color:#f8f8f8>   </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>max_conn_duration</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_stat_activity</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>backend_type</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;client backend&#39;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>           </span><span style=color:#204a87;font-weight:700>AND</span><span style=color:#f8f8f8> </span><span style=color:#000>pid</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&lt;&gt;</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_backend_pid</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>GROUP</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>BY</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ROLLUP</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>         </span><span style=color:#204a87;font-weight:700>ORDER</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>BY</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#f8f8f8> </span><span style=color:#000>NULLS</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FIRST</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>     </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#000>t</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>COMMENT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_session</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IS</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;postgres activity group by session&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>GRANT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_session</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>TO</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_monitor</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>----------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>-- Sequential Scan: monitor.pg_seq_scan
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic>----------------------------------------------------------------------
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>DROP</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IF</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>EXISTS</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_seq_scan</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASCADE</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>OR</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>REPLACE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_seq_scan</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#000>schemaname</span><span style=color:#f8f8f8>                                                        </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>nspname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>relname</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>seq_scan</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>seq_tup_read</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>seq_tup_read</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#f8f8f8> </span><span style=color:#000>seq_scan</span><span style=color:#f8f8f8>                                           </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>seq_tup_avg</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>idx_scan</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>n_live_tup</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#000>n_dead_tup</span><span style=color:#f8f8f8>                                           </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>tuples</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>       </span><span style=color:#000>round</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>n_live_tup</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>100</span><span style=color:#000;font-weight:700>.</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>::</span><span style=color:#204a87>NUMERIC</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>/</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>n_live_tup</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#000>n_dead_tup</span><span style=color:#000;font-weight:700>),</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#000>live_ratio</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_stat_user_tables</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>WHERE</span><span style=color:#f8f8f8> </span><span style=color:#000>seq_scan</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>and</span><span style=color:#f8f8f8> </span><span style=color:#000;font-weight:700>(</span><span style=color:#000>n_live_tup</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>+</span><span style=color:#f8f8f8> </span><span style=color:#000>n_dead_tup</span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8> </span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>ORDER</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>BY</span><span style=color:#f8f8f8> </span><span style=color:#000>seq_scan</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>DESC</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>COMMENT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>VIEW</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_seq_scan</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IS</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;table that have seq scan&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>GRANT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_seq_scan</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>TO</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_monitor</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div></details><details><summary>Function for viewing shared memory allocation (PG13 and above)</summary><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#204a87;font-weight:700>DROP</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FUNCTION</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IF</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>EXISTS</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_shmem</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>CASCADE</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>CREATE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>OR</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>REPLACE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FUNCTION</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_shmem</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>RETURNS</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SETOF</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#000>pg_shmem_allocations</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>AS</span><span style=color:#f8f8f8> </span><span style=color:#a40000>$$</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8> </span><span style=color:#ce5c00;font-weight:700>*</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_shmem_allocations</span><span style=color:#000;font-weight:700>;</span><span style=color:#a40000>$$</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>LANGUAGE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SQL</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>SECURITY</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>DEFINER</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>COMMENT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FUNCTION</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_shmem</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>IS</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#39;security wrapper for system view pg_shmem&#39;</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>REVOKE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ALL</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FUNCTION</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_shmem</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>PUBLIC</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>GRANT</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>EXECUTE</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>ON</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>FUNCTION</span><span style=color:#f8f8f8> </span><span style=color:#000>monitor</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pg_shmem</span><span style=color:#000;font-weight:700>()</span><span style=color:#f8f8f8> </span><span style=color:#204a87;font-weight:700>TO</span><span style=color:#f8f8f8> </span><span style=color:#000>pg_monitor</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div></details></div></div><div class=td-content style=page-break-before:always><h1 id=pg-536f1aee2f7b6fc9206c282f35fe3283>1 - Dashboards</h1><div class=lead>Pigsty provides many out-of-the-box Grafana monitoring dashboards for PostgreSQL</div><blockquote><p>Pigsty provides many out-of-the-box Grafana monitoring dashboards for PostgreSQL: <a href=https://demo.pigsty.io/d/pgsql-overview>Demo</a> & <a href=https://github.com/pgsty/pigsty/wiki/Gallery>Gallery</a>.</p></blockquote><p>There are 26 PostgreSQL-related monitoring dashboards in Pigsty, organized hierarchically into Overview, Cluster, Instance, and Database categories, and by data source into <a href=#overview>PGSQL</a>, <a href=#pgcat>PGCAT</a>, and <a href=#pglog>PGLOG</a> categories.</p><p><img src=/img/pigsty/dashboard.jpg alt=pigsty-dashboard.jpg></p><hr><h2 id=overview>Overview</h2><table><thead><tr><th style=text-align:center>Overview</th><th style=text-align:center>Cluster</th><th style=text-align:center>Instance</th><th style=text-align:center>Database</th></tr></thead><tbody><tr><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-overview>PGSQL Overview</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-cluster>PGSQL Cluster</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-instance>PGSQL Instance</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-database>PGSQL Database</a></td></tr><tr><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-alert>PGSQL Alert</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgrds-cluster>PGRDS Cluster</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgrds-instance>PGRDS Instance</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgcat-database>PGCAT Database</a></td></tr><tr><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-shard>PGSQL Shard</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-activity>PGSQL Activity</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgcat-instance>PGCAT Instance</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-tables>PGSQL Tables</a></td></tr><tr><td style=text-align:center></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-replication>PGSQL Replication</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-persist>PGSQL Persist</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-table>PGSQL Table</a></td></tr><tr><td style=text-align:center></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-service>PGSQL Service</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-proxy>PGSQL Proxy</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgcat-table>PGCAT Table</a></td></tr><tr><td style=text-align:center></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-databases>PGSQL Databases</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-pgbouncer>PGSQL Pgbouncer</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-query>PGSQL Query</a></td></tr><tr><td style=text-align:center></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-patroni>PGSQL Patroni</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-session>PGSQL Session</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgcat-query>PGCAT Query</a></td></tr><tr><td style=text-align:center></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-pitr>PGSQL PITR</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-xacts>PGSQL Xacts</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgcat-locks>PGCAT Locks</a></td></tr><tr><td style=text-align:center></td><td style=text-align:center></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgsql-exporter>PGSQL Exporter</a></td><td style=text-align:center><a href=https://demo.pigsty.io/d/pgcat-schema>PGCAT Schema</a></td></tr></tbody></table><p><strong>Overview</strong></p><ul><li><a href=https://demo.pigsty.io/d/pgsql-overview>pgsql-overview</a>: Main dashboard for the PGSQL module</li><li><a href=https://demo.pigsty.io/d/pgsql-alert>pgsql-alert</a>: Global critical metrics and alert events for PGSQL</li><li><a href=https://demo.pigsty.io/d/pgsql-shard>pgsql-shard</a>: Overview of horizontally sharded PGSQL clusters, such as Citus / GPSQL clusters</li></ul><p><strong>Cluster</strong></p><ul><li><a href=https://demo.pigsty.io/d/pgsql-cluster>pgsql-cluster</a>: Main dashboard for a PGSQL cluster</li><li><a href=https://demo.pigsty.io/d/pgrds-cluster>pgrds-cluster</a>: RDS version of PGSQL Cluster, focused on all PostgreSQL-specific metrics</li><li><a href=https://demo.pigsty.io/d/pgsql-activity>pgsql-activity</a>: Focus on PGSQL cluster sessions/load/QPS/TPS/locks</li><li><a href=https://demo.pigsty.io/d/pgsql-replication>pgsql-replication</a>: Focus on PGSQL cluster replication, slots, and pub/sub</li><li><a href=https://demo.pigsty.io/d/pgsql-service>pgsql-service</a>: Focus on PGSQL cluster services, proxies, routing, and load balancing</li><li><a href=https://demo.pigsty.io/d/pgsql-databases>pgsql-databases</a>: Focus on database CRUD, slow queries, and table statistics across all instances</li><li><a href=https://demo.pigsty.io/d/pgsql-patroni>pgsql-patroni</a>: Focus on cluster high availability status and Patroni component status</li><li><a href=https://demo.pigsty.io/d/pgsql-pitr>pgsql-pitr</a>: Focus on cluster PITR process context for point-in-time recovery assistance</li></ul><p><strong>Instance</strong></p><ul><li><a href=https://demo.pigsty.io/d/pgsql-instance>pgsql-instance</a>: Main dashboard for a single PGSQL instance</li><li><a href=https://demo.pigsty.io/d/pgrds-instance>pgrds-instance</a>: RDS version of PGSQL Instance, focused on all PostgreSQL-specific metrics</li><li><a href=https://demo.pigsty.io/d/pgcat-instance>pgcat-instance</a>: Instance information retrieved directly from the database catalog</li><li><a href=https://demo.pigsty.io/d/pgsql-proxy>pgsql-proxy</a>: Detailed metrics for a single HAProxy load balancer</li><li><a href=https://demo.pigsty.io/d/pgsql-pgbouncer>pgsql-pgbouncer</a>: Metrics overview in a single Pgbouncer connection pool instance</li><li><a href=https://demo.pigsty.io/d/pgsql-persist>pgsql-persist</a>: Persistence metrics: WAL, XID, checkpoints, archiving, IO</li><li><a href=https://demo.pigsty.io/d/pgsql-session>pgsql-session</a>: Session and active/idle time metrics in a single instance</li><li><a href=https://demo.pigsty.io/d/pgsql-xacts>pgsql-xacts</a>: Metrics related to transactions, locks, TPS/QPS</li><li><a href=https://demo.pigsty.io/d/pgsql-exporter>pgsql-exporter</a>: Self-monitoring metrics for Postgres and Pgbouncer monitoring components</li></ul><p><strong>Database</strong></p><ul><li><a href=https://demo.pigsty.io/d/pgsql-database>pgsql-database</a>: Main dashboard for a single PGSQL database</li><li><a href=https://demo.pigsty.io/d/pgcat-database>pgcat-database</a>: Database information retrieved directly from the database catalog</li><li><a href=https://demo.pigsty.io/d/pgsql-tables>pgsql-tables</a>: Table/index access metrics within a single database</li><li><a href=https://demo.pigsty.io/d/pgsql-table>pgsql-table</a>: Details of a single table (QPS/RT/index/sequences&mldr;)</li><li><a href=https://demo.pigsty.io/d/pgcat-table>pgcat-table</a>: Details of a single table retrieved directly from the database catalog (stats/bloat&mldr;)</li><li><a href=https://demo.pigsty.io/d/pgsql-query>pgsql-query</a>: Details of a single query (QPS/RT)</li><li><a href=https://demo.pigsty.io/d/pgcat-query>pgcat-query</a>: Details of a single query retrieved directly from the database catalog (SQL/stats)</li><li><a href=https://demo.pigsty.io/d/pgcat-schema>pgcat-schema</a>: Information about schemas retrieved directly from the database catalog (tables/indexes/sequences&mldr;)</li><li><a href=https://demo.pigsty.io/d/pgcat-locks>pgcat-locks</a>: Information about activities and lock waits retrieved directly from the database catalog</li></ul><hr><h2 id=overview-1>Overview</h2><p><a href=https://demo.pigsty.io/d/pgsql-overview>PGSQL Overview</a>: Main dashboard for the PGSQL module</p><details><summary>PGSQL Overview</summary><p><a href=https://demo.pigsty.io/d/pgsql-overview><img src=/img/dashboard/pgsql-overview.jpg alt=pgsql-overview.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-alert>PGSQL Alert</a>: Global critical metrics overview and alert event listing for PGSQL</p><details><summary>PGSQL Alert</summary><p><a href=https://demo.pigsty.io/d/pgsql-alert><img src=/img/dashboard/pgsql-alert.jpg alt=pgsql-alert.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-shard>PGSQL Shard</a>: Shows horizontal metric comparisons within a PGSQL horizontally sharded cluster, such as CITUS / GPSQL clusters</p><details><summary>PGSQL Shard</summary><p><a href=https://demo.pigsty.io/d/pgsql-shard><img src=/img/dashboard/pgsql-shard.jpg alt=pgsql-shard.jpg></a></p></details><hr><h2 id=cluster>Cluster</h2><p><a href=https://demo.pigsty.io/d/pgsql-cluster>PGSQL Cluster</a>: Main dashboard for a PGSQL cluster</p><details><summary>PGSQL Cluster</summary><p><a href=https://demo.pigsty.io/d/pgsql-cluster><img src=/img/dashboard/pgsql-cluster.jpg alt=pgsql-cluster.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgrds-cluster>PGRDS Cluster</a>: RDS version of PGSQL Cluster, focused on all PostgreSQL-specific metrics</p><details><summary>PGRDS Cluster</summary><p><a href=https://demo.pigsty.io/d/pgrds-cluster><img src=/img/dashboard/pgrds-cluster.jpg alt=pgrds-cluster.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-service>PGSQL Service</a>: Focus on PGSQL cluster services, proxies, routing, and load balancing</p><details><summary>PGSQL Service</summary><p><a href=https://demo.pigsty.io/d/pgsql-service><img src=/img/dashboard/pgsql-service.jpg alt=pgsql-service.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-activity>PGSQL Activity</a>: Focus on PGSQL cluster sessions/load/QPS/TPS/locks</p><details><summary>PGSQL Activity</summary><p><a href=https://demo.pigsty.io/d/pgsql-activity><img src=/img/dashboard/pgsql-activity.jpg alt=pgsql-activity.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-replication>PGSQL Replication</a>: Focus on PGSQL cluster replication, slots, and pub/sub</p><details><summary>PGSQL Replication</summary><p><a href=https://demo.pigsty.io/d/pgsql-replication><img src=/img/dashboard/pgsql-replication.jpg alt=pgsql-replication.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-databases>PGSQL Databases</a>: Focus on database CRUD, slow queries, and table statistics across all instances</p><details><summary>PGSQL Databases</summary><p><a href=https://demo.pigsty.io/d/pgsql-databases><img src=/img/dashboard/pgsql-databases.jpg alt=pgsql-databases.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-patroni>PGSQL Patroni</a>: Focus on cluster high availability status and Patroni component status</p><details><summary>PGSQL Patroni</summary><p><a href=https://demo.pigsty.io/d/pgsql-patroni><img src=/img/dashboard/pgsql-patroni.jpg alt=pgsql-patroni.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-pitr>PGSQL PITR</a>: Focus on cluster PITR process context for point-in-time recovery assistance</p><details><summary>PGSQL PITR</summary><p><a href=https://demo.pigsty.io/d/pgsql-pitr><img src=/img/dashboard/pgsql-pitr.jpg alt=pgsql-patroni.jpg></a></p></details><hr><h2 id=instance>Instance</h2><p><a href=https://demo.pigsty.io/d/pgsql-instance>PGSQL Instance</a>: Main dashboard for a single PGSQL instance</p><details><summary>PGSQL Instance</summary><p><a href=https://demo.pigsty.io/d/pgsql-instance><img src=/img/dashboard/pgsql-instance.jpg alt=pgsql-instance.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgrds-instance>PGRDS Instance</a>: RDS version of PGSQL Instance, focused on all PostgreSQL-specific metrics</p><details><summary>PGRDS Instance</summary><p><a href=https://demo.pigsty.io/d/pgrds-instance><img src=/img/dashboard/pgrds-instance.jpg alt=pgrds-instance.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-proxy>PGSQL Proxy</a>: Detailed metrics for a single HAProxy load balancer</p><details><summary>PGSQL Proxy</summary><p><a href=https://demo.pigsty.io/d/pgsql-proxy><img src=/img/dashboard/pgsql-proxy.jpg alt=pgsql-proxy.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-pgbouncer>PGSQL Pgbouncer</a>: Metrics overview in a single Pgbouncer connection pool instance</p><details><summary>PGSQL Pgbouncer</summary><p><a href=https://demo.pigsty.io/d/pgsql-pgbouncer><img src=/img/dashboard/pgsql-pgbouncer.jpg alt=pgsql-pgbouncer.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-persist>PGSQL Persist</a>: Persistence metrics: WAL, XID, checkpoints, archiving, IO</p><details><summary>PGSQL Persist</summary><p><a href=https://demo.pigsty.io/d/pgsql-persist><img src=/img/dashboard/pgsql-persist.jpg alt=pgsql-persist.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-xacts>PGSQL Xacts</a>: Metrics related to transactions, locks, TPS/QPS</p><details><summary>PGSQL Xacts</summary><p><a href=https://demo.pigsty.io/d/pgsql-xacts><img src=/img/dashboard/pgsql-xacts.jpg alt=pgsql-xacts.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-session>PGSQL Session</a>: Session and active/idle time metrics in a single instance</p><details><summary>PGSQL Session</summary><p><a href=https://demo.pigsty.io/d/pgsql-session><img src=/img/dashboard/pgsql-session.jpg alt=pgsql-session.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-exporter>PGSQL Exporter</a>: Self-monitoring metrics for Postgres/Pgbouncer monitoring components</p><details><summary>PGSQL Exporter</summary><p><a href=https://demo.pigsty.io/d/pgsql-exporter><img src=/img/dashboard/pgsql-exporter.jpg alt=pgsql-exporter.jpg></a></p></details><hr><h2 id=database>Database</h2><p><a href=https://demo.pigsty.io/d/pgsql-database>PGSQL Database</a>: Main dashboard for a single PGSQL database</p><details><summary>PGSQL Database</summary><p><a href=https://demo.pigsty.io/d/pgsql-database><img src=/img/dashboard/pgsql-database.jpg alt=pgsql-database.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-tables>PGSQL Tables</a>: Table/index access metrics within a single database</p><details><summary>PGSQL Tables</summary><p><a href=https://demo.pigsty.io/d/pgsql-tables><img src=/img/dashboard/pgsql-tables.jpg alt=pgsql-tables.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-table>PGSQL Table</a>: Details of a single table (QPS/RT/index/sequences&mldr;)</p><details><summary>PGSQL Table</summary><p><a href=https://demo.pigsty.io/d/pgsql-table><img src=/img/dashboard/pgsql-table.jpg alt=pgsql-table.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgsql-query>PGSQL Query</a>: Details of a single query (QPS/RT)</p><details><summary>PGSQL Query</summary><p><a href=https://demo.pigsty.io/d/pgsql-query><img src=/img/dashboard/pgsql-query.jpg alt=pgsql-query.jpg></a></p></details><hr><h2 id=pgcat>PGCAT</h2><p><a href=https://demo.pigsty.io/d/pgcat-instance>PGCAT Instance</a>: Instance information retrieved directly from the database catalog</p><details><summary>PGCAT Instance</summary><p><a href=https://demo.pigsty.io/d/pgcat-instance><img src=/img/dashboard/pgcat-instance.jpg alt=pgcat-instance.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgcat-database>PGCAT Database</a>: Database information retrieved directly from the database catalog</p><details><summary>PGCAT Database</summary><p><a href=https://demo.pigsty.io/d/pgcat-database><img src=/img/dashboard/pgcat-database.jpg alt=pgcat-database.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgcat-schema>PGCAT Schema</a>: Information about schemas retrieved directly from the database catalog (tables/indexes/sequences&mldr;)</p><details><summary>PGCAT Schema</summary><p><a href=https://demo.pigsty.io/d/pgcat-schema><img src=/img/dashboard/pgcat-schema.jpg alt=pgcat-schema.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgcat-table>PGCAT Table</a>: Details of a single table retrieved directly from the database catalog (stats/bloat&mldr;)</p><details><summary>PGCAT Table</summary><p><a href=https://demo.pigsty.io/d/pgcat-table><img src=/img/dashboard/pgcat-table.jpg alt=pgcat-table.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgcat-query>PGCAT Query</a>: Details of a single query retrieved directly from the database catalog (SQL/stats)</p><details><summary>PGCAT Query</summary><p><a href=https://demo.pigsty.io/d/pgcat-query><img src=/img/dashboard/pgcat-query.jpg alt=pgcat-query.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pgcat-locks>PGCAT Locks</a>: Information about activities and lock waits retrieved directly from the database catalog</p><details><summary>PGCAT Locks</summary><p><a href=https://demo.pigsty.io/d/pgcat-locks><img src=/img/dashboard/pgcat-locks.jpg alt=pgcat-locks.jpg></a></p></details><hr><h2 id=pglog>PGLOG</h2><p><a href=https://demo.pigsty.io/d/pglog-overview>PGLOG Overview</a>: Overview of CSV log samples in Pigsty CMDB</p><details><summary>PGLOG Overview</summary><p><a href=https://demo.pigsty.io/d/pglog-overview><img src=/img/dashboard/pglog-overview.jpg alt=pglog-overview.jpg></a></p></details><p><a href=https://demo.pigsty.io/d/pglog-session>PGLOG Session</a>: Log details of a session in CSV log samples in Pigsty CMDB</p><details><summary>PGLOG Session</summary><p><a href=https://demo.pigsty.io/d/pglog-session><img src=/img/dashboard/pglog-session.jpg alt=pglog-session.jpg></a></p></details><hr><h2 id=gallery>Gallery</h2><p>For details, refer to <a href=https://github.com/pgsty/pigsty/wiki/Gallery>pigsty/wiki/gallery</a>.</p><details><summary>PGSQL Overview</summary><p><a href=https://demo.pigsty.io/d/pgsql-overview><img src=/img/dashboard/pgsql-overview.jpg alt=pgsql-overview.jpg></a></p></details><details><summary>PGSQL Shard</summary><p><a href=https://demo.pigsty.io/d/pgsql-shard><img src=/img/dashboard/pgsql-shard.jpg alt=pgsql-shard.jpg></a></p></details><details><summary>PGSQL Cluster</summary><p><a href=https://demo.pigsty.io/d/pgsql-cluster><img src=/img/dashboard/pgsql-cluster.jpg alt=pgsql-cluster.jpg></a></p></details><details><summary>PGSQL Service</summary><p><a href=https://demo.pigsty.io/d/pgsql-service><img src=/img/dashboard/pgsql-service.jpg alt=pgsql-service.jpg></a></p></details><details><summary>PGSQL Activity</summary><p><a href=https://demo.pigsty.io/d/pgsql-activity><img src=/img/dashboard/pgsql-activity.jpg alt=pgsql-activity.jpg></a></p></details><details><summary>PGSQL Replication</summary><p><a href=https://demo.pigsty.io/d/pgsql-replication><img src=/img/dashboard/pgsql-replication.jpg alt=pgsql-replication.jpg></a></p></details><details><summary>PGSQL Databases</summary><p><a href=https://demo.pigsty.io/d/pgsql-databases><img src=/img/dashboard/pgsql-databases.jpg alt=pgsql-databases.jpg></a></p></details><details><summary>PGSQL Instance</summary><p><a href=https://demo.pigsty.io/d/pgsql-instance><img src=/img/dashboard/pgsql-instance.jpg alt=pgsql-instance.jpg></a></p></details><details><summary>PGSQL Proxy</summary><p><a href=https://demo.pigsty.io/d/pgsql-proxy><img src=/img/dashboard/pgsql-proxy.jpg alt=pgsql-proxy.jpg></a></p></details><details><summary>PGSQL Pgbouncer</summary><p><a href=https://demo.pigsty.io/d/pgsql-pgbouncer><img src=/img/dashboard/pgsql-pgbouncer.jpg alt=pgsql-pgbouncer.jpg></a></p></details><details><summary>PGSQL Session</summary><p><a href=https://demo.pigsty.io/d/pgsql-session><img src=/img/dashboard/pgsql-session.jpg alt=pgsql-session.jpg></a></p></details><details><summary>PGSQL Xacts</summary><p><a href=https://demo.pigsty.io/d/pgsql-xacts><img src=/img/dashboard/pgsql-xacts.jpg alt=pgsql-xacts.jpg></a></p></details><details><summary>PGSQL Persist</summary><p><a href=https://demo.pigsty.io/d/pgsql-persist><img src=/img/dashboard/pgsql-persist.jpg alt=pgsql-persist.jpg></a></p></details><details><summary>PGSQL Database</summary><p><a href=https://demo.pigsty.io/d/pgsql-database><img src=/img/dashboard/pgsql-database.jpg alt=pgsql-database.jpg></a></p></details><details><summary>PGSQL Tables</summary><p><a href=https://demo.pigsty.io/d/pgsql-tables><img src=/img/dashboard/pgsql-tables.jpg alt=pgsql-tables.jpg></a></p></details><details><summary>PGSQL Table</summary><p><a href=https://demo.pigsty.io/d/pgsql-table><img src=/img/dashboard/pgsql-table.jpg alt=pgsql-table.jpg></a></p></details><details><summary>PGSQL Query</summary><p><a href=https://demo.pigsty.io/d/pgsql-query><img src=/img/dashboard/pgsql-query.jpg alt=pgsql-query.jpg></a></p></details><details><summary>PGCAT Instance</summary><p><a href=https://demo.pigsty.io/d/pgcat-instance><img src=/img/dashboard/pgcat-instance.jpg alt=pgcat-instance.jpg></a></p></details><details><summary>PGCAT Database</summary><p><a href=https://demo.pigsty.io/d/pgcat-database><img src=/img/dashboard/pgcat-database.jpg alt=pgcat-database.jpg></a></p></details><details><summary>PGCAT Schema</summary><p><a href=https://demo.pigsty.io/d/pgcat-schema><img src=/img/dashboard/pgcat-schema.jpg alt=pgcat-schema.jpg></a></p></details><details><summary>PGCAT Table</summary><p><a href=https://demo.pigsty.io/d/pgcat-table><img src=/img/dashboard/pgcat-table.jpg alt=pgcat-table.jpg></a></p></details><details><summary>PGCAT Lock</summary><p><a href=https://demo.pigsty.io/d/pgcat-locks><img src=/img/dashboard/pgcat-locks.jpg alt=pgcat-locks.jpg></a></p></details><details><summary>PGCAT Query</summary><p><a href=https://demo.pigsty.io/d/pgcat-query><img src=/img/dashboard/pgcat-query.jpg alt=pgcat-query.jpg></a></p></details><details><summary>PGLOG Overview</summary><p><a href=https://demo.pigsty.io/d/pglog-overview><img src=/img/dashboard/pglog-overview.jpg alt=pglog-overview.jpg></a></p></details><details><summary>PGLOG Session</summary><p><a href=https://demo.pigsty.io/d/pglog-session><img src=/img/dashboard/pglog-session.jpg alt=pglog-session.jpg></a></p></details></div><div class=td-content style=page-break-before:always><h1 id=pg-1a2bfc805794d27d84ef5f1f8f01644b>2 - Metrics List</h1><div class=lead>Complete list and explanation of monitoring metrics provided by the Pigsty PGSQL module</div><p>The <a href=/docs/pgsql><strong><code>PGSQL</code></strong></a> module contains 638 types of available monitoring metrics.</p><table><thead><tr><th>Metric Name</th><th>Type</th><th>Labels</th><th>Description</th></tr></thead><tbody><tr><td>ALERTS</td><td>Unknown</td><td><code>category</code>, <code>job</code>, <code>level</code>, <code>ins</code>, <code>severity</code>, <code>ip</code>, <code>alertname</code>, <code>alertstate</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>ALERTS_FOR_STATE</td><td>Unknown</td><td><code>category</code>, <code>job</code>, <code>level</code>, <code>ins</code>, <code>severity</code>, <code>ip</code>, <code>alertname</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>cls:pressure1</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>cls:pressure15</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>cls:pressure5</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>go_gc_duration_seconds</td><td>summary</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>quantile</code>, <code>cls</code></td><td>A summary of the pause duration of garbage collection cycles.</td></tr><tr><td>go_gc_duration_seconds_count</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>go_gc_duration_seconds_sum</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>go_goroutines</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of goroutines that currently exist.</td></tr><tr><td>go_info</td><td>gauge</td><td><code>version</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Information about the Go environment.</td></tr><tr><td>go_memstats_alloc_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of bytes allocated and still in use.</td></tr><tr><td>go_memstats_alloc_bytes_total</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of bytes allocated, even if freed.</td></tr><tr><td>go_memstats_buck_hash_sys_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of bytes used by the profiling bucket hash table.</td></tr><tr><td>go_memstats_frees_total</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of frees.</td></tr><tr><td>go_memstats_gc_sys_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of bytes used for garbage collection system metadata.</td></tr><tr><td>go_memstats_heap_alloc_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of heap bytes allocated and still in use.</td></tr><tr><td>go_memstats_heap_idle_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of heap bytes waiting to be used.</td></tr><tr><td>go_memstats_heap_inuse_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of heap bytes that are in use.</td></tr><tr><td>go_memstats_heap_objects</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of allocated objects.</td></tr><tr><td>go_memstats_heap_released_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of heap bytes released to OS.</td></tr><tr><td>go_memstats_heap_sys_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of heap bytes obtained from system.</td></tr><tr><td>go_memstats_last_gc_time_seconds</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of seconds since 1970 of last garbage collection.</td></tr><tr><td>go_memstats_lookups_total</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of pointer lookups.</td></tr><tr><td>go_memstats_mallocs_total</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of mallocs.</td></tr><tr><td>go_memstats_mcache_inuse_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of bytes in use by mcache structures.</td></tr><tr><td>go_memstats_mcache_sys_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of bytes used for mcache structures obtained from system.</td></tr><tr><td>go_memstats_mspan_inuse_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of bytes in use by mspan structures.</td></tr><tr><td>go_memstats_mspan_sys_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of bytes used for mspan structures obtained from system.</td></tr><tr><td>go_memstats_next_gc_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of heap bytes when next garbage collection will take place.</td></tr><tr><td>go_memstats_other_sys_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of bytes used for other system allocations.</td></tr><tr><td>go_memstats_stack_inuse_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of bytes in use by the stack allocator.</td></tr><tr><td>go_memstats_stack_sys_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of bytes obtained from system for stack allocator.</td></tr><tr><td>go_memstats_sys_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of bytes obtained from system.</td></tr><tr><td>go_threads</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of OS threads created.</td></tr><tr><td>ins:pressure1</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>ins:pressure15</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>ins:pressure5</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>patroni_cluster_unlocked</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Value is 1 if the cluster is unlocked, 0 if locked.</td></tr><tr><td>patroni_dcs_last_seen</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Epoch timestamp when DCS was last contacted successfully by Patroni.</td></tr><tr><td>patroni_failsafe_mode_is_active</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Value is 1 if failsafe mode is active, 0 if inactive.</td></tr><tr><td>patroni_is_paused</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Value is 1 if auto failover is disabled, 0 otherwise.</td></tr><tr><td>patroni_master</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Value is 1 if this node is the leader, 0 otherwise.</td></tr><tr><td>patroni_pending_restart</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Value is 1 if the node needs a restart, 0 otherwise.</td></tr><tr><td>patroni_postgres_in_archive_recovery</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Value is 1 if Postgres is replicating from archive, 0 otherwise.</td></tr><tr><td>patroni_postgres_running</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Value is 1 if Postgres is running, 0 otherwise.</td></tr><tr><td>patroni_postgres_server_version</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Version of Postgres (if running), 0 otherwise.</td></tr><tr><td>patroni_postgres_streaming</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Value is 1 if Postgres is streaming, 0 otherwise.</td></tr><tr><td>patroni_postgres_timeline</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Postgres timeline of this node (if running), 0 otherwise.</td></tr><tr><td>patroni_postmaster_start_time</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Epoch seconds since Postgres started.</td></tr><tr><td>patroni_primary</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Value is 1 if this node is the leader, 0 otherwise.</td></tr><tr><td>patroni_replica</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Value is 1 if this node is a replica, 0 otherwise.</td></tr><tr><td>patroni_standby_leader</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Value is 1 if this node is the standby_leader, 0 otherwise.</td></tr><tr><td>patroni_sync_standby</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Value is 1 if this node is a sync standby replica, 0 otherwise.</td></tr><tr><td>patroni_up</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>patroni_version</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Patroni semver without periods.</td></tr><tr><td>patroni_xlog_location</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Current location of the Postgres transaction log, 0 if this node is not the leader.</td></tr><tr><td>patroni_xlog_paused</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Value is 1 if the Postgres xlog is paused, 0 otherwise.</td></tr><tr><td>patroni_xlog_received_location</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Current location of the received Postgres transaction log, 0 if this node is not a replica.</td></tr><tr><td>patroni_xlog_replayed_location</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Current location of the replayed Postgres transaction log, 0 if this node is not a replica.</td></tr><tr><td>patroni_xlog_replayed_timestamp</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>scope</code></td><td>Current timestamp of the replayed Postgres transaction log, 0 if null.</td></tr><tr><td>pg:cls:active_backends</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:active_time_rate15m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:active_time_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:active_time_rate5m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:age</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:buf_alloc_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:buf_clean_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:buf_flush_backend_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:buf_flush_checkpoint_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:cpu_count</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:cpu_usage</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:cpu_usage_15m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:cpu_usage_1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:cpu_usage_5m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:db_size</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:file_size</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:ixact_backends</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:ixact_time_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:lag_bytes</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:lag_seconds</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:leader</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:load1</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:load15</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:load5</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:lock_count</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:locks</td><td>Unknown</td><td><code>job</code>, <code>cls</code>, <code>mode</code></td><td>N/A</td></tr><tr><td>pg:cls:log_size</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:lsn_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:members</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:num_backends</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:partition</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:receiver</td><td>Unknown</td><td><code>state</code>, <code>slot_name</code>, <code>job</code>, <code>appname</code>, <code>ip</code>, <code>cls</code>, <code>sender_host</code>, <code>sender_port</code></td><td>N/A</td></tr><tr><td>pg:cls:rlock_count</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:saturation1</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:saturation15</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:saturation5</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:sender</td><td>Unknown</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:session_time_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:size</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:slot_count</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:slot_retained_bytes</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:standby_count</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:sync_state</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:timeline</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:tup_deleted_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:tup_fetched_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:tup_inserted_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:tup_modified_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:tup_returned_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:wal_size</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:xact_commit_rate15m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:xact_commit_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:xact_commit_rate5m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:xact_rollback_rate15m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:xact_rollback_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:xact_rollback_rate5m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:xact_total_rate15m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:xact_total_rate1m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:xact_total_sigma15m</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:cls:xlock_count</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:active_backends</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:active_time_rate15m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:active_time_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:active_time_rate5m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:age</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:age_deriv1h</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:age_exhaust</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:blk_io_time_seconds_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:blk_read_time_seconds_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:blk_write_time_seconds_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:blks_access_1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:blks_hit_1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:blks_hit_ratio1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:blks_read_1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:conn_limit</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:conn_usage</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:db_size</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:ixact_backends</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:ixact_time_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:lock_count</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:num_backends</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:rlock_count</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:session_time_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:temp_bytes_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:temp_files_1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:tup_deleted_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:tup_fetched_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:tup_inserted_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:tup_modified_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:tup_returned_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:wlock_count</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:xact_commit_rate15m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:xact_commit_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:xact_commit_rate5m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:xact_rollback_rate15m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:xact_rollback_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:xact_rollback_rate5m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:xact_total_rate15m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:xact_total_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:xact_total_rate5m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:xact_total_sigma15m</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:db:xlock_count</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:env:active_backends</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:active_time_rate15m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:active_time_rate1m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:active_time_rate5m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:age</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:cpu_count</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:cpu_usage</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:cpu_usage_15m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:cpu_usage_1m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:cpu_usage_5m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:ixact_backends</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:ixact_time_rate1m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:lag_bytes</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:lag_seconds</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:lsn_rate1m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:session_time_rate1m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:tup_deleted_rate1m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:tup_fetched_rate1m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:tup_inserted_rate1m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:tup_modified_rate1m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:tup_returned_rate1m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:xact_commit_rate15m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:xact_commit_rate1m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:xact_commit_rate5m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:xact_rollback_rate15m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:xact_rollback_rate1m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:xact_rollback_rate5m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:xact_total_rate15m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:xact_total_rate1m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:env:xact_total_sigma15m</td><td>Unknown</td><td><code>job</code></td><td>N/A</td></tr><tr><td>pg:ins:active_backends</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:active_time_rate15m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:active_time_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:active_time_rate5m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:age</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:blks_hit_ratio1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:buf_alloc_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:buf_clean_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:buf_flush_backend_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:buf_flush_checkpoint_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:ckpt_1h</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:ckpt_req_1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:ckpt_timed_1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:conn_limit</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:conn_usage</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:cpu_count</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:cpu_usage</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:cpu_usage_15m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:cpu_usage_1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:cpu_usage_5m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:db_size</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:file_size</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:fs_size</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:is_leader</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:ixact_backends</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:ixact_time_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:lag_bytes</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:lag_seconds</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:load1</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:load15</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:load5</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:lock_count</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:locks</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>mode</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:log_size</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:lsn_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:mem_size</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:num_backends</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:rlock_count</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:saturation1</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:saturation15</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:saturation5</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:session_time_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:slot_retained_bytes</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:space_usage</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:status</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:sync_state</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:target_count</td><td>Unknown</td><td><code>job</code>, <code>cls</code>, <code>ins</code></td><td>N/A</td></tr><tr><td>pg:ins:timeline</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:tup_deleted_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:tup_fetched_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:tup_inserted_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:tup_modified_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:tup_returned_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:wal_size</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:wlock_count</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:xact_commit_rate15m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:xact_commit_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:xact_commit_rate5m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:xact_rollback_rate15m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:xact_rollback_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:xact_rollback_rate5m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:xact_total_rate15m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:xact_total_rate1m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:xact_total_rate5m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:xact_total_sigma15m</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:ins:xlock_count</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:query:call_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:query:rt_1m</td><td>Unknown</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg:table:scan_rate1m</td><td>Unknown</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg_activity_count</td><td>gauge</td><td><code>datname</code>, <code>state</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Count of connection among (datname,state)</td></tr><tr><td>pg_activity_max_conn_duration</td><td>gauge</td><td><code>datname</code>, <code>state</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Max backend session duration since state change among (datname, state)</td></tr><tr><td>pg_activity_max_duration</td><td>gauge</td><td><code>datname</code>, <code>state</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Max duration since last state change among (datname, state)</td></tr><tr><td>pg_activity_max_tx_duration</td><td>gauge</td><td><code>datname</code>, <code>state</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Max transaction duration since state change among (datname, state)</td></tr><tr><td>pg_archiver_failed_count</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of failed attempts for archiving WAL files</td></tr><tr><td>pg_archiver_finish_count</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of WAL files that have been successfully archived</td></tr><tr><td>pg_archiver_last_failed_time</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time of the last failed archival operation</td></tr><tr><td>pg_archiver_last_finish_time</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time of the last successful archive operation</td></tr><tr><td>pg_archiver_reset_time</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time at which archive statistics were last reset</td></tr><tr><td>pg_backend_count</td><td>gauge</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Database backend process count by backend_type</td></tr><tr><td>pg_bgwriter_buffers_alloc</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of buffers allocated</td></tr><tr><td>pg_bgwriter_buffers_backend</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of buffers written directly by a backend</td></tr><tr><td>pg_bgwriter_buffers_backend_fsync</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of times a backend had to execute its own fsync call</td></tr><tr><td>pg_bgwriter_buffers_checkpoint</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of buffers written during checkpoints</td></tr><tr><td>pg_bgwriter_buffers_clean</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of buffers written by the background writer</td></tr><tr><td>pg_bgwriter_checkpoint_sync_time</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total amount of time that has been spent in the portion of checkpoint processing where files are synchronized to disk, in seconds</td></tr><tr><td>pg_bgwriter_checkpoint_write_time</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total amount of time that has been spent in the portion of checkpoint processing where files are written to disk, in seconds</td></tr><tr><td>pg_bgwriter_checkpoints_req</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of requested checkpoints that have been performed</td></tr><tr><td>pg_bgwriter_checkpoints_timed</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of scheduled checkpoints that have been performed</td></tr><tr><td>pg_bgwriter_maxwritten_clean</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of times the background writer stopped a cleaning scan because it had written too many buffers</td></tr><tr><td>pg_bgwriter_reset_time</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time at which bgwriter statistics were last reset</td></tr><tr><td>pg_boot_time</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>unix timestamp when postmaster boot</td></tr><tr><td>pg_checkpoint_checkpoint_lsn</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint location</td></tr><tr><td>pg_checkpoint_elapse</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Seconds elapsed since latest checkpoint in seconds</td></tr><tr><td>pg_checkpoint_full_page_writes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s full_page_writes enabled</td></tr><tr><td>pg_checkpoint_newest_commit_ts_xid</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s newestCommitTsXid</td></tr><tr><td>pg_checkpoint_next_multi_offset</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s NextMultiOffset</td></tr><tr><td>pg_checkpoint_next_multixact_id</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s NextMultiXactId</td></tr><tr><td>pg_checkpoint_next_oid</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s NextOID</td></tr><tr><td>pg_checkpoint_next_xid</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s NextXID xid</td></tr><tr><td>pg_checkpoint_next_xid_epoch</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s NextXID epoch</td></tr><tr><td>pg_checkpoint_oldest_active_xid</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s oldestActiveXID</td></tr><tr><td>pg_checkpoint_oldest_commit_ts_xid</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s oldestCommitTsXid</td></tr><tr><td>pg_checkpoint_oldest_multi_dbid</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s oldestMulti&rsquo;s DB OID</td></tr><tr><td>pg_checkpoint_oldest_multi_xid</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s oldestMultiXid</td></tr><tr><td>pg_checkpoint_oldest_xid</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s oldestXID</td></tr><tr><td>pg_checkpoint_oldest_xid_dbid</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s oldestXID&rsquo;s DB OID</td></tr><tr><td>pg_checkpoint_prev_tli</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s PrevTimeLineID</td></tr><tr><td>pg_checkpoint_redo_lsn</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s REDO location</td></tr><tr><td>pg_checkpoint_time</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time of latest checkpoint</td></tr><tr><td>pg_checkpoint_tli</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Latest checkpoint&rsquo;s TimeLineID</td></tr><tr><td>pg_conf_reload_time</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>seconds since last configuration reload</td></tr><tr><td>pg_db_active_time</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time spent executing SQL statements in this database, in seconds</td></tr><tr><td>pg_db_age</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Age of database calculated from datfrozenxid</td></tr><tr><td>pg_db_allow_conn</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>If false(0) then no one can connect to this database.</td></tr><tr><td>pg_db_blk_read_time</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time spent reading data file blocks by backends in this database, in seconds</td></tr><tr><td>pg_db_blk_write_time</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time spent writing data file blocks by backends in this database, in seconds</td></tr><tr><td>pg_db_blks_access</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of times disk blocks that accessed read+hit</td></tr><tr><td>pg_db_blks_hit</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of times disk blocks were found already in the buffer cache</td></tr><tr><td>pg_db_blks_read</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of disk blocks read in this database</td></tr><tr><td>pg_db_cks_fail_time</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time at which the last data page checksum failure was detected in this database</td></tr><tr><td>pg_db_cks_fails</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of data page checksum failures detected in this database, -1 for not enabled</td></tr><tr><td>pg_db_confl_confl_bufferpin</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of queries in this database that have been canceled due to pinned buffers</td></tr><tr><td>pg_db_confl_confl_deadlock</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of queries in this database that have been canceled due to deadlocks</td></tr><tr><td>pg_db_confl_confl_lock</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of queries in this database that have been canceled due to lock timeouts</td></tr><tr><td>pg_db_confl_confl_snapshot</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of queries in this database that have been canceled due to old snapshots</td></tr><tr><td>pg_db_confl_confl_tablespace</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of queries in this database that have been canceled due to dropped tablespaces</td></tr><tr><td>pg_db_conflicts</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of queries canceled due to conflicts with recovery in this database</td></tr><tr><td>pg_db_conn_limit</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Sets maximum number of concurrent connections that can be made to this database. -1 means no limit.</td></tr><tr><td>pg_db_datid</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>OID of the database</td></tr><tr><td>pg_db_deadlocks</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of deadlocks detected in this database</td></tr><tr><td>pg_db_frozen_xid</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>All transaction IDs before this one have been frozened</td></tr><tr><td>pg_db_is_template</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>If true(1), then this database can be cloned by any user with CREATEDB privileges</td></tr><tr><td>pg_db_ixact_time</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time spent idling while in a transaction in this database, in seconds</td></tr><tr><td>pg_db_numbackends</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of backends currently connected to this database</td></tr><tr><td>pg_db_reset_time</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time at which database statistics were last reset</td></tr><tr><td>pg_db_session_time</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time spent by database sessions in this database, in seconds</td></tr><tr><td>pg_db_sessions</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of sessions established to this database</td></tr><tr><td>pg_db_sessions_abandoned</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of database sessions to this database that were terminated because connection to the client was lost</td></tr><tr><td>pg_db_sessions_fatal</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of database sessions to this database that were terminated by fatal errors</td></tr><tr><td>pg_db_sessions_killed</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of database sessions to this database that were terminated by operator intervention</td></tr><tr><td>pg_db_temp_bytes</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total amount of data written to temporary files by queries in this database.</td></tr><tr><td>pg_db_temp_files</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of temporary files created by queries in this database</td></tr><tr><td>pg_db_tup_deleted</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of rows deleted by queries in this database</td></tr><tr><td>pg_db_tup_fetched</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of rows fetched by queries in this database</td></tr><tr><td>pg_db_tup_inserted</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of rows inserted by queries in this database</td></tr><tr><td>pg_db_tup_modified</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of rows modified by queries in this database</td></tr><tr><td>pg_db_tup_returned</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of rows returned by queries in this database</td></tr><tr><td>pg_db_tup_updated</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of rows updated by queries in this database</td></tr><tr><td>pg_db_xact_commit</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of transactions in this database that have been committed</td></tr><tr><td>pg_db_xact_rollback</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of transactions in this database that have been rolled back</td></tr><tr><td>pg_db_xact_total</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of transactions in this database</td></tr><tr><td>pg_downstream_count</td><td>gauge</td><td><code>state</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Count of corresponding state</td></tr><tr><td>pg_exporter_agent_up</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg_exporter_last_scrape_time</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>seconds exporter spending on scrapping</td></tr><tr><td>pg_exporter_query_cache_ttl</td><td>gauge</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>times to live of query cache</td></tr><tr><td>pg_exporter_query_scrape_duration</td><td>gauge</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>seconds query spending on scrapping</td></tr><tr><td>pg_exporter_query_scrape_error_count</td><td>gauge</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>times the query failed</td></tr><tr><td>pg_exporter_query_scrape_hit_count</td><td>gauge</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>numbers been scrapped from this query</td></tr><tr><td>pg_exporter_query_scrape_metric_count</td><td>gauge</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>numbers of metrics been scrapped from this query</td></tr><tr><td>pg_exporter_query_scrape_total_count</td><td>gauge</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>times exporter server was scraped for metrics</td></tr><tr><td>pg_exporter_scrape_duration</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>seconds exporter spending on scrapping</td></tr><tr><td>pg_exporter_scrape_error_count</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>times exporter was scraped for metrics and failed</td></tr><tr><td>pg_exporter_scrape_total_count</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>times exporter was scraped for metrics</td></tr><tr><td>pg_exporter_server_scrape_duration</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>seconds exporter server spending on scrapping</td></tr><tr><td>pg_exporter_server_scrape_error_count</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pg_exporter_server_scrape_total_count</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>times exporter server was scraped for metrics</td></tr><tr><td>pg_exporter_server_scrape_total_seconds</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>seconds exporter server spending on scrapping</td></tr><tr><td>pg_exporter_up</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>always be 1 if your could retrieve metrics</td></tr><tr><td>pg_exporter_uptime</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>seconds since exporter primary server inited</td></tr><tr><td>pg_flush_lsn</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>primary only, location of current wal syncing</td></tr><tr><td>pg_func_calls</td><td>counter</td><td><code>datname</code>, <code>funcname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of times this function has been called</td></tr><tr><td>pg_func_self_time</td><td>counter</td><td><code>datname</code>, <code>funcname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total time spent in this function itself, not including other functions called by it, in ms</td></tr><tr><td>pg_func_total_time</td><td>counter</td><td><code>datname</code>, <code>funcname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total time spent in this function and all other functions called by it, in ms</td></tr><tr><td>pg_in_recovery</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>server is in recovery mode? 1 for yes 0 for no</td></tr><tr><td>pg_index_idx_blks_hit</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>relid</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>idxname</code></td><td>Number of buffer hits in this index</td></tr><tr><td>pg_index_idx_blks_read</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>relid</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>idxname</code></td><td>Number of disk blocks read from this index</td></tr><tr><td>pg_index_idx_scan</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>relid</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>idxname</code></td><td>Number of index scans initiated on this index</td></tr><tr><td>pg_index_idx_tup_fetch</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>relid</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>idxname</code></td><td>Number of live table rows fetched by simple index scans using this index</td></tr><tr><td>pg_index_idx_tup_read</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>relid</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>idxname</code></td><td>Number of index entries returned by scans on this index</td></tr><tr><td>pg_index_relpages</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>relid</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>idxname</code></td><td>Size of the on-disk representation of this index in pages</td></tr><tr><td>pg_index_reltuples</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>relid</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>idxname</code></td><td>Estimate relation tuples</td></tr><tr><td>pg_insert_lsn</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>primary only, location of current wal inserting</td></tr><tr><td>pg_io_evictions</td><td>counter</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>Number of times a block has been written out from a shared or local buffer</td></tr><tr><td>pg_io_extend_time</td><td>counter</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>Time spent in extend operations in seconds</td></tr><tr><td>pg_io_extends</td><td>counter</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>Number of relation extend operations, each of the size specified in op_bytes.</td></tr><tr><td>pg_io_fsync_time</td><td>counter</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>Time spent in fsync operations in seconds</td></tr><tr><td>pg_io_fsyncs</td><td>counter</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>Number of fsync calls. These are only tracked in context normal</td></tr><tr><td>pg_io_hits</td><td>counter</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>The number of times a desired block was found in a shared buffer.</td></tr><tr><td>pg_io_op_bytes</td><td>gauge</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>The number of bytes per unit of I/O read, written, or extended. 8192 by default</td></tr><tr><td>pg_io_read_time</td><td>counter</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>Time spent in read operations in seconds</td></tr><tr><td>pg_io_reads</td><td>counter</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>Number of read operations, each of the size specified in op_bytes.</td></tr><tr><td>pg_io_reset_time</td><td>gauge</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>Timestamp at which these statistics were last reset</td></tr><tr><td>pg_io_reuses</td><td>counter</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>The number of times an existing buffer in reused</td></tr><tr><td>pg_io_write_time</td><td>counter</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>Time spent in write operations in seconds</td></tr><tr><td>pg_io_writeback_time</td><td>counter</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>Time spent in writeback operations in seconds</td></tr><tr><td>pg_io_writebacks</td><td>counter</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>Number of units of size op_bytes which the process requested the kernel write out to permanent storage.</td></tr><tr><td>pg_io_writes</td><td>counter</td><td><code>type</code>, <code>job</code>, <code>ins</code>, <code>object</code>, <code>ip</code>, <code>context</code>, <code>instance</code>, <code>cls</code></td><td>Number of write operations, each of the size specified in op_bytes.</td></tr><tr><td>pg_is_in_recovery</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>1 if in recovery mode</td></tr><tr><td>pg_is_wal_replay_paused</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>1 if wal play paused</td></tr><tr><td>pg_lag</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>replica only, replication lag in seconds</td></tr><tr><td>pg_last_replay_time</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>time when last transaction been replayed</td></tr><tr><td>pg_lock_count</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>mode</code>, <code>instance</code>, <code>cls</code></td><td>Number of locks of corresponding mode and database</td></tr><tr><td>pg_lsn</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>log sequence number, current write location</td></tr><tr><td>pg_meta_info</td><td>gauge</td><td><code>cls</code>, <code>extensions</code>, <code>version</code>, <code>job</code>, <code>ins</code>, <code>primary_conninfo</code>, <code>conf_path</code>, <code>hba_path</code>, <code>ip</code>, <code>cluster_id</code>, <code>instance</code>, <code>listen_port</code>, <code>wal_level</code>, <code>ver_num</code>, <code>cluster_name</code>, <code>data_dir</code></td><td>constant 1</td></tr><tr><td>pg_query_calls</td><td>counter</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of times the statement was executed</td></tr><tr><td>pg_query_exec_time</td><td>counter</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total time spent executing the statement, in seconds</td></tr><tr><td>pg_query_io_time</td><td>counter</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total time the statement spent reading and writing blocks, in seconds</td></tr><tr><td>pg_query_rows</td><td>counter</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of rows retrieved or affected by the statement</td></tr><tr><td>pg_query_sblk_dirtied</td><td>counter</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of shared blocks dirtied by the statement</td></tr><tr><td>pg_query_sblk_hit</td><td>counter</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of shared block cache hits by the statement</td></tr><tr><td>pg_query_sblk_read</td><td>counter</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of shared blocks read by the statement</td></tr><tr><td>pg_query_sblk_written</td><td>counter</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of shared blocks written by the statement</td></tr><tr><td>pg_query_wal_bytes</td><td>counter</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total amount of WAL bytes generated by the statement</td></tr><tr><td>pg_receive_lsn</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>replica only, location of wal synced to disk</td></tr><tr><td>pg_recovery_backup_end_lsn</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Backup end location</td></tr><tr><td>pg_recovery_backup_start_lsn</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Backup start location</td></tr><tr><td>pg_recovery_min_lsn</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Minimum recovery ending location</td></tr><tr><td>pg_recovery_min_timeline</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Min recovery ending loc&rsquo;s timeline</td></tr><tr><td>pg_recovery_prefetch_block_distance</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>How many blocks ahead the prefetcher is looking</td></tr><tr><td>pg_recovery_prefetch_hit</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of blocks not prefetched because they were already in the buffer pool</td></tr><tr><td>pg_recovery_prefetch_io_depth</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>How many prefetches have been initiated but are not yet known to have completed</td></tr><tr><td>pg_recovery_prefetch_prefetch</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of blocks prefetched because they were not in the buffer pool</td></tr><tr><td>pg_recovery_prefetch_reset_time</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time at which these recovery prefetch statistics were last reset</td></tr><tr><td>pg_recovery_prefetch_skip_fpw</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of blocks not prefetched because a full page image was included in the WAL</td></tr><tr><td>pg_recovery_prefetch_skip_init</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of blocks not prefetched because they would be zero-initialized</td></tr><tr><td>pg_recovery_prefetch_skip_new</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of blocks not prefetched because they didn&rsquo;t exist yet</td></tr><tr><td>pg_recovery_prefetch_skip_rep</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of blocks not prefetched because they were already recently prefetched</td></tr><tr><td>pg_recovery_prefetch_wal_distance</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>How many bytes ahead the prefetcher is looking</td></tr><tr><td>pg_recovery_require_record</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>End-of-backup record required</td></tr><tr><td>pg_recv_flush_lsn</td><td>counter</td><td><code>state</code>, <code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>sender_host</code>, <code>sender_port</code></td><td>Last write-ahead log location already received and flushed to disk</td></tr><tr><td>pg_recv_flush_tli</td><td>counter</td><td><code>state</code>, <code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>sender_host</code>, <code>sender_port</code></td><td>Timeline number of last write-ahead log location received and flushed to disk</td></tr><tr><td>pg_recv_init_lsn</td><td>counter</td><td><code>state</code>, <code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>sender_host</code>, <code>sender_port</code></td><td>First write-ahead log location used when WAL receiver is started</td></tr><tr><td>pg_recv_init_tli</td><td>counter</td><td><code>state</code>, <code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>sender_host</code>, <code>sender_port</code></td><td>First timeline number used when WAL receiver is started</td></tr><tr><td>pg_recv_msg_recv_time</td><td>gauge</td><td><code>state</code>, <code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>sender_host</code>, <code>sender_port</code></td><td>Receipt time of last message received from origin WAL sender</td></tr><tr><td>pg_recv_msg_send_time</td><td>gauge</td><td><code>state</code>, <code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>sender_host</code>, <code>sender_port</code></td><td>Send time of last message received from origin WAL sender</td></tr><tr><td>pg_recv_pid</td><td>gauge</td><td><code>state</code>, <code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>sender_host</code>, <code>sender_port</code></td><td>Process ID of the WAL receiver process</td></tr><tr><td>pg_recv_reported_lsn</td><td>counter</td><td><code>state</code>, <code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>sender_host</code>, <code>sender_port</code></td><td>Last write-ahead log location reported to origin WAL sender</td></tr><tr><td>pg_recv_reported_time</td><td>gauge</td><td><code>state</code>, <code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>sender_host</code>, <code>sender_port</code></td><td>Time of last write-ahead log location reported to origin WAL sender</td></tr><tr><td>pg_recv_time</td><td>gauge</td><td><code>state</code>, <code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>sender_host</code>, <code>sender_port</code></td><td>Time of current snapshot</td></tr><tr><td>pg_recv_write_lsn</td><td>counter</td><td><code>state</code>, <code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>sender_host</code>, <code>sender_port</code></td><td>Last write-ahead log location already received and written to disk, but not flushed.</td></tr><tr><td>pg_relkind_count</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>relkind</code></td><td>Number of relations of corresponding relkind</td></tr><tr><td>pg_repl_backend_xmin</td><td>counter</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>This standby&rsquo;s xmin horizon reported by hot_standby_feedback.</td></tr><tr><td>pg_repl_client_port</td><td>gauge</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>TCP port number that the client is using for communication with this WAL sender, or -1 if a Unix socket is used</td></tr><tr><td>pg_repl_flush_diff</td><td>gauge</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Last log position flushed to disk by this standby server diff with current lsn</td></tr><tr><td>pg_repl_flush_lag</td><td>gauge</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time elapsed between flushing recent WAL locally and receiving notification that this standby server has written and flushed it</td></tr><tr><td>pg_repl_flush_lsn</td><td>counter</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Last write-ahead log location flushed to disk by this standby server</td></tr><tr><td>pg_repl_launch_time</td><td>counter</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time when this process was started, i.e., when the client connected to this WAL sender</td></tr><tr><td>pg_repl_lsn</td><td>counter</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Current log position on this server</td></tr><tr><td>pg_repl_replay_diff</td><td>gauge</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Last log position replayed into the database on this standby server diff with current lsn</td></tr><tr><td>pg_repl_replay_lag</td><td>gauge</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time elapsed between flushing recent WAL locally and receiving notification that this standby server has written, flushed and applied it</td></tr><tr><td>pg_repl_replay_lsn</td><td>counter</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Last write-ahead log location replayed into the database on this standby server</td></tr><tr><td>pg_repl_reply_time</td><td>gauge</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Send time of last reply message received from standby server</td></tr><tr><td>pg_repl_sent_diff</td><td>gauge</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Last log position sent to this standby server diff with current lsn</td></tr><tr><td>pg_repl_sent_lsn</td><td>counter</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Last write-ahead log location sent on this connection</td></tr><tr><td>pg_repl_state</td><td>gauge</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Current WAL sender encoded state 0-4 for streaming startup catchup backup stopping</td></tr><tr><td>pg_repl_sync_priority</td><td>gauge</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Priority of this standby server for being chosen as the synchronous standby</td></tr><tr><td>pg_repl_sync_state</td><td>gauge</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Encoded synchronous state of this standby server, 0-3 for async potential sync quorum</td></tr><tr><td>pg_repl_time</td><td>counter</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Current timestamp in unix epoch</td></tr><tr><td>pg_repl_write_diff</td><td>gauge</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Last log position written to disk by this standby server diff with current lsn</td></tr><tr><td>pg_repl_write_lag</td><td>gauge</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time elapsed between flushing recent WAL locally and receiving notification that this standby server has written it</td></tr><tr><td>pg_repl_write_lsn</td><td>counter</td><td><code>pid</code>, <code>usename</code>, <code>address</code>, <code>job</code>, <code>ins</code>, <code>appname</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Last write-ahead log location written to disk by this standby server</td></tr><tr><td>pg_replay_lsn</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>replica only, location of wal applied</td></tr><tr><td>pg_seq_blks_hit</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>seqname</code></td><td>Number of buffer hits in this sequence</td></tr><tr><td>pg_seq_blks_read</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>seqname</code></td><td>Number of disk blocks read from this sequence</td></tr><tr><td>pg_seq_last_value</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code>, <code>seqname</code></td><td>The last sequence value written to disk</td></tr><tr><td>pg_setting_block_size</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>pg page block size, 8192 by default</td></tr><tr><td>pg_setting_data_checksums</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>whether data checksum is enabled, 1 enabled 0 disabled</td></tr><tr><td>pg_setting_max_connections</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>number of concurrent connections to the database server</td></tr><tr><td>pg_setting_max_locks_per_transaction</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>no more than this many distinct objects can be locked at any one time</td></tr><tr><td>pg_setting_max_prepared_transactions</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>maximum number of transactions that can be in the prepared state simultaneously</td></tr><tr><td>pg_setting_max_replication_slots</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>maximum number of replication slots</td></tr><tr><td>pg_setting_max_wal_senders</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>maximum number of concurrent connections from standby servers</td></tr><tr><td>pg_setting_max_worker_processes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>maximum number of background processes that the system can support</td></tr><tr><td>pg_setting_wal_log_hints</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>whether wal_log_hints is enabled, 1 enabled 0 disabled</td></tr><tr><td>pg_size_bytes</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>File size in bytes</td></tr><tr><td>pg_slot_active</td><td>gauge</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>True(1) if this slot is currently actively being used</td></tr><tr><td>pg_slot_catalog_xmin</td><td>counter</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>The oldest transaction affecting the system catalogs that this slot needs the database to retain.</td></tr><tr><td>pg_slot_confirm_lsn</td><td>counter</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>The address (LSN) up to which the logical slot&rsquo;s consumer has confirmed receiving data.</td></tr><tr><td>pg_slot_reset_time</td><td>counter</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>When statistics were last reset</td></tr><tr><td>pg_slot_restart_lsn</td><td>counter</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>The address (LSN) of oldest WAL which still might be required by the consumer of this slot</td></tr><tr><td>pg_slot_retained_bytes</td><td>gauge</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Size of bytes that retained for this slot</td></tr><tr><td>pg_slot_safe_wal_size</td><td>gauge</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>bytes that can be written to WAL which will not make slot into lost</td></tr><tr><td>pg_slot_spill_bytes</td><td>counter</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Bytes that spilled to disk due to logical decode mem exceeding</td></tr><tr><td>pg_slot_spill_count</td><td>counter</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Xacts that spilled to disk due to logical decode mem exceeding (a xact can be spilled multiple times)</td></tr><tr><td>pg_slot_spill_txns</td><td>counter</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Xacts that spilled to disk due to logical decode mem exceeding (subtrans included)</td></tr><tr><td>pg_slot_stream_bytes</td><td>counter</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Bytes that streamed to decoding output plugin after mem exceed</td></tr><tr><td>pg_slot_stream_count</td><td>counter</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Xacts that streamed to decoding output plugin after mem exceed (a xact can be streamed multiple times)</td></tr><tr><td>pg_slot_stream_txns</td><td>counter</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Xacts that streamed to decoding output plugin after mem exceed</td></tr><tr><td>pg_slot_temporary</td><td>gauge</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>True(1) if this is a temporary replication slot.</td></tr><tr><td>pg_slot_total_bytes</td><td>counter</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of decoded bytes sent to the decoding output plugin for this slot</td></tr><tr><td>pg_slot_total_txns</td><td>counter</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of decoded xacts sent to the decoding output plugin for this slot</td></tr><tr><td>pg_slot_wal_status</td><td>gauge</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>WAL reserve status 0-3 means reserved,extended,unreserved,lost, -1 means other</td></tr><tr><td>pg_slot_xmin</td><td>counter</td><td><code>slot_name</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>The oldest transaction that this slot needs the database to retain.</td></tr><tr><td>pg_slru_blks_exists</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of blocks checked for existence for this SLRU</td></tr><tr><td>pg_slru_blks_hit</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of times disk blocks were found already in the SLRU, so that a read was not necessary</td></tr><tr><td>pg_slru_blks_read</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of disk blocks read for this SLRU</td></tr><tr><td>pg_slru_blks_written</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of disk blocks written for this SLRU</td></tr><tr><td>pg_slru_blks_zeroed</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of blocks zeroed during initializations</td></tr><tr><td>pg_slru_flushes</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of flushes of dirty data for this SLRU</td></tr><tr><td>pg_slru_reset_time</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time at which these statistics were last reset</td></tr><tr><td>pg_slru_truncates</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of truncates for this SLRU</td></tr><tr><td>pg_ssl_disabled</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of client connection that does not use ssl</td></tr><tr><td>pg_ssl_enabled</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of client connection that use ssl</td></tr><tr><td>pg_sync_standby_enabled</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>names</code>, <code>instance</code>, <code>cls</code></td><td>Synchronous commit enabled, 1 if enabled, 0 if disabled</td></tr><tr><td>pg_table_age</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Age of this table in vacuum cycles</td></tr><tr><td>pg_table_analyze_count</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of times this table has been manually analyzed</td></tr><tr><td>pg_table_autoanalyze_count</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of times this table has been analyzed by the autovacuum daemon</td></tr><tr><td>pg_table_autovacuum_count</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of times this table has been vacuumed by the autovacuum daemon</td></tr><tr><td>pg_table_frozenxid</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>All txid before this have been frozen on this table</td></tr><tr><td>pg_table_heap_blks_hit</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of buffer hits in this table</td></tr><tr><td>pg_table_heap_blks_read</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of disk blocks read from this table</td></tr><tr><td>pg_table_idx_blks_hit</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of buffer hits in all indexes on this table</td></tr><tr><td>pg_table_idx_blks_read</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of disk blocks read from all indexes on this table</td></tr><tr><td>pg_table_idx_scan</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of index scans initiated on this table</td></tr><tr><td>pg_table_idx_tup_fetch</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of live rows fetched by index scans</td></tr><tr><td>pg_table_kind</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Relation kind r/table/114</td></tr><tr><td>pg_table_n_dead_tup</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Estimated number of dead rows</td></tr><tr><td>pg_table_n_ins_since_vacuum</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Estimated number of rows inserted since this table was last vacuumed</td></tr><tr><td>pg_table_n_live_tup</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Estimated number of live rows</td></tr><tr><td>pg_table_n_mod_since_analyze</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Estimated number of rows modified since this table was last analyzed</td></tr><tr><td>pg_table_n_tup_del</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of rows deleted</td></tr><tr><td>pg_table_n_tup_hot_upd</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of rows HOT updated (i.e with no separate index update required)</td></tr><tr><td>pg_table_n_tup_ins</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of rows inserted</td></tr><tr><td>pg_table_n_tup_mod</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of rows modified (insert + update + delete)</td></tr><tr><td>pg_table_n_tup_newpage_upd</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of rows updated where the successor version goes onto a new heap page</td></tr><tr><td>pg_table_n_tup_upd</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of rows updated (includes HOT updated rows)</td></tr><tr><td>pg_table_ncols</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of columns in the table</td></tr><tr><td>pg_table_pages</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Size of the on-disk representation of this table in pages</td></tr><tr><td>pg_table_relid</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Relation oid of this table</td></tr><tr><td>pg_table_seq_scan</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of sequential scans initiated on this table</td></tr><tr><td>pg_table_seq_tup_read</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of live rows fetched by sequential scans</td></tr><tr><td>pg_table_size_bytes</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total bytes of this table (including toast, index, toast index)</td></tr><tr><td>pg_table_size_indexsize</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Bytes of all related indexes of this table</td></tr><tr><td>pg_table_size_relsize</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Bytes of this table itself (main, vm, fsm)</td></tr><tr><td>pg_table_size_toastsize</td><td>gauge</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Bytes of toast tables of this table</td></tr><tr><td>pg_table_tbl_scan</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of scans initiated on this table</td></tr><tr><td>pg_table_tup_read</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of live rows fetched by scans</td></tr><tr><td>pg_table_tuples</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>All txid before this have been frozen on this table</td></tr><tr><td>pg_table_vacuum_count</td><td>counter</td><td><code>datname</code>, <code>relname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of times this table has been manually vacuumed (not counting VACUUM FULL)</td></tr><tr><td>pg_timestamp</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>database current timestamp</td></tr><tr><td>pg_up</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>last scrape was able to connect to the server: 1 for yes, 0 for no</td></tr><tr><td>pg_uptime</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>seconds since postmaster start</td></tr><tr><td>pg_version</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>server version number</td></tr><tr><td>pg_wait_count</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>event</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Count of WaitEvent on target database</td></tr><tr><td>pg_wal_buffers_full</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of times WAL data was written to disk because WAL buffers became full</td></tr><tr><td>pg_wal_bytes</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total amount of WAL generated in bytes</td></tr><tr><td>pg_wal_fpi</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of WAL full page images generated</td></tr><tr><td>pg_wal_records</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of WAL records generated</td></tr><tr><td>pg_wal_reset_time</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>When statistics were last reset</td></tr><tr><td>pg_wal_sync</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of times WAL files were synced to disk via issue_xlog_fsync request</td></tr><tr><td>pg_wal_sync_time</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total amount of time spent syncing WAL files to disk via issue_xlog_fsync request, in seconds</td></tr><tr><td>pg_wal_write</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of times WAL buffers were written out to disk via XLogWrite request.</td></tr><tr><td>pg_wal_write_time</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total amount of time spent writing WAL buffers to disk via XLogWrite request in seconds</td></tr><tr><td>pg_write_lsn</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>primary only, location of current wal writing</td></tr><tr><td>pg_xact_xmax</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>First as-yet-unassigned txid. txid >= this are invisible.</td></tr><tr><td>pg_xact_xmin</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Earliest txid that is still active</td></tr><tr><td>pg_xact_xnum</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Current active transaction count</td></tr><tr><td>pgbouncer:cls:load1</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pgbouncer:cls:load15</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pgbouncer:cls:load5</td><td>Unknown</td><td><code>job</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pgbouncer:db:conn_usage</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>N/A</td></tr><tr><td>pgbouncer:db:conn_usage_reserve</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>N/A</td></tr><tr><td>pgbouncer:db:pool_current_conn</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>N/A</td></tr><tr><td>pgbouncer:db:pool_disabled</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>N/A</td></tr><tr><td>pgbouncer:db:pool_max_conn</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>N/A</td></tr><tr><td>pgbouncer:db:pool_paused</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>N/A</td></tr><tr><td>pgbouncer:db:pool_reserve_size</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>N/A</td></tr><tr><td>pgbouncer:db:pool_size</td><td>Unknown</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>N/A</td></tr><tr><td>pgbouncer:ins:free_clients</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pgbouncer:ins:free_servers</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pgbouncer:ins:load1</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pgbouncer:ins:load15</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pgbouncer:ins:load5</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pgbouncer:ins:login_clients</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pgbouncer:ins:pool_databases</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pgbouncer:ins:pool_users</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pgbouncer:ins:pools</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pgbouncer:ins:used_clients</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pgbouncer_database_current_connections</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>Current number of connections for this database</td></tr><tr><td>pgbouncer_database_disabled</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>True(1) if this database is currently disabled, else 0</td></tr><tr><td>pgbouncer_database_max_connections</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>Maximum number of allowed connections for this database</td></tr><tr><td>pgbouncer_database_min_pool_size</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>Minimum number of server connections</td></tr><tr><td>pgbouncer_database_paused</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>True(1) if this database is currently paused, else 0</td></tr><tr><td>pgbouncer_database_pool_size</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>Maximum number of server connections</td></tr><tr><td>pgbouncer_database_reserve_pool</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>host</code>, <code>cls</code>, <code>real_datname</code>, <code>port</code></td><td>Maximum number of additional connections for this database</td></tr><tr><td>pgbouncer_exporter_agent_up</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>pgbouncer_exporter_last_scrape_time</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>seconds exporter spending on scrapping</td></tr><tr><td>pgbouncer_exporter_query_cache_ttl</td><td>gauge</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>times to live of query cache</td></tr><tr><td>pgbouncer_exporter_query_scrape_duration</td><td>gauge</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>seconds query spending on scrapping</td></tr><tr><td>pgbouncer_exporter_query_scrape_error_count</td><td>gauge</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>times the query failed</td></tr><tr><td>pgbouncer_exporter_query_scrape_hit_count</td><td>gauge</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>numbers been scrapped from this query</td></tr><tr><td>pgbouncer_exporter_query_scrape_metric_count</td><td>gauge</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>numbers of metrics been scrapped from this query</td></tr><tr><td>pgbouncer_exporter_query_scrape_total_count</td><td>gauge</td><td><code>datname</code>, <code>query</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>times exporter server was scraped for metrics</td></tr><tr><td>pgbouncer_exporter_scrape_duration</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>seconds exporter spending on scrapping</td></tr><tr><td>pgbouncer_exporter_scrape_error_count</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>times exporter was scraped for metrics and failed</td></tr><tr><td>pgbouncer_exporter_scrape_total_count</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>times exporter was scraped for metrics</td></tr><tr><td>pgbouncer_exporter_server_scrape_duration</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>seconds exporter server spending on scrapping</td></tr><tr><td>pgbouncer_exporter_server_scrape_total_count</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>times exporter server was scraped for metrics</td></tr><tr><td>pgbouncer_exporter_server_scrape_total_seconds</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>seconds exporter server spending on scrapping</td></tr><tr><td>pgbouncer_exporter_up</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>always be 1 if your could retrieve metrics</td></tr><tr><td>pgbouncer_exporter_uptime</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>seconds since exporter primary server inited</td></tr><tr><td>pgbouncer_in_recovery</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>server is in recovery mode? 1 for yes 0 for no</td></tr><tr><td>pgbouncer_list_items</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>list</code>, <code>cls</code></td><td>Number of corresponding pgbouncer object</td></tr><tr><td>pgbouncer_pool_active_cancel_clients</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>user</code>, <code>cls</code>, <code>pool_mode</code></td><td>Client connections that have forwarded query cancellations to the server and are waiting for the server response.</td></tr><tr><td>pgbouncer_pool_active_cancel_servers</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>user</code>, <code>cls</code>, <code>pool_mode</code></td><td>Server connections that are currently forwarding a cancel request</td></tr><tr><td>pgbouncer_pool_active_clients</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>user</code>, <code>cls</code>, <code>pool_mode</code></td><td>Client connections that are linked to server connection and can process queries</td></tr><tr><td>pgbouncer_pool_active_servers</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>user</code>, <code>cls</code>, <code>pool_mode</code></td><td>Server connections that are linked to a client</td></tr><tr><td>pgbouncer_pool_cancel_clients</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>user</code>, <code>cls</code>, <code>pool_mode</code></td><td>Client connections that have not forwarded query cancellations to the server yet.</td></tr><tr><td>pgbouncer_pool_cancel_servers</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>user</code>, <code>cls</code>, <code>pool_mode</code></td><td>cancel requests have completed that were sent to cancel a query on this server</td></tr><tr><td>pgbouncer_pool_idle_servers</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>user</code>, <code>cls</code>, <code>pool_mode</code></td><td>Server connections that are unused and immediately usable for client queries</td></tr><tr><td>pgbouncer_pool_login_servers</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>user</code>, <code>cls</code>, <code>pool_mode</code></td><td>Server connections currently in the process of logging in</td></tr><tr><td>pgbouncer_pool_maxwait</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>user</code>, <code>cls</code>, <code>pool_mode</code></td><td>How long the first(oldest) client in the queue has waited, in seconds, key metric</td></tr><tr><td>pgbouncer_pool_maxwait_us</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>user</code>, <code>cls</code>, <code>pool_mode</code></td><td>Microsecond part of the maximum waiting time.</td></tr><tr><td>pgbouncer_pool_tested_servers</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>user</code>, <code>cls</code>, <code>pool_mode</code></td><td>Server connections that are currently running reset or check query</td></tr><tr><td>pgbouncer_pool_used_servers</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>user</code>, <code>cls</code>, <code>pool_mode</code></td><td>Server connections that have been idle for more than server_check_delay (means have to run check query)</td></tr><tr><td>pgbouncer_pool_waiting_clients</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>user</code>, <code>cls</code>, <code>pool_mode</code></td><td>Client connections that have sent queries but have not yet got a server connection</td></tr><tr><td>pgbouncer_stat_avg_query_count</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Average queries per second in last stat period</td></tr><tr><td>pgbouncer_stat_avg_query_time</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Average query duration, in seconds</td></tr><tr><td>pgbouncer_stat_avg_recv</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Average received (from clients) bytes per second</td></tr><tr><td>pgbouncer_stat_avg_sent</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Average sent (to clients) bytes per second</td></tr><tr><td>pgbouncer_stat_avg_wait_time</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time spent by clients waiting for a server, in seconds (average per second).</td></tr><tr><td>pgbouncer_stat_avg_xact_count</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Average transactions per second in last stat period</td></tr><tr><td>pgbouncer_stat_avg_xact_time</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Average transaction duration, in seconds</td></tr><tr><td>pgbouncer_stat_total_query_count</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of SQL queries pooled by pgbouncer</td></tr><tr><td>pgbouncer_stat_total_query_time</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of seconds spent when executing queries</td></tr><tr><td>pgbouncer_stat_total_received</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total volume in bytes of network traffic received by pgbouncer</td></tr><tr><td>pgbouncer_stat_total_sent</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total volume in bytes of network traffic sent by pgbouncer</td></tr><tr><td>pgbouncer_stat_total_wait_time</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Time spent by clients waiting for a server, in seconds</td></tr><tr><td>pgbouncer_stat_total_xact_count</td><td>gauge</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of SQL transactions pooled by pgbouncer</td></tr><tr><td>pgbouncer_stat_total_xact_time</td><td>counter</td><td><code>datname</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of seconds spent when in a transaction</td></tr><tr><td>pgbouncer_up</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>last scrape was able to connect to the server: 1 for yes, 0 for no</td></tr><tr><td>pgbouncer_version</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>server version number</td></tr><tr><td>process_cpu_seconds_total</td><td>counter</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total user and system CPU time spent in seconds.</td></tr><tr><td>process_max_fds</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Maximum number of open file descriptors.</td></tr><tr><td>process_open_fds</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Number of open file descriptors.</td></tr><tr><td>process_resident_memory_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Resident memory size in bytes.</td></tr><tr><td>process_start_time_seconds</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Start time of the process since unix epoch in seconds.</td></tr><tr><td>process_virtual_memory_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Virtual memory size in bytes.</td></tr><tr><td>process_virtual_memory_max_bytes</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Maximum amount of virtual memory available in bytes.</td></tr><tr><td>promhttp_metric_handler_requests_in_flight</td><td>gauge</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Current number of scrapes being served.</td></tr><tr><td>promhttp_metric_handler_requests_total</td><td>counter</td><td><code>code</code>, <code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>Total number of scrapes by HTTP status code.</td></tr><tr><td>scrape_duration_seconds</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>scrape_samples_post_metric_relabeling</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>scrape_samples_scraped</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>scrape_series_added</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr><tr><td>up</td><td>Unknown</td><td><code>job</code>, <code>ins</code>, <code>ip</code>, <code>instance</code>, <code>cls</code></td><td>N/A</td></tr></tbody></table></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="Email - Vonng" aria-label="Email - Vonng"><a target=_blank rel=noopener href=mailto:rh@vonng.com aria-label="Email - Vonng"><i class="fa fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="GitHub - Vonng" aria-label="GitHub - Vonng"><a target=_blank rel=noopener href=https://github.com/Vonng aria-label="GitHub - Vonng"><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="X - Vonng" aria-label="X - Vonng"><a target=_blank rel=noopener href=https://x.com/RonVonng aria-label="X - Vonng"><i class="fab fa-x-twitter"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="X - Pigsty" aria-label="X - Pigsty"><a target=_blank rel=noopener href=https://x.com/PlGSTY aria-label="X - Pigsty"><i class="fab fa-twitter"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="LinkedIn - Vonng" aria-label="LinkedIn - Vonng"><a target=_blank rel=noopener href=https://www.linkedin.com/in/vonng/ aria-label="LinkedIn - Vonng"><i class="fab fa-linkedin"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Discord aria-label=Discord><a target=_blank rel=noopener href=https://discord.gg/wDzt5VyWEz aria-label=Discord><i class="fab fa-discord"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Telegram aria-label=Telegram><a target=_blank rel=noopener href=https://t.me/joinchat/gV9zfZraNPM3YjFh aria-label=Telegram><i class="fab fa-telegram"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=WeChat aria-label=WeChat><a target=_blank rel=noopener href=/img/pigsty/pigsty-cc.jpg aria-label=WeChat><i class="fab fa-weixin"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Discussion aria-label=Discussion><a target=_blank rel=noopener href=https://github.com/orgs/pgsty/discussions aria-label=Discussion><i class="fab fa-discourse"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Repo aria-label=Repo><a target=_blank rel=noopener href=https://github.com/pgsty/pigsty aria-label=Repo><i class="fab fa-github"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2018&ndash;2026
<span class=td-footer__authors>Ruohang Feng</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span><span class=ms-2><a href=/docs/about/privacy target=_blank rel=noopener>Privacy Policy</a></span></div></div></div></footer></div><script src=/js/main.min.d20e761d6aa4d2ace0488e45da0e775a8b17300a8430f32fbcfa016e6c9e6eb6.js integrity="sha256-0g52HWqk0qzgSI5F2g53WosXMAqEMPMvvPoBbmyebrY=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>